"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[5541],{2203:(e,t,n)=>{n.d(t,{F:()=>H,K:()=>g});var i=n(11273),a=n(58395),r=n(5837),s=n(30610),o=n(76933),l=n(17921),c=n(84400),d=n(92518),u=n(47909),m=n(95386),p=n(49506),h=n(49382),f=n(69464);const g={Close:1,CancelLimit:2,Open:3},y=({hash:e,onClose:t})=>{const{useHistoryDetail:n,getI18n:i}=(0,c.useContext)(f.C),{useHistoryDetailSymbol:r,useHistoryDetailType:s}=n(),{symbol:o,isLong:l,symbolName:d}=r(e),{i18n:m}=s(e),{icons:p}=(0,u.z)();return(0,c.useMemo)((()=>c.createElement("div",{className:"flex items-center justify-between mb-4"},c.createElement("div",{className:"text-t-primary text-subtitle1"},d||o," ",l?i("orderForm-long","Long"):i("orderForm-short","Short")," -  ",m),p.CloseD?c.createElement(p.CloseD,{width:"20px",height:"20px",fontSize:"20px",className:"hidden sm:block cursor-pointer absolute right-4 text-t-third  userInfo-Detail-close-icon",onClick:t}):c.createElement(a.E,{width:"20px",height:"20px",fontSize:"20px",className:"hidden sm:block cursor-pointer absolute right-4 text-t-third userInfo-Detail-close-icon",onClick:t}))),[i,m,p,l,t,o,d])},E=({hash:e})=>{const{getI18n:t,useHistoryDetail:n,staticHost:i}=(0,c.useContext)(f.C),{useHistoryDetailLeverage:a,useHistoryDetailSymbol:r,useHistoryDetailPNLROI:s}=n(),o=a(e),{symbolType:l}=r(e),{isPNLNegative:d,isPNLPositive:u}=s(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-leverage","Leverage")},c.createElement("div",{className:"flex items-center gap-1"},o,c.createElement(h.b,{staticHost:i,symbolType:l,isPNLNegative:d,isPNLPositive:u})))},x=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailInitialMargin:i}=n(),a=i(e),r=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-initialMargin-tips01","Initial Margin is the margin initially allocated to this position.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3"},t("userinfo-dialog-detail-history-initialMargin-tips02","Initial Margin = Principal - Open Fee")))),[t]);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-initialMargin","Initial Margin"),tips:r,showLabelSx:!0},a)},C=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailQtyAndSize:i,useHistoryDetailPair:a}=n(),{baseAsset:r}=a(e),{size:s,qty:o}=i(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-qty","QTY(Size)")},o," ",r," ( ≈ ",s," USD )")},F=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailPrice:i}=n(),{entryPrice:a}=i(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-entryPrice","Entry Price")},a," USD")},v=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailPrice:i}=n(),{closePrice:a}=i(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-closePrice","Close Price")},a," USD")},N=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailLiqLostRate:i}=n(),a=i(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-liquidLostRate","Liquid Lost Rate")},`${new l.Z(a).multipliedBy(100).toFixed(2)}%`)},_=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailFundingFee:i}=n(),{fundingFee:a,isFundingFeeNegative:r}=i(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-accFundingFee","Acc. Funding Fee")},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell))":"rgb(var(--colors-t-buy))"}},a))},S=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailPNLROI:i}=n(),{PNL:a,isPNLNegative:r}=i(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-realizedPnl-tips01","Realized PNL only calculates the profit and loss generated after the position is successfully opened.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3"},t("userinfo-dialog-detail-history-realizedPnl-tips02-v2","Long : Realized PNL = (Close Price - Entry Price) * Qty + Funding Fee")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-realizedPnl-tips03-v2","Short : Realized PNL = (Entry Price - Close Price ) * Qty + Funding Fee")))),[t]);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-realizedPnl","Realized PNL"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell))":"rgb(var(--colors-t-buy))"}},a))},b=({hash:e})=>{const{getI18n:t,useHistoryDetail:n,enableShare:i,ee:a}=(0,c.useContext)(f.C),{useHistoryDetailPNLROI:s}=n(),{ROI:o,isROINegative:l}=s(e),d=(0,c.useCallback)((()=>a.emit("MODAL_POSITION_SHARE_OPEN",{hash:e,overlay:!0})),[a,e]),{icons:m}=(0,u.z)(),h=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-realizedROI-tips01","Realized ROI = Realized PNL / Initial margin * 100%")))),[t]);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-realizedROI","Realized ROI"),tips:h,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:l?"rgb(var(--colors-t-sell))":"rgb(var(--colors-t-buy))"}},o),i&&c.createElement("div",null,m.ShareD?c.createElement(m.ShareD,{className:"relative ml-1 cursor-pointer text-t-third userInfo-Detail-share-icon",onClick:d}):c.createElement(r.f,{className:"relative ml-0.5 cursor-pointer text-t-third",width:"16px",height:"16px",fontSize:"16px",onClick:d})))},L=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailOpenCloseFee:i}=n(),{openFee:a}=i(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-openFee","Open Fee")},a)},P=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailOpenCloseFee:i}=n(),{closeFee:a,isDynamicClosingFee:r}=i(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-closeFee","Close Fee")},c.createElement("div",{className:"flex flex-col"},a,r?c.createElement("div",{className:"text-caption1 text-t-secondary text-right"},c.createElement(d.c,{i18nKey:"userinfo-close-fee-based-pnl",defaults:t("userinfo-close-fee-based-pnl","Charge based on PNL <viewMoreLink>View</viewMoreLink>"),components:{viewMoreLink:c.createElement("a",{href:m.WO,className:"text-t-link hover:text-t-linkHover",target:"_blank",rel:"noreferrer"})}})):null))},I=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailOpenCloseFee:i}=n(),{executionFee:a}=i(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-executionFee","Execution Fee")},a)},D=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailNetProfit:i}=n(),{netProfit:a,isNetProfitNegative:r}=i(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-netProfit-tips01","Net Profit is the profit and loss obtained after taking into account the trader's principal and trading fees.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3"},t("userinfo-dialog-detail-history-netProfit-tips02-v2","Net Profit = Realized PNL - Open Fee - Execution Fee - Close Fee")))),[t]);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-netProfit","Net Profit"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell))":"rgb(var(--colors-t-buy))"}},a))},w=({hash:e})=>{const{getI18n:t,useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailDuration:i}=n(),{time:a}=i(e);return c.createElement(p.Z,{label:t("userinfo-dialog-detail-time","Time")},a)},O=({hash:e})=>c.createElement("div",{className:"flex flex-col gap-6 max-h-[80vh] overflow-auto lg:h-[unset] lg:overflow-hidden lg:flex-row"},c.createElement("div",{className:"flex flex-col w-full lg:w-1/2 gap-4"},c.createElement(E,{hash:e}),c.createElement(x,{hash:e}),c.createElement(C,{hash:e}),c.createElement(F,{hash:e}),c.createElement(v,{hash:e}),c.createElement(N,{hash:e}),c.createElement(_,{hash:e}),c.createElement(S,{hash:e}),c.createElement(b,{hash:e})),c.createElement("div",{className:"flex flex-col w-full lg:w-1/2 gap-4 bg-interactive-interactive01 dark:bg-interactive-interactive01 rounded-[10px] p-[16px] h-[max-content] userInfo-Detail-Content"},c.createElement(L,{hash:e}),c.createElement(I,{hash:e}),c.createElement(P,{hash:e}),c.createElement(D,{hash:e}),c.createElement("div",{className:"border-b-border-line border-b border-solid"}),c.createElement(w,{hash:e}))),M=({hash:e})=>c.createElement("div",{className:"flex flex-col overflow-auto gap-6 max-h-[80vh]  lg:h-[unset] lg:overflow-hidden lg:flex-row"},c.createElement("div",{className:"flex flex-col w-full lg:w-1/2 gap-4"},c.createElement(E,{hash:e}),c.createElement(x,{hash:e}),c.createElement(C,{hash:e}),c.createElement(F,{hash:e}),c.createElement(N,{hash:e})),c.createElement("div",{className:"flex flex-col w-full lg:w-1/2 gap-4 bg-interactive-interactive01 dark:bg-interactive-interactive01 rounded-[10px] p-[16px] h-[max-content] userInfo-Detail-Content"},c.createElement(L,{hash:e}),c.createElement(I,{hash:e}),c.createElement(w,{hash:e}))),k=({hash:e})=>c.createElement("div",{className:"flex max-h-[80vh] overflow-auto lg:max-h-[unset lg:overflow-hidden"},c.createElement("div",{className:"flex flex-col w-full gap-4"},c.createElement(w,{hash:e}))),T=({hash:e,onClose:t})=>{const{useHistoryDetail:n}=(0,c.useContext)(f.C),{useHistoryDetailType:i}=n(),{type:a}=i(e);return a===g.CancelLimit?c.createElement("div",{className:"history-detail-content w-full sm:w-[368px] userInfo-Detail-History-CancelLimit-content"},c.createElement(y,{hash:e,onClose:t}),c.createElement(k,{hash:e})):c.createElement("div",{className:"history-detail-content w-full sm:w-[718px] userInfo-Detail-History-content"},c.createElement(y,{hash:e,onClose:t}),a===g.Close&&c.createElement(O,{hash:e}),a===g.Open&&c.createElement(M,{hash:e}))},H=()=>{const{ee:e}=(0,c.useContext)(f.C),[t,n]=(0,c.useState)(""),{isMobile:a}=(0,i.F)(),r=(0,c.useCallback)((()=>{n("")}),[]),l=(0,c.useCallback)((({hash:e})=>{n(e)}),[]),d=(0,c.useCallback)((e=>{e||r()}),[r]);return(0,c.useEffect)((()=>(e.on("MODAL_HISTORY_DETAIL_OPEN",l),e.on("MODAL_HISTORY_DETAIL_CLOSE",r),()=>{e.off("MODAL_HISTORY_DETAIL_OPEN",l),e.off("MODAL_HISTORY_DETAIL_CLOSE",r)})),[e,r,l]),a?c.createElement(s.dy,{open:Boolean(t),onOpenChange:d},c.createElement(s.rd,null,c.createElement(s.sc,{className:"w-full border-none p-4 pb-6 rounded-t-[4px] bg-interactive-interactiveBg z-tooltip userInfo-Detail-SheetContent",onPointerDownOutside:r},c.createElement(T,{hash:t,onClose:()=>{}})))):c.createElement(o.Vq,{open:Boolean(t)},c.createElement(o.PK,null,c.createElement(o.cZ,{className:"p-4 userInfo-Detail-DialogContent",onPointerDownOutside:r},c.createElement(T,{hash:t,onClose:r}))))}},19844:(e,t,n)=>{n.d(t,{m:()=>F});var i=n(11273),a=n(96336),r=n(57255),s=n(76126),o=n(47231),l=n(67284),c=n(13466),d=n(84542),u=n(84400),m=n(47909),p=n(82210),h=n(93757),f=n(86364),g=n(12149),y=n(61239),E=n(69464),x=n(59712);const C=({hash:e,checked:t,onClose:n,snapshotRef:r,onCheckedChange:s,copy:o,download:c})=>{const{locale:d,getI18n:g,useTheme:x,useHistoryDetail:C,staticHost:F,siteHost:v,enableShareLink:N,agentCode:_}=(0,u.useContext)(E.C),{useHistoryDetailSymbol:S,useHistoryDetailLeverage:b,useHistoryDetailPNLROI:L,useHistoryDetailPrice:P,useHistoryDetailDuration:I}=C(),{isLight:D}=x(),{PNLFormatted:w,ROI:O,tokenInSymbol:M}=L(e),{symbol:k,isLong:T}=S(e),H=b(e),{timestamp:B}=I(e),{closePrice:R,entryPrice:A}=P(e),{address:$}=(0,l.m)(),{isMobile:z}=(0,i.F)(),U=(0,y.eQ)({staticHost:F}),{brokerName:Z,icons:X}=(0,m.z)();return u.createElement("div",{className:"flex flex-col"},n&&(X.CloseD?u.createElement(X.CircledCloseF,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute top-6 right-6 z-[1] userInfo-Share-close-icon",onClick:n}):u.createElement(a.M,{width:"24px",height:"24px",fontSize:"24px",className:"text-t-third cursor-pointer absolute top-[8px] right-[8px] z-[1] userInfo-Share-close-icon",onClick:n})),"astherus"===Z?u.createElement(h.L,{data:{hash:e,locale:d||"en",agentCode:_,symbol:k,tokenInSymbol:M,closeTime:B,side:T?"LONG":"SHORT",leverage:H,markPrice:"-",entryPrice:A,closePrice:R,PNL:w,ROI:O,isLightTheme:D,staticResource:U,staticHost:F,SITE_HOST:v,userAddress:$,getI18n:g,sharePNL:t,snapshotRef:r}}):u.createElement(p.L,{data:{hash:e,locale:d||"en",symbol:k,tokenInSymbol:M,closeTime:B,side:T?"LONG":"SHORT",leverage:H,markPrice:"-",entryPrice:A,closePrice:R,PNL:w,ROI:O,isLightTheme:D,staticResource:U,staticHost:F,SITE_HOST:v,userAddress:$,getI18n:g,sharePNL:t,snapshotRef:r}}),!z&&u.createElement(u.Fragment,null,u.createElement(f.k,{className:"pt-[12px] pb-[24px]",getI18n:g,checked:t,onCheckedChange:s}),u.createElement(f.n,{getI18n:g,copy:N?o:void 0,download:c})))},F=()=>{const e=(0,c.x)(),t=(0,d.pT)(e),{ee:n,getI18n:a,locale:l}=(0,u.useContext)(E.C),[m,p]=(0,u.useState)(""),[h,f]=(0,u.useState)(!1),[F,v]=(0,u.useState)(!1),{isMobile:N}=(0,i.F)(),_=(0,u.useRef)(),S=(0,u.useMemo)((()=>(0,y.O1)({network:t?.apiNetwork,locale:l,hash:m,sharePNL:F})),[l,t?.apiNetwork,m,F]),b=(0,u.useCallback)((async()=>{try{await(0,s.v)(S),N||r.A.success(a("share-copy-message","Copy Successfully"))}catch(e){x.error(e)}}),[a,N,S]),L=(0,u.useCallback)((async()=>{_.current&&(0,o.Q)({el:_.current,success(e){(0,o.L)(e,`share-position-${Date.now()}`)}})}),[]),P=(0,u.useCallback)((e=>{"boolean"==typeof e&&v(e)}),[]),I=(0,u.useCallback)((()=>{p("")}),[]);return(0,u.useEffect)((()=>n.on("MODAL_POSITION_SHARE_OPEN",(({hash:e,overlay:t})=>{p(e),f(t)}))),[n]),(0,u.useEffect)((()=>n.on("MODAL_POSITION_SHARE_CLOSE",(()=>{p(""),f(!1)}))),[n]),(0,u.useMemo)((()=>m?N?u.createElement(g.V,{hash:m,onClose:I,getI18n:a,checked:F,onCheckedChange:P,copy:b,download:L},u.createElement(C,{hash:m,checked:F,snapshotRef:_})):u.createElement(g.t,{onClose:I,overlay:h},u.createElement(C,{hash:m,checked:F,onClose:I,onCheckedChange:P,copy:b,download:L,snapshotRef:_})):null),[b,L,a,m,N,P,I,h,F])}},69464:(e,t,n)=>{n.d(t,{C:()=>i});const i=n(84400).createContext({})},20355:(e,t,n)=>{n.d(t,{T:()=>i});const i=n(84400).createContext({})},25375:(e,t,n)=>{n.d(t,{ee:()=>i});const i=new(n(13565).v)},72262:(e,t,n)=>{n.d(t,{$:()=>s});var i=n(69982),a=n(28643),r=n(84400);const s=({title:e,isLight:t})=>(0,r.useMemo)((()=>r.createElement("div",{className:"flex flex-col items-center justify-center h-full userInfo-DataEmpty-container"},t?r.createElement(i.E,{width:"60px",height:"60px",fontSize:"60px",className:"userInfo-DataEmpty-icon"}):r.createElement(a.e,{width:"60px",height:"60px",fontSize:"60px",className:"userInfo-DataEmpty-icon"}),r.createElement("div",{className:"text-body2 text-t-third userInfo-DataEmpty-title"},e))),[e,t])},13565:(e,t,n)=>{n.d(t,{v:()=>i});class i{constructor(){this.cbs={},this.on=(e,t)=>(this.cbs[e]||(this.cbs[e]=[]),this.cbs[e].push(t),()=>this.off(e,t)),this.off=(e,t)=>{this.cbs[e]||(this.cbs[e]=[]),this.cbs[e]=this.cbs[e].filter((e=>e!==t))},this.emit=(e,t)=>{this.cbs[e]||(this.cbs[e]=[]),this.cbs[e].forEach((e=>"function"==typeof e&&e(t)))}}}},30610:(e,t,n)=>{n.d(t,{Qz:()=>o,dy:()=>s,rd:()=>l,sc:()=>d});var i=n(84400),a=n(60686),r=n(27618);const s=({shouldScaleBackground:e=!0,...t})=>i.createElement(a.d.Root,{shouldScaleBackground:e,...t});s.displayName="Drawer";const o=a.d.Trigger,l=a.d.Portal,c=(a.d.Close,i.forwardRef((({className:e,...t},n)=>i.createElement(a.d.Overlay,{ref:n,className:(0,r.cn)("fixed inset-0 z-dialogOverlay bg-overlay",e),...t}))));c.displayName=a.d.Overlay.displayName;const d=i.forwardRef((({className:e,children:t,overlayClassName:n,handleClassName:s,...o},d)=>i.createElement(l,null,i.createElement(c,{className:n}),i.createElement(a.d.Content,{ref:d,className:(0,r.cn)("drawer fixed inset-x-0 bottom-0 z-dialog mt-24 flex h-auto flex-col rounded-t-[10px] border bg-interactive-interactiveBg pt-3",e),...o},i.createElement("div",{className:(0,r.cn)("drawer-bar mx-auto h-1 w-16 rounded-full bg-border-lineSubtle mb-4 cursor-grab active:cursor-grabbing",s)}),t))));d.displayName="DrawerContent",i.forwardRef((({className:e,...t},n)=>i.createElement(a.d.Title,{ref:n,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}))).displayName=a.d.Title.displayName,i.forwardRef((({className:e,...t},n)=>i.createElement(a.d.Description,{ref:n,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}))).displayName=a.d.Description.displayName},54402:(e,t,n)=>{n.d(t,{g:()=>o});var i=n(84400),a=n(66627),r=n(27618),s=n(62910);const o=({show:e=!0,fullScreen:t=!1,inner:n,color:a="rgb(var(--colors-interactive-primary))",children:o,className:l})=>{if(!e)return i.createElement(i.Fragment,null,o||null);const c=i.createElement(s.$,{className:(0,r.cn)("absolute -translate-x-2/4 -translate-y-2/4 text-center left-2/4 top-2/4",l),color:a});return t?i.createElement(i.Fragment,null,o,i.createElement("div",{className:(0,r.cn)("top-0 left-0 w-full h-full z-[2000] bg-spinner-radial",l),style:{position:n?"absolute":"fixed"}},c)):i.createElement(i.Fragment,null,o,c)};let l;o.show=({fullScreen:e=!1}={})=>{l||(l=document.createElement("div"),document.body.appendChild(l)),a.render(i.createElement(o,{fullScreen:e}),l)},o.hide=()=>{l&&a.render(i.createElement(o,{show:!1}),l)}},62910:(e,t,n)=>{n.d(t,{$:()=>s});var i=n(84400),a=n(27618);const r=({delay:e,color:t})=>i.createElement("div",{className:"h-full w-[3px] animate-spinner",style:{animationDelay:e,backgroundColor:t}}),s=(0,i.forwardRef)((({color:e="rgb(var(--colors-interactive-primary))",className:t,...n},s)=>{const o=[.5,.2,.2,.5].map((e=>`-${e}s`));return i.createElement("div",{className:(0,a.cn)("spinner flex w-[30px] h-[30px] items-center justify-between",t),ref:s,...n},o.map(((t,n)=>i.createElement(r,{key:n,delay:t,color:e}))))}));s.displayName="Spinner"},28643:(e,t,n)=>{n.d(t,{e:()=>a});var i=n(84400);const a=e=>i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 96 96",fill:"none",...e},i.createElement("g",{filter:"url(#not-found-data-dark_svg__filter0_i)"},i.createElement("path",{d:"M12 20a8 8 0 018-8h31.858a10 10 0 017.07 2.929l9.143 9.142A10 10 0 0171 31.142V76a8 8 0 01-8 8H20a8 8 0 01-8-8V20z",fill:"url(#not-found-data-dark_svg__paint0_linear)"})),i.createElement("path",{d:"M20 45.5a2.5 2.5 0 012.5-2.5h14a2.5 2.5 0 010 5h-14a2.5 2.5 0 01-2.5-2.5z",fill:"url(#not-found-data-dark_svg__paint1_linear)"}),i.createElement("path",{d:"M20 57.5a2.5 2.5 0 012.5-2.5h9a2.5 2.5 0 010 5h-9a2.5 2.5 0 01-2.5-2.5z",fill:"url(#not-found-data-dark_svg__paint2_linear)"}),i.createElement("path",{d:"M22.5 67a2.5 2.5 0 000 5h14a2.5 2.5 0 000-5h-14z",fill:"url(#not-found-data-dark_svg__paint3_linear)"}),i.createElement("g",{filter:"url(#not-found-data-dark_svg__filter1_i)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46 62.765C46 53.505 53.506 46 62.765 46s16.764 7.506 16.764 16.765c0 3.632-1.155 6.994-3.118 9.74l6.78 6.78a2.762 2.762 0 11-3.906 3.906l-6.78-6.78a16.689 16.689 0 01-9.74 3.118C53.505 79.53 46 72.024 46 62.765zm27.941 0c0 6.172-5.004 11.176-11.176 11.176-6.173 0-11.177-5.004-11.177-11.176 0-6.173 5.004-11.177 11.177-11.177 6.172 0 11.176 5.004 11.176 11.177z",fill:"url(#not-found-data-dark_svg__paint4_linear)"})),i.createElement("defs",null,i.createElement("linearGradient",{id:"not-found-data-dark_svg__paint0_linear",x1:15.218,y1:14,x2:66.628,y2:86.481,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#383D55"}),i.createElement("stop",{offset:1,stopColor:"#27283E"})),i.createElement("linearGradient",{id:"not-found-data-dark_svg__paint1_linear",x1:14,y1:31,x2:28.992,y2:75.476,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#8B90AC"}),i.createElement("stop",{offset:1,stopColor:"#444663"})),i.createElement("linearGradient",{id:"not-found-data-dark_svg__paint2_linear",x1:14,y1:31,x2:28.992,y2:75.476,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#8B90AC"}),i.createElement("stop",{offset:1,stopColor:"#444663"})),i.createElement("linearGradient",{id:"not-found-data-dark_svg__paint3_linear",x1:14,y1:31,x2:28.992,y2:75.476,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#8B90AC"}),i.createElement("stop",{offset:1,stopColor:"#444663"})),i.createElement("linearGradient",{id:"not-found-data-dark_svg__paint4_linear",x1:38.528,y1:47,x2:53.749,y2:93.995,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#72768F"}),i.createElement("stop",{offset:1,stopColor:"#5A5C74"})),i.createElement("filter",{id:"not-found-data-dark_svg__filter0_i",x:12,y:12,width:60,height:73,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",{dx:1,dy:1}),i.createElement("feGaussianBlur",{stdDeviation:1}),i.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),i.createElement("filter",{id:"not-found-data-dark_svg__filter1_i",x:46,y:46,width:39,height:39,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",{dx:1,dy:1}),i.createElement("feGaussianBlur",{stdDeviation:1}),i.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"}))))},69982:(e,t,n)=>{n.d(t,{E:()=>a});var i=n(84400);const a=e=>i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 96 96",fill:"none",...e},i.createElement("g",{filter:"url(#NotFoundDataLight_svg__filter0_i_1775_28546)"},i.createElement("path",{d:"M12 20a8 8 0 018-8h31.858a10 10 0 017.07 2.929l9.143 9.142A10 10 0 0171 31.142V76a8 8 0 01-8 8H20a8 8 0 01-8-8V20z",fill:"url(#NotFoundDataLight_svg__paint0_linear_1775_28546)"})),i.createElement("g",{filter:"url(#NotFoundDataLight_svg__filter1_i_1775_28546)"},i.createElement("path",{d:"M20 45.5a2.5 2.5 0 012.5-2.5h14a2.5 2.5 0 010 5h-14a2.5 2.5 0 01-2.5-2.5z",fill:"url(#NotFoundDataLight_svg__paint1_linear_1775_28546)"}),i.createElement("path",{d:"M20 57.5a2.5 2.5 0 012.5-2.5h9a2.5 2.5 0 010 5h-9a2.5 2.5 0 01-2.5-2.5z",fill:"url(#NotFoundDataLight_svg__paint2_linear_1775_28546)"}),i.createElement("path",{d:"M22.5 67a2.5 2.5 0 000 5h14a2.5 2.5 0 000-5h-14z",fill:"url(#NotFoundDataLight_svg__paint3_linear_1775_28546)"})),i.createElement("g",{filter:"url(#NotFoundDataLight_svg__filter2_i_1775_28546)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46 62.765C46 53.505 53.506 46 62.765 46s16.764 7.506 16.764 16.765c0 3.632-1.155 6.994-3.118 9.74l6.78 6.78a2.762 2.762 0 11-3.906 3.906l-6.78-6.78a16.689 16.689 0 01-9.74 3.118C53.505 79.53 46 72.024 46 62.765zm27.941 0c0 6.172-5.004 11.176-11.176 11.176-6.173 0-11.177-5.004-11.177-11.176 0-6.173 5.004-11.177 11.177-11.177 6.172 0 11.176 5.004 11.176 11.177z",fill:"url(#NotFoundDataLight_svg__paint4_linear_1775_28546)"})),i.createElement("defs",null,i.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint0_linear_1775_28546",x1:-8,y1:-64.5,x2:25.922,y2:125.196,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#F0F0F5"}),i.createElement("stop",{offset:1,stopColor:"#72768F"})),i.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint1_linear_1775_28546",x1:19.905,y1:43,x2:41.534,y2:113.219,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#F0F0F5"}),i.createElement("stop",{offset:1,stopColor:"#72768F"})),i.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint2_linear_1775_28546",x1:19.905,y1:43,x2:41.534,y2:113.219,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#F0F0F5"}),i.createElement("stop",{offset:1,stopColor:"#72768F"})),i.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint3_linear_1775_28546",x1:19.905,y1:43,x2:41.534,y2:113.219,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#F0F0F5"}),i.createElement("stop",{offset:1,stopColor:"#72768F"})),i.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint4_linear_1775_28546",x1:45.81,y1:46,x2:48.756,y2:133.547,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#F0F0F5"}),i.createElement("stop",{offset:1,stopColor:"#72768F"})),i.createElement("filter",{id:"NotFoundDataLight_svg__filter0_i_1775_28546",x:12,y:12,width:60,height:73,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",{dx:1,dy:1}),i.createElement("feGaussianBlur",{stdDeviation:1}),i.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.4 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_1775_28546"})),i.createElement("filter",{id:"NotFoundDataLight_svg__filter1_i_1775_28546",x:20,y:43,width:20,height:30,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",{dx:1,dy:1}),i.createElement("feGaussianBlur",{stdDeviation:1}),i.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.4 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_1775_28546"})),i.createElement("filter",{id:"NotFoundDataLight_svg__filter2_i_1775_28546",x:46,y:46,width:39,height:38.999,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",{dx:1,dy:1}),i.createElement("feGaussianBlur",{stdDeviation:1}),i.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.4 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_1775_28546"}))))},10978:(e,t,n)=>{n.d(t,{ZK:()=>m,b2:()=>f,d3:()=>g,ch:()=>E,Xi:()=>_,RM:()=>b,yT:()=>N,uq:()=>L,v_:()=>P,iA:()=>D,a6:()=>w,r2:()=>O,mM:()=>k,D:()=>B,k6:()=>l.k6,XS:()=>l.XS,uN:()=>se,zV:()=>l.zV,g8:()=>l.g8,xK:()=>Ee,oU:()=>ye,ZC:()=>l.ZC,Fc:()=>l.Fc,kD:()=>l.kD,PC:()=>l.PC,Gn:()=>l.Gn});var i=n(84400),a=n(87685),r=n(87514),s=n(17921),o=n(68692),l=n(15408),c=n(42249);const d=e=>{const t=(0,o.h)(),n=(0,l.XS)(e,"tokenIn"),d=(0,a.QG)(n),u=(0,l.XS)(e,"margin"),{displaySymbol:m}=(e=>{const t=(0,o.h)(),n=(0,l.XS)(e,"tokenSymbol"),r=(0,l.XS)(e,"tokenIn"),s=(0,a.At)(r),d=(0,c.h)(),u=t?n:s,m=d[u]||u;return(0,i.useMemo)((()=>({displaySymbol:m,originalSymbol:u})),[m,u])})(e),p=(0,a.RK)(m),h=!!m;return(0,i.useMemo)((()=>({initialed:h,symbol:m,margin:t?u:new s.Z((0,r.m)(u,d)),qtyPrecision:p})),[h,m,t,u,d,p])},u=e=>{const{symbol:t}=d(e),n=(0,a.Ms)(t);return(0,i.useMemo)((()=>n),[n])},m=()=>(0,i.useMemo)((()=>({useClassicDataByFiled:l.XS})),[]);var p=n(87250);const h=e=>{const t=(0,o.h)(),n=(0,l.XS)(e,"tokenIn"),s=(0,a.QG)(n),c=(0,l.XS)(e,"openFee"),d=(0,l.XS)(e,"closeFee"),u=(0,l.XS)(e,"fundingFee"),m=(0,l.XS)(e,"executionFee"),p=(0,l.XS)(e,"holdingFee");return(0,i.useMemo)((()=>t?{openFee:c,closeFee:d,fundingFee:u,executionFee:m,holdingFee:p}:{openFee:(0,r.m)(c,s),closeFee:(0,r.m)(d,s),fundingFee:(0,r.m)(u,s),executionFee:(0,r.m)(m,s),holdingFee:(0,r.m)(p,s)}),[d,s,m,u,p,c,t])},f=e=>{const t=(0,l.XS)(e,"actionType"),n=(0,c.h)(),{openFee:a,closeFee:r,executionFee:o}=h(e),{initialed:u,symbol:m,qtyPrecision:f}=d(e);return(0,i.useMemo)((()=>{let e=new s.Z("-");return"OPEN"===t&&(e=new s.Z(a).plus(o)),"CLOSE"!==t&&"TP"!==t&&"SL"!==t&&"LIQUIDATED"!==t||(e=new s.Z(r)),"CANCEL_LIMIT"!==t&&"SYSTEM_CANCEL"!==t||(e=new s.Z("-")),u&&e.isFinite()?`${(0,p.uf)(e,f)} ${n[m]||m}`:"-"}),[t,r,o,u,a,m,f,n])},g=e=>{const t=(0,c.h)(),{margin:n,symbol:a,qtyPrecision:r}=d(e);return(0,i.useMemo)((()=>`${(0,p.FL)(n,r)} ${t[a]||a}`),[n,r,a,t])},y=e=>{const t=d(e),{symbol:n,index:a}=u(e);return(0,i.useMemo)((()=>({...t,initialed:t.initialed&&void 0!==n,margin:new s.Z(t.margin).multipliedBy(a)})),[a,t,n])},E=e=>{const t=(e=>{const t=(0,l.XS)(e,"qty"),n=(0,l.XS)(e,"entryPrice"),{margin:a,initialed:r}=y(e);return(0,i.useMemo)((()=>r?new s.Z(t).multipliedBy(n).dividedBy(a):new s.Z(1/0)),[n,r,a,t])})(e);return(0,i.useMemo)((()=>t.isFinite()?`${t.toFixed(1)}x`:"-"),[t])};var x=n(89479),C=n.n(x),F=n(96988);const v=e=>{const t=(0,l.XS)(e,"actionType"),n=(0,l.XS)(e,"entryPrice"),a=(0,l.XS)(e,"closePrice");return(0,i.useMemo)((()=>"CANCEL_LIMIT"===t||"SYSTEM_CANCEL"===t?"-":"OPEN"===t?n:"LIQUIDATED"===t||"TP"===t||"SL"===t||"CLOSE"===t?a:"-"),[t,a,n])},N=e=>{const t=(0,l.XS)(e,"pair"),n=v(e),r=(0,a.fV)(t);return(0,i.useMemo)((()=>{const e=new s.Z(n);return e.isFinite()?(0,p.uf)(e,r):"-"}),[n,r])},_=e=>{const t=(0,l.XS)(e,"actionType"),n=(0,l.XS)(e,"side"),a=(0,l.XS)(e,"qty"),r=(0,l.XS)(e,"pair"),o=(0,l.XS)(e,"timestamp"),{getI18n:c}=(0,F.V6)(),u=v(e),m=N(e),{symbol:h,qtyPrecision:f}=d(e),g=(0,i.useMemo)((()=>{const e=new s.Z(a).multipliedBy(u);return e.isFinite()?(0,p.uf)(e,f):"-"}),[u,a,f]),y=(0,i.useMemo)((()=>"CANCEL_LIMIT"===t||"SYSTEM_CANCEL"===t),[t]),E=(0,i.useMemo)((()=>{const e=(0,p.Bv)(Number(o));return(0,p.Bv)().diff(e,"hour")>24?e.format("YYYY-MM-DD"):e.format("HH:mm:ss")}),[o]);return(0,i.useMemo)((()=>({side:c(`userinfo-history-side-${n.toUpperCase()}`,C()(n))||C()(n),symbol:r,price:m,size:g,isCancelOrSystemCancel:y,timeFormat:E,marginToken:h})),[m,c,y,r,n,g,E,h])},S=e=>{const t=(0,o.h)(),n=(0,l.XS)(e,"pnl"),s=(0,l.XS)(e,"tokenIn"),c=(0,a.QG)(s);return(0,i.useMemo)((()=>t?n:(0,r.m)(n,c)),[t,n,c])},b=e=>{const t=(0,c.h)(),n=S(e),a=(0,l.XS)(e,"actionType"),{fundingFee:r,holdingFee:o}=h(e),{initialed:u,margin:m,symbol:f,qtyPrecision:g}=d(e);return(0,i.useMemo)((()=>{const e=t[f]||f;if("CLOSE"===a||"LIQUIDATED"===a||"TP"===a||"SL"===a){const t=new s.Z(n).plus(r).minus(o),i=new s.Z(t).dividedBy(m),a=(0,p.uf)(t,g),l=`${(0,p.uf)(i.multipliedBy(100),2)}%`;return{PNL:u&&t.isFinite()?t.isNegative()?`${a} ${e}`:`+${a} ${e}`:"-",PNLNFormat:u&&t.isFinite()?t.isNegative()?(0,p.pF)(t.toNumber(),g):`+${(0,p.pF)(t.toNumber(),g)}`:"-",ROI:u&&i.isFinite()?i.isNegative()?l:`+${l}`:"-",isPNLNegative:t.isNegative(),isROINegative:i.isNegative(),tokenInSymbol:e}}return{PNL:"-",ROI:"-",isPNLNegative:void 0,isROINegative:void 0,PNLNFormat:"-",tokenInSymbol:e}}),[a,r,o,u,m,n,g,f,t])},L=e=>{const{getI18n:t}=(0,F.V6)(),n=(0,l.XS)(e,"side");return(0,i.useMemo)((()=>t(`userinfo-history-side-${n.toUpperCase()}`,C()(n))||C()(n)),[t,n])},P=e=>{const t=(0,l.XS)(e,"qty"),n=(0,l.XS)(e,"entryPrice"),a=(0,l.XS)(e,"closePrice"),r=(0,l.XS)(e,"actionType");return(0,i.useMemo)((()=>{let e=new s.Z("-");return"OPEN"===r&&(e=new s.Z(n).multipliedBy(t)),"CLOSE"!==r&&"SL"!==r&&"TP"!==r&&"LIQUIDATED"!==r||(e=new s.Z(a).multipliedBy(t)),e.isFinite()?(0,p.uf)(e.toFixed(1),1):"-"}),[r,a,n,t])};var I=n(85177);const D=e=>{const t=(0,l.XS)(e,"pair"),n=(0,l.XS)(e,"isLong"),{productMap:a}=(0,I.GS)();return(0,i.useMemo)((()=>({symbol:t,isLong:n,symbolType:a[t]?.symbolType,symbolName:a[t]?.symbolName})),[t,n,a])},w=e=>{const t=(0,l.XS)(e,"timestamp");return(0,i.useMemo)((()=>(0,p.Bv)(Number(t)).isValid()?(0,p.Bv)(Number(t)).format("MM-DD HH:mm:ss"):"-"),[t])},O=e=>{const t=(0,l.XS)(e,"actionType"),{getI18n:n}=(0,F.V6)();return(0,i.useMemo)((()=>t?n(`userinfo-history-type-${t.toUpperCase()}`,{defaultValue:t.toUpperCase()}):"-"),[n,t])};var M=n(86562);const k=e=>{const t=(0,l.ZC)(e,"symbol"),{close:n}=(0,M.L)(t);return(0,i.useMemo)((()=>n||0),[n])};var T=n(17845),H=n(14369);const B=()=>{const{data:e}=(0,H.R)();return{fetchPredictions:useCallback((()=>{T.ee.emit("FETCH_DUMB_HISTORY_LIST",void 0)}),[]),useHistoryTab:l.g8,usePredictionDataByFiled:l.ZC,usePredictionHasMore:l.Fc,usePredictionInitialed:l.kD,usePredictionLoading:l.PC,usePredictions:l.Gn,usePricePrecision:a.fV,useAssetPrecision:a.RK,useCurrentPrice:k,predictionPairs:e}};var R=n(95386),A=n(49229),$=n(44040);const z=e=>{const t=(0,l.XS)(e,"qty"),n=(0,l.XS)(e,"pair"),r=(0,$.z)(n),o=(0,l.XS)(e,"entryPrice"),c=(0,i.useMemo)((()=>new s.Z(t).multipliedBy(o)),[o,t]),d=(0,a.tz)(r,c);return(0,i.useMemo)((()=>(0,A.mb)(d?.liqLostP,R.cB.percent)),[d])},U=e=>{const t=(0,l.XS)(e,"timestamp"),{getI18n:n}=(0,F.V6)();return(0,i.useMemo)((()=>(0,p.jE)(Number(t),n)),[t,n])},Z=e=>{const{openFee:t,executionFee:n,fundingFee:a,closeFee:r,holdingFee:o}=h(e),{symbol:l,index:c}=u(e);return(0,i.useMemo)((()=>({initialed:void 0!==l,openFee:new s.Z(t).multipliedBy(c),closeFee:new s.Z(r).multipliedBy(c),fundingFee:new s.Z(a).multipliedBy(c),executionFee:new s.Z(n).multipliedBy(c),holdingFee:new s.Z(o).multipliedBy(c)})),[l,t,c,r,a,n,o])},X=e=>{const t=(0,c.h)(),{fundingFee:n,holdingFee:a}=h(e),{fundingFee:r,holdingFee:o}=Z(e),{symbol:l,qtyPrecision:u}=d(e);return(0,i.useMemo)((()=>{const e=new s.Z(n).minus(a);return{fundingFee:`${e.isNegative()?"":"+"}${(0,p.FL)(e,u)} ${t[l]||l} ( ≈ ${(0,p.uf)(new s.Z(r).minus(o),2)} USD )`,isFundingFeeNegative:e.isNegative()}}),[n,a,u,l,r,o,t])},q=e=>{const t=(0,c.h)(),{margin:n,symbol:a,qtyPrecision:r}=d(e),{margin:s}=y(e);return(0,i.useMemo)((()=>`${(0,p.FL)(n,r)} ${t[a]||a} ( ≈ ${(0,p.uf)(s,1)} USD )`),[n,r,a,s,t])};var G=n(2203);const V=["CLOSE","TP","SL","LIQUIDATED"],Y=["CANCEL_LIMIT","SYSTEM_CANCEL"],Q=["OPEN"],K=e=>{const{getI18n:t}=(0,F.V6)(),n=(0,l.XS)(e,"actionType"),a=t(`userinfo-history-type-${n?.toUpperCase()}`,{defaultValue:n?.toUpperCase()}),r=(0,i.useMemo)((()=>[{types:V,type:G.K.Close},{types:Q,type:G.K.Open},{types:Y,type:G.K.CancelLimit}]),[]);return(0,i.useMemo)((()=>({...r.find((e=>e.types.includes(n?.toUpperCase())))||{type:void 0},i18n:a})),[n,a,r])},j=e=>{const t=(0,c.h)(),n=S(e),{margin:a,symbol:r,qtyPrecision:o}=d(e),m=(0,l.XS)(e,"actionType"),{fundingFee:f}=h(e),{index:g}=u(e);return(0,i.useMemo)((()=>{const e=t[r]||r;if(V.includes(m)){const t=new s.Z(n).plus(f),i=new s.Z(t).dividedBy(a),r=(0,p.FL)(t,o),l=`${(0,p.uf)(i.multipliedBy(100),2)}%`,c=t.isNegative(),d=t.isPositive(),u=i.isNegative();return{PNL:t.isFinite()?`${c?"":"+"}${r} ${e} ( ≈ ${(0,p.uf)(t.multipliedBy(g),1)} USD\n        )`:"-",PNLOrigin:t,PNLFormatted:r,ROI:i.isFinite()?`${u?"":"+"}${l}`:"-",isPNLNegative:c,isROINegative:u,isPNLPositive:d,tokenInSymbol:e}}return{PNL:"-",PNLOrigin:new s.Z(0),PNLFormatted:"-",ROI:"-",isPNLNegative:!1,isROINegative:!1,isPNLPositive:!1,tokenInSymbol:e}}),[m,f,g,a,n,o,r,t])},J=e=>{const{PNLOrigin:t}=j(e),{openFee:n,executionFee:i,closeFee:a}=h(e);return t.minus(n).minus(i).minus(a)},W=e=>{const t=(0,c.h)(),{symbol:n,qtyPrecision:a}=d(e),r=J(e),s=(e=>{const t=J(e),{index:n}=u(e);return t.multipliedBy(n)})(e);return(0,i.useMemo)((()=>({netProfit:r.isNaN()?"-":`${r.isNegative()?"":"+"}${(0,p.FL)(r.toNumber(),a)} ${t[n]||n} ( ≈ ${(0,p.uf)(s,1)} USD )`,isNetProfitNegative:r.isNegative()})),[r,a,n,s,t])},ee=e=>{const t=(0,c.h)(),{openFee:n,closeFee:r,executionFee:o}=h(e),{openFee:u,closeFee:m,executionFee:f}=Z(e),g=(0,l.XS)(e,"pair"),y=(0,$.z)(g),{data:E}=(0,a.Bu)(y),{symbol:x,qtyPrecision:C}=d(e);return(0,i.useMemo)((()=>({isDynamicClosingFee:Boolean(E.feeConfig&&E.feeConfig?.shareP>0&&E.feeConfig?.minCloseFeeP>0),openFee:`${(0,p.FL)(new s.Z(n),C)} ${t[x]||x} ( ≈ ${(0,p.uf)(u,2)} USD )`,executionFee:`${(0,p.FL)(new s.Z(o),C)} ${t[x]||x} ( ≈ ${(0,p.uf)(f,2)} USD )`,closeFee:`${(0,p.FL)(r,C)} ${t[x]||x} ( ≈ ${(0,p.uf)(m,2)} USD )`})),[E.feeConfig,n,C,x,u,o,f,r,m,t])},te=e=>{const t=(0,l.XS)(e,"pair"),n=(0,I.Lh)(t,"baseAsset");return(0,i.useMemo)((()=>({pair:t,baseAsset:n})),[t,n])},ne=e=>{const t=(0,l.XS)(e,"pair"),n=(0,l.XS)(e,"entryPrice"),r=(0,l.XS)(e,"closePrice"),o=(0,a.fV)(t);return(0,i.useMemo)((()=>({entryPrice:new s.Z(n).isFinite()?(0,p.uf)(n,o):"-",closePrice:new s.Z(r).isFinite()?(0,p.uf)(r,o):"-"})),[n,o,r])},ie=e=>(0,l.XS)(e,"amountIn"),ae=e=>{const t=(0,c.h)(),n=ie(e),a=(e=>{const t=ie(e),{symbol:n}=d(e),{index:i}=u(n);return new s.Z(t).multipliedBy(i)})(e),{symbol:r,qtyPrecision:o}=d(e);return(0,i.useMemo)((()=>`${(0,p.FL)(n,o)} ${t[r]||r} ( ≈ ${(0,p.uf)(a,1)} USD )`),[n,o,r,a,t])},re=e=>{const t=P(e),n=(0,l.XS)(e,"qty"),a=(0,l.XS)(e,"pair"),r=(0,I.Lh)(a,"quantityPrecision");return(0,i.useMemo)((()=>({size:t,qty:(0,p.uf)(n,r)})),[n,r,t])},se=()=>(0,i.useMemo)((()=>({useHistoryDetailType:K,useHistoryDetailPair:te,useHistoryDetailLeverage:E,useHistoryDetailInitialMargin:q,useHistoryDetailPrincipal:ae,useHistoryDetailSymbol:D,useHistoryDetailQtyAndSize:re,useHistoryDetailFundingFee:X,useHistoryDetailOpenCloseFee:ee,useHistoryDetailPrice:ne,useHistoryDetailLiqLostRate:z,useHistoryDetailPNLROI:j,useHistoryDetailNetProfit:W,useHistoryDetailDuration:U})),[]);var oe=n(19260),le=n(67284),ce=n(13466),de=n(81622),ue=n(41814),me=n(84542),pe=n(3421),he=n(43785);const fe={LIMIT:{label:"LIMIT",index:0},CANCEL_LIMIT:{label:"CANCEL_LIMIT",index:1},SYSTEM_CANCEL:{label:"SYSTEM_CANCEL",index:2},OPEN:{label:"OPEN",index:3},CLOSE:{label:"CLOSE",index:4},TP:{label:"TP",index:5},SL:{label:"SL",index:6},LIQ:{label:"LIQUIDATED",index:7}},ge=10,ye=()=>{const{data:e,hasNextPage:t,fetchNextPage:n,isFetchingNextPage:r}=(0,a.bC)({page:1,limit:ge}),{address:s,isConnected:o}=(0,le.m)(),c=(0,l.z)((e=>e.refreshPrediction)),d=(0,l.z)((e=>e.setPredictionLoading)),u=(0,l.z)((e=>e.setPredictionHasMore)),m=(0,l.z)((e=>e.resetPrediction));return(0,i.useEffect)((()=>{e&&c(e?.pages.map((e=>e.data)).flat())}),[e,c]),(0,i.useEffect)((()=>(o&&s?T.ee.on("FETCH_DUMB_HISTORY_LIST",n):T.ee.off("FETCH_DUMB_HISTORY_LIST",n),()=>{T.ee.off("FETCH_DUMB_HISTORY_LIST",n)})),[s,o,n]),(0,i.useEffect)((()=>{d(r??!1)}),[r,d]),(0,i.useEffect)((()=>{u(t??!1)}),[t,u]),(0,i.useEffect)((()=>()=>{m()}),[m]),(0,i.useMemo)((()=>({hasMore:t,loadMoreLoading:r})),[t,r])},Ee=()=>{const e=(0,a.E4)(),t=(0,o.h)(),n=(0,ce.x)(),{address:s,isConnected:c}=(0,le.m)(),d=(0,l.z)((e=>e.appendHistory)),u=(0,l.z)((e=>e.resetHistory)),[m,p]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1),g=(0,i.useRef)(0),y=(0,i.useRef)(0),E=(0,de.Z)(),x=(0,oe.D)((async()=>{if(!c||!s)return;if(h)return;let i,a;if(f(!0),t){const{orderAndTradeHistories:e}=await(async({chainId:e,address:t,page:n=1,limit:i=10})=>{const a=(0,me.pT)(e);try{if(!t&&!a)return{order:null};const e=(0,pe.BH)(a?.apiNetwork||"bnb"),r={query:"\n  query OrderAndTradeHistorys($skip: Int, $first: Int, $user: String) {\n    orderAndTradeHistories(\n        skip: $skip\n        first: $first\n        orderBy: timestamp\n        orderDirection: desc\n        where: { \n            user: $user\n            actionType_not: ADD_MARGIN\n        }\n    ) {\n        id\n        orderOrTradeHash\n        actionType\n        timestamp\n        txHash\n        limitOrder {\n            pair {\n                name\n            }\n            isLong\n            token {\n                symbol\n            }\n            amountIn\n            limitPrice\n            qty\n            takeProfit\n            stopLoss\n        }\n        trade {\n            pair {\n                name\n            }\n            isLong\n            token {\n                symbol\n            }\n            margin\n            entryPrice\n            qty\n            openFee\n            executionFee\n            closeType\n            closePrice\n            closeFee\n            fundingFee\n            holdingFee\n            pnl\n            actualPnl\n        }\n    }\n}\n",variables:{user:t,skip:n,first:i}},s={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(r),next:{revalidate:60}};return(0,he.wu)("graphql_request",{api:e,feature:"UserInfo/History",source:"apx"}),(await(await fetch(e,s)).json()).data}catch(e){return{order:null}}})({chainId:n,address:s,page:g.current*ge,limit:ge});i=e||[],a=i.filter((e=>"LIMIT"!==e.actionType)).map((e=>{const t=fe[e.actionType]||{},n={hash:`${e.orderOrTradeHash}-${e.timestamp}-${t.index}`,timestamp:`${e.timestamp}000`,actionType:t.label,side:"LONG",pair:"",tokenSymbol:"",isLong:!1,qty:"",entryPrice:"",margin:"",closePrice:"",openFee:"",fundingFee:"",closeFee:"",executionFee:"",holdingFee:"",pnl:""};let i={};return i="CANCEL_LIMIT"===e.actionType||"SYSTEM_CANCEL"===e.actionType?{pair:e.limitOrder.pair.name.replace("/",""),isLong:e.limitOrder.isLong,side:e.limitOrder.isLong?"LONG":"SHORT",tokenSymbol:e.limitOrder.token.symbol}:{pair:e.trade?.pair.name.replace("/",""),isLong:e.trade?.isLong,side:e.trade?.isLong?"LONG":"SHORT",qty:e.trade?.qty,entryPrice:e.trade?.entryPrice,closePrice:e.trade?.closePrice,margin:e.trade?.margin,openFee:e.trade?.openFee,executionFee:e.trade?.executionFee,fundingFee:e.trade?.fundingFee,closeFee:e.trade?.closeFee,holdingFee:e.trade?.holdingFee,pnl:e.trade?.pnl,tokenSymbol:e.trade?.token.symbol},{...e,...n,...i}}))}else{const t=await(0,ue.L)(E,{...e,functionName:"getOrderAndTradeHistoryV2",args:[s,BigInt(g.current*ge),ge]});i=t,a=t.filter((e=>0!==e.actionType)).map((e=>{const t=Object.values(fe).find((t=>t.index===e.actionType))||fe.LIMIT,n={hash:`${e.hash}-${e.timestamp}-${e.actionType}`,timestamp:`${e.timestamp}000`,pair:e.pair.replace("/",""),isLong:e.isLong,actionType:t.label,side:e.isLong?"LONG":"SHORT",margin:e.margin.toString(),qty:(0,r.m)(e.qty.toString(),R.cB.qty),entryPrice:(0,r.m)(e.entryPrice.toString(),R.cB.price),closePrice:(0,r.m)(e.closePrice.toString(),R.cB.price),openFee:e.openFee.toString(),executionFee:e.executionFee.toString(),fundingFee:e.fundingFee.toString(),closeFee:e.closeFee.toString(),holdingFee:e.holdingFee.toString(),tokenIn:e.tokenIn,pnl:e.pnl.toString()};return{...e,...n}}))}g.current+=1,y.current+=i.length,f(!1),p(g.current*ge<=y.current),d(a)}));return(0,i.useEffect)((()=>{c||d([])}),[d,c]),(0,i.useEffect)((()=>(c&&x(),()=>{c&&(u(),g.current=0,y.current=0)})),[c]),(0,i.useMemo)((()=>({loadMore:x,hasMore:m,loadMoreLoading:h})),[x,m,h])}}}]);