"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[6638],{8429:(e,t,s)=>{s.d(t,{L:()=>c,r:()=>l});var r=s(84400);const a=0,o=1,n=2,i=3,u=4,c=e=>({isDegenMode:[o,n].some((t=>t===e)),isClassicMode:[a,i].some((t=>t===e)),isMadContract:[n,i].some((t=>t===e)),isDumb:[u].some((t=>t===e))}),l=e=>(0,r.useMemo)((()=>c(e)),[e])},87685:(e,t,s)=>{s.d(t,{RK:()=>u,d0:()=>c.d,r2:()=>l.r,QG:()=>r.QG,Jg:()=>r.Jg,Bu:()=>r.Bu,xh:()=>d.xh,At:()=>r.At,sP:()=>r.sP,VT:()=>r.VT,j2:()=>d.j2,Pj:()=>g,e:()=>B,Ze:()=>p.Z,tz:()=>L,zC:()=>S,E4:()=>a.E,bC:()=>j.b,XB:()=>$.X,fV:()=>E,Kn:()=>d.Kn,Qb:()=>d.Qb,sH:()=>d.sH,Et:()=>R.Et,Tb:()=>H.T,fM:()=>H.f,Ms:()=>_,Le:()=>h.L});var r=s(2676),a=s(29376),o=s(84400),n=s(82452),i=s(87354);const u=(e,t=0)=>{const s=(0,n.q)(),r=i.ey[e];return(0,o.useMemo)((()=>e&&Number(s[r||e]?.assetDecimal)||t),[t,s,e,r])};var c=s(75223),l=s(53141),d=s(85125),m=s(8429),f=s(85177),b=s(87250),p=s(25254),h=s(86562);const g=()=>{const{data:e=[],isLoading:t}=(0,r.sP)(),s=(0,o.useMemo)((()=>e?.map((e=>{const{name:t=""}=e;return t.replace(/\//g,"")}))??[]),[e]),{updateTime:a,products:n}=(0,f.GS)(),i=(0,f.P2)(n,"none"),u=(0,d.j2)(),{baseTicker:c}=(0,b.dK)(i),l=(0,h.W)(),g=(0,p.H)(e),y=(0,b.Ae)(c,l,g),v=Date.now(),P=(0,o.useMemo)((()=>{const t=new Map;return e.forEach((e=>{t.set(e.name.replace(/\//g,""),e.pairType)})),t}),[e]),M=(0,o.useMemo)((()=>n.filter((e=>(0,m.L)(e.symbolType).isClassicMode||(0,m.L)(e.symbolType).isDegenMode||(0,m.L)(e.symbolType).isMadContract)).filter((e=>s.includes(e.symbol))).map((e=>{const t=y[e.symbol];return{...e,...t,pairType:P.get(t.symbol),update:v,symbolType:e.symbolType}}))),[s,y,P,n,v]);return(0,o.useMemo)((()=>({loading:t,update:[a],validTickers:M,activeSymbol:u})),[u,t,a,M])};var y=s(10322),v=s(32359),P=s(63469),M=s(96988);const x={first:{flex:"2 2 0",justifyContent:"flex-start",minWidth:"110px"},second:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-start"},secondHeader:{flex:"1 1  0",minWidth:"63px",justifyContent:"flex-start"},third:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-end"}},k=(e,t)=>e.localeCompare(t),T=(0,v.RRI)(k),w=(e,t)=>+(e||0)-+(t||0),C=(0,v.RRI)(w),B=e=>{const{sortInfo:t,setSortInfo:s}=(0,f.D2)(),r=(()=>{const{getI18n:e}=(0,M.V6)();return(0,o.useMemo)((()=>[{label:e("ticker-market-header-symbol",{defaultValue:"Symbols"}),key:"symbol",style:x.first},{label:e("ticker-market-header-price",{defaultValue:"Price"}),key:"lastPrice",style:x.secondHeader},{label:e("ticker-market-header-24h",{defaultValue:"24h %"}),key:"difference",style:x.third}]),[e])})(),a=(({activeTab:e})=>{const{sortInfo:t}=(0,f.D2)(),s=Object.keys(t).length?Object.keys(t)[0]:"symbol",r=Object.values(t).length?Object.values(t)[0]:void 0,a=[];return e===P.I_?(0,v.HCG)([(0,v.Ck5)((0,v.Uth)(0,"favoritesIndex"))]):("default"!==r&&r?"symbol"===s&&"ascend"===r?a.push(((e,t)=>k((0,v.vgT)("symbol",e),(0,v.vgT)("symbol",t)))):"symbol"===s&&"descend"===r?a.push(((e,t)=>T((0,v.vgT)("symbol",e),(0,v.vgT)("symbol",t)))):"difference"===s&&"descend"===r?a.push(((e,t)=>C((0,v.vgT)(s,e),(0,v.vgT)(s,t)))):"difference"===s&&"ascend"===r?a.push(((e,t)=>w((0,v.vgT)(s,e),(0,v.vgT)(s,t)))):"symbol"!==s&&"ascend"===r?a.push(((e,t)=>C((0,v.vgT)(s,e),(0,v.vgT)(s,t)))):"symbol"!==s&&"descend"===r&&a.push(((e,t)=>w((0,v.vgT)(s,e),(0,v.vgT)(s,t)))):a.push((0,v.zU3)((0,v.Uth)(0,"ruleNumber"))),(0,v.HCG)(a))})({activeTab:e}),n=(0,o.useCallback)((e=>s(e)),[s]);return(0,o.useMemo)((()=>({sortInfo:t,sortHeaders:r,sortFunc:a,switchSort:n,renderProps:(0,y.jsx)("span",{})})),[a,r,t,n])};var F=s(17921);const L=(e,t)=>{const{data:s}=(0,r.Bu)(e,{watch:!0}),{leverageMargins:a=[]}=s||{},n=(0,o.useMemo)((()=>a.find((e=>new F.Z(t).isGreaterThan(e.notionalUsdFloor)&&new F.Z(t).isLessThanOrEqualTo(e.notionalUsdCap)))||{liqLostP:0,initialLostP:0}),[a,t]);return(0,o.useMemo)((()=>n),[n])};var N=s(26101);const S=()=>{const{leverageMargins:e,base:t}=(0,d.xh)(),s=(0,o.useMemo)((()=>e?.reduce(((e,t)=>t.maxLeverage>e?t.maxLeverage:e),0)),[e]),r=(0,N.r)(t),a=(0,o.useMemo)((()=>r.data&&0!==r.data.length?Math.min(...r.data.map((e=>e.leverage))):i.ak),[r.data]);return(0,o.useMemo)((()=>[a,s??0]),[a,s])};var j=s(82521),$=s(76922);s(52590);const E=e=>{const t=(0,f.Lh)(e,"pricePrecision");return(0,o.useMemo)((()=>t||2),[t])};var R=s(79292),H=s(52030),I=s(39608),O=s(4401),A=s(91359);const Z={index:"1"},U=new Map,W=new Map,_=e=>{const{uuid:t}=(0,f.QK)(),s=e?i.ey[e]:e,r=(0,o.useMemo)((()=>`${(s||e)?.toLowerCase()}usd@assetIndex`),[s,e]),{lastJsonMessage:a,sendJsonMessage:n}=(0,I.ZP)(`${brokerConfig.futuresWsHost}/stream`,{share:!0,filter:(0,A.eJ)(r)}),u=(0,o.useCallback)((()=>{if(!e)return()=>{};const s=t();return U.has(e)?U.set(e,(U.get(e)??0)+1):(n({method:"SUBSCRIBE",params:[r],id:s}),U.set(e,1)),function(){const t=U.get(e);t&&t>0&&U.set(e,(U.get(e)??0)-1),void 0!==t&&t<=1&&(n({method:"UNSUBSCRIBE",params:[r],id:s}),U.delete(e),W.delete(e))}}),[t,n,r,e]);return(0,o.useEffect)((()=>{const e=u();return()=>e()}),[u]),(0,o.useMemo)((()=>{if(a?.data&&e){const t=(0,O.u2)({symbol:"s",index:"i",time:"E",indexBidBuffer:"b",indexAskBuffer:"a",bidRate:"B",askRate:"A"})(a?.data||{}||{});return W.set(e,t),t}return W.get(e)||Z}),[a?.data,e])}},26101:(e,t,s)=>{s.d(t,{r:()=>o});var r=s(23011),a=s(2676);const o=e=>{const t=(0,a.E4)();return(0,r.u)({...t,functionName:"getPairMaxTpRatios",args:[e],query:{enabled:Boolean(e)}})}},25254:(e,t,s)=>{s.d(t,{H:()=>d,Z:()=>l});var r=s(95386),a=s(77884),o=s(84400),n=s(85177),i=s(2676),u=s(72200),c=s(24722);const l=e=>{const{symbol:t}=(0,n.GS)(),{data:s}=(0,c.S)(),a=(0,o.useMemo)((()=>(s||[]).find((s=>s.name.replace("/","").toLowerCase()===(e||t).toLocaleLowerCase()))),[s,e,t]),{data:i}=(0,u.t)(a?.base||"");return i.status===r.Uo.Close},d=e=>{const t=(0,o.useMemo)((()=>e?.map((e=>e.base))),[e]),s=(0,i.E4)(),{data:n,isLoading:u}=(0,a.N)({allowFailure:!1,contracts:t?.map((e=>({...s,functionName:"getPairByBaseV4",args:[e]}))),query:{enabled:Boolean(t&&t.length>0),staleTime:1/0}});return(0,o.useMemo)((()=>u?{}:n?.map((e=>({[e?.name.replace("/","")]:{isMarketClose:e.status===r.Uo.Close}}))).reduce(((e,t)=>Object.assign(e,t)),{})??{}),[u,n])}},79292:(e,t,s)=>{s.d(t,{Et:()=>w,kP:()=>T});var r=s(95386),a=s(13466),o=s(41008),n=s(7507),i=s(70552),u=s(69185),c=s(37928),l=s(93624),d=s(73479),m=s(1057),f=s(63925),b=s(73847),p=s(4592),h=s(49229),g=s(71882),y=s(17921),v=s(84400),P=s(87685),M=s(64191),x=s(85177);const k="-",T=e=>{const t=(0,P.Le)(e,{enabled:Boolean(e)}),{productMap:s}=(0,x.GS)(),{tickSize:r,close:a,open:o}=s[e],n=(0,v.useMemo)((()=>(0,M.p8)(parseFloat(r))),[r]),{close:i=a,open:u=o,timestamp:c,high:l,low:d,diffPercent:m}=t||{},f=+i-+u,b=[f>0?"+":"",(u?f/Number(u)*100:0).toFixed(2)].join("");return(0,v.useMemo)((()=>{return{update:Number(c),tickProps:{diffPercent:Number(m),lastPrice:i,openPrice:u,diffPrice:f,highPrice:l,lowPrice:d,diff:b,tk:n,tickSize:r,bigThan:(e=Number(i),t=Number(u),+e>=+t)}};var e,t}),[i,b,m,f,l,d,u,r,c,n])},w=()=>{const e=(0,P.xh)(),{symbol:t,baseAsset:s,quoteAsset:x,fundingFeeRate:w,longHoldingFeeRate:C,shortHoldingFeeRate:B,longQty:F,shortQty:L,maxLongOiUsd:N,maxShortOiUsd:S}=e,{update:j,tickProps:$}=T(t),{lastPrice:E=0,tickSize:R=1e-7,highPrice:H,lowPrice:I,diffPrice:O,diffPercent:A,diff:Z,tk:U,bigThan:W}=$,_=(0,v.useMemo)((()=>(0,g.uf)(E,U)),[E,U]),D=0===j?Z:[O>0?"+":"",(A?100*A:0).toFixed(2)].join(""),q=(0,v.useMemo)((()=>(0,g.uf)(I,U)),[I,U]),G=(0,v.useMemo)((()=>(0,g.uf)(H,U)),[H,U]),V=(0,a.x)(),K=(0,v.useMemo)((()=>{switch(V){case o.e.id:case n.d.id:return 1200;case i.y.id:case u.Z.id:return Math.ceil(3600/.26);case c.u.id:case l.J.id:return 1800;case d.V.id:case m.a.id:return 3600;default:return 0}}),[V]),z=(0,v.useMemo)((()=>{if(!Number.isNaN(C)&&w){const e=new y.Z((0,h.mb)(w.toString())).multipliedBy(-1).minus((0,h.mb)(C.toString(),r.cB.feeRate)).multipliedBy(K).multipliedBy(100);return`${e.isPositive()?"+":""}${(0,g.uf)(e,5)}%`}return k}),[K,w,C]),J=(0,v.useMemo)((()=>{if(!Number.isNaN(B)&&w){const e=new y.Z((0,h.mb)(w.toString())).minus((0,h.mb)(B.toString(),r.cB.feeRate)).multipliedBy(K).multipliedBy(100);return`${e.isPositive()?"+":""}${(0,g.uf)(e,5)}%`}return k}),[K,w,B]),Q=(0,v.useCallback)((e=>{const t=new y.Z((e||"").replace(/[\s,%]/g,""));return t.isFinite()?t.isPositive()?"text-t-buy":"text-t-sell":"text-t-primary"}),[]),X=F?(0,M.XR)((0,f.d)(F*(0,b.f)(E)/10n**BigInt(r.cB.qty)),1):k,Y=L?(0,M.XR)((0,f.d)(L*(0,b.f)(E)/10n**BigInt(r.cB.qty)),1):k,ee=N?(0,M.XR)((0,p.b)(N,r.cB.usd),1):k,te=S?(0,M.XR)((0,p.b)(S,r.cB.usd),1):k;return(0,v.useMemo)((()=>({symbol:t,info:e,currentPrice:_,baseAsset:s,quoteAsset:x,low:q,high:G,bigThan:W,tickSize:R,difference:D,fundingFeeLong:z,fundingFeeShort:J,getFundingFeeColor:Q,longOI:`${[X,ee].join(" / ")}`,shortOI:`${[Y,te].join(" / ")}`})),[t,e,_,s,x,q,G,W,R,D,z,J,Q,X,ee,Y,te])}},52030:(e,t,s)=>{s.d(t,{T:()=>i,f:()=>n});var r=s(67284),a=s(84400),o=s(43785);const n=()=>{const{address:e}=(0,r.m)();return{trackWebClickWithWalletAddress:(0,a.useCallback)((t=>{(0,o.wu)("web_click",{...t,df_3:e})}),[e])}},i=(e,t=!0)=>{const{address:s}=(0,r.m)();(0,a.useEffect)((()=>{s&&t&&(0,o.wu)("popup_view",{...e,df_3:s})}),[s,e,t])}},86562:(e,t,s)=>{s.d(t,{W:()=>d,L:()=>m});var r=s(17921),a=s(84400),o=s(70176),n=s(39608),i=s(33687),u=s(22645),c=s(4401),l=s(85125);const d=()=>{const{online:e}=(0,o.Z)(),{lastJsonMessage:t}=(0,n.ZP)(`${i.brokerConfig.futuresWsHost}/stream?streams=!markPriceTicker@arr`,{share:!0,retryOnError:!0,shouldReconnect:e=>1e3!==e.code,reconnectAttempts:1/0},e);return(0,a.useMemo)((()=>e&&!t?.data?{}:t?.data.map((e=>(0,c.u2)({symbol:"s",openPrice:"o",highPrice:"h",lowPrice:"l",lastPrice:"c",eventTime:"E",diffPrice:"p",diffPercent:"P",cs:"cs",close:"c"})(e))).reduce(((e,t)=>Object.assign(e,{[t.symbol]:Object.assign(t,{close:t.lastPrice,lastPrice:parseFloat(t.lastPrice),diffPercent:parseFloat(t.diffPercent),diffPrice:parseFloat(t.diffPrice),highPrice:parseFloat(t.highPrice),lowPrice:parseFloat(t.lowPrice),openPrice:parseFloat(t.openPrice),high:parseFloat(t.highPrice),low:parseFloat(t.lowPrice),open:parseFloat(t.openPrice),timestamp:t.eventTime})})),{})??{}),[t?.data,e])},m=(e,t={})=>{const s=(0,a.useMemo)((()=>e?.replace(/^500/,"")??e),[e]),{supportPyth:o}=(0,l.NE)(s),n=d(),i=(e=>{const[t,s]=(0,a.useState)(0);return(0,a.useEffect)((()=>{if(!e)return;const t=(0,u.hn)(e,((e,t)=>s(t)));return()=>{t()}}),[e]),t})(s);return(0,a.useMemo)((()=>{if(!s)return{};const e=n[s];if(e&&o){const t=new r.Z(i).minus(e.openPrice);e.close=`${i}`,e.lastPrice=i,e.diffPrice=t.toNumber(),e.diffPercent=t.div(e.openPrice).toNumber()}return e??{}}),[n,s,i,o])}},87250:(e,t,s)=>{s.d(t,{Bv:()=>M,jE:()=>x,uf:()=>C,FL:()=>B,pF:()=>k,dK:()=>F.dK,Ae:()=>F.Ae});var r=s(9824),a=s.n(r),o=s(15032),n=s.n(o),i=s(23773),u=s.n(i),c=s(46012),l=s.n(c),d=s(90982),m=s.n(d),f=s(41157),b=s.n(f),p=s(64172),h=s.n(p),g=s(43194),y=s.n(g),v=s(54241),P=s.n(v);a().extend(u()),a().extend(n()),a().extend(l()),a().extend(b()),a().extend(h()),a().extend(m()),a().extend(y()),a().extend(P());const M=a(),x=(e,t)=>{const s=M.duration(M(M.utc()).diff(Number(e))),[r,a,o]=[Math.floor(s.asDays()),Math.floor(s.asHours()%24),Math.floor(s.asMinutes()%60)];return{timestamp:Number(e),time:M(Number(e)).format("YYYY-MM-DD HH:mm:ss"),duration:[{v:r,f:t("userinfo-detail-duration-d","d"),show:r>0},{v:a,f:t("userinfo-detail-duration-h","h"),show:!0},{v:o,f:t("userinfo-detail-duration-m","m"),show:0===r}].filter((e=>e.show)).map((e=>`${e.v}${e.f}`)).join(" ")}},k=(e,t=2)=>{if(Math.abs(e)<1e-9&&Math.abs(e)>0)return`${e.toExponential(t)}`;if(Math.abs(e)<1e3)return`${e.toFixed(t)}`;const s=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];let r=0;for(r=s.length-1;r>0&&!(Math.abs(e)>=s[r].value);r--);return(e/s[r].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+s[r].symbol};var T=s(71882),w=s(17921);const C=(e,t,s)=>new w.O(e).toFixed(t,s?.roundMode).replace((0,T.rv)(t,s?.x||3),"$&,");function B(e,t,s=3){return new w.O(e).toFixed(t).replace((0,T.rv)(t,s),"$&,").replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}var F=s(91359)}}]);