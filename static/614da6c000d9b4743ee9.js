"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[2096],{70326:(e,t,a)=>{a.d(t,{D:()=>T});var n=a(11273),i=a(94043),s=a(58395),r=a(27618),o=a(89339),l=a(30610),c=a(76933),u=a(87514),m=a(67284),d=a(28801),f=a(1960),p=a(9125),h=a(99886),g=a(41822),x=a(65413),E=a(23011),b=a(66632),y=a(17921),N=a(84400),v=a(47909),C=a(7061),P=a(38880),w=a(37444),I=a(95386),O=a(42249),S=a(50855),D=a(37672),k=a(81622),L=a(68575);const M=({approve:e,getI18n:t,children:a,refetch:n,disabled:i})=>{const[s,r]=(0,N.useState)(!1),[l,c]=(0,N.useState)(!1),u=(0,k.Z)(),m=!(!s||l)||i,d=(0,N.useCallback)((async()=>{r(!0),c(!1);try{if(e){const a=await e();await(0,L.As)({getI18n:t,hash:a,config:u})}}catch(e){c(!0)}n(),r(!1)}),[n,e,t,u]);return(0,N.useMemo)((()=>N.createElement(o.z,{type:"button",className:"w-full h-full userInfo-AddMargin-ApproveButton",onClick:d,disabled:m||s},a)),[m,a,d,s])},F=({label:e,value:t,className:a,isError:n=!1})=>(0,N.useMemo)((()=>N.createElement("div",{className:(0,r.cn)("flex flex-col flex-[1]",a,"userInfo-AddMargin-Column")},N.createElement("div",{className:"text-caption text-t-third userInfo-AddMargin-Column-title"},e),N.createElement("div",{className:(0,r.cn)("text-t-primary text-subtitle2 userInfo-AddMargin-Column-value",{"text-t-error":n})},t))),[e,a,t,n]),A=[{key:"0.25",label:"25%"},{key:"0.5",label:"50%"},{key:".75",label:"75%"},{key:"1",label:"100%"}],_=({hash:e,onClose:t})=>{const a=(0,O.h)(),{getI18n:n,usePositionAddMargin:l,onChainPerpContractAddress:c}=(0,N.useContext)(S.Z),{icons:D}=(0,v.z)(),[k,L]=(0,N.useState)(-1),[_,T]=(0,N.useState)("0"),[R,B]=(0,N.useState)(""),{symbol:z,side:q,marginToken:Z,marginQtyPrecision:U,pricePrecision:V,formatNumber:G,calcMargin:K,calcMarginRatio:Q,calcMaxMarginRatio:H,calcInitialMargin:j,calcMaxMargin:W,calcLiqPrice:$,useTokenApprove:J,useContractAddMargin:X,isLong:Y,calcLeverage:ee}=l(e),{address:te,chain:ae}=(0,m.m)(),ne=I.KF.has(Z)?"":Z,{data:ie}=(0,d.d)({address:ne||void 0}),{decimals:se=ae?.nativeCurrency.decimals,symbol:re=(0,I.De)(ae?.nativeCurrency.symbol)}=ie||{},[oe,le]=(0,N.useState)("");(0,f.x)({pollingInterval:3e4,onBlockNumber:e=>{le(e.toString(10))}});const{queryKey:ce,formatted:ue}=(0,p.m)({address:te,token:ne,query:{enabled:Boolean(ne),gcTime:I.g_}}),me=(0,h.K)({address:te,query:{enabled:!ne}}),de=(0,g.NL)();(0,N.useEffect)((()=>{oe&&de.invalidateQueries({queryKey:ne?ce:me.queryKey})}),[oe,ne,me.queryKey,de,ce]);const{approve:fe}=J(ne,(0,x.v)(_,se??0)),{addMargin:pe}=X(),he=(0,N.useMemo)((()=>ne?new y.Z(ue??0).toFixed(U,y.Z.ROUND_DOWN):new y.Z(me.data?.formatted??0).toFixed(U,y.Z.ROUND_DOWN)),[ue,U,ne,me.data?.formatted]),{data:ge,refetch:xe}=(0,E.u)({address:ne,abi:b.Wo,functionName:"allowance",args:[te,c],query:{enabled:Boolean(ne)&&Boolean(te)&&Boolean(c)}}),Ee=(0,N.useCallback)((()=>t()),[t]),be=(0,N.useCallback)((e=>{T(e||"0"),L(-1)}),[]),ye=(0,N.useCallback)(((e,t)=>{L(e),T(new y.Z(t).multipliedBy(he).toFixed(U,y.Z.ROUND_DOWN))}),[he,U]),Ne=(0,N.useMemo)((()=>new y.Z(he).isLessThanOrEqualTo(0)||new y.Z(he).isLessThan(_)?{label:n("userinfo-dialog-margin-insufficient-balance","Insufficient balance"),disabled:!0}:{label:N.createElement("div",{className:"flex items-center"},N.createElement(i.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),N.createElement("span",null,n("userinfo-dialog-margin-button-confirm","Add Margin"))),disabled:new y.Z(_).isLessThanOrEqualTo(0)}),[n,_,he]),ve=(0,N.useMemo)((()=>j(_).toString()),[j,_]),Ce=(0,N.useMemo)((()=>K(_).toString()),[K,_]),Pe=(0,N.useMemo)((()=>ee(Ce).toNumber()),[ee,Ce]),we=(0,N.useMemo)((()=>W()),[W]),Ie=(0,N.useMemo)((()=>Q(_).toString()),[Q,_]),Oe=(0,N.useMemo)((()=>H()),[H]),Se=(0,N.useMemo)((()=>Oe.lt(Ie||0)),[Oe,Ie]),De=(0,N.useMemo)((()=>{const e=$(ve);return e.isNegative()?"-":G(e.toString(),V)}),[$,ve,G,V]),ke=a[re]||re,Le=(0,N.useCallback)((()=>{pe({hash:e,amount:(0,u.r)(_,se),marginToken:ne,closeModalCallBack:Ee,symbol:z,decimals:se,isLong:Y,leverage:Pe,tokenName:re})}),[pe,Pe,Ee,e,Y,se,_,re,ne,z]);return(0,N.useMemo)((()=>N.createElement("div",{className:"[&_.add-margin-input_>_div]:!rounded-none"},N.createElement("div",{className:"flex flex-col"},N.createElement("div",{className:"flex flex-row items-center justify-between"},N.createElement("div",{className:"text-t-primary text-subtitle2 userInfo-AddMargin-title"},z," ",q),D.CloseD?N.createElement(D.CloseD,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-[16px] hidden sm:flex",onClick:Ee}):N.createElement(s.E,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-[16px] hidden sm:flex",onClick:Ee})),N.createElement("div",{className:"flex justify-between my-[16px] userInfo-AddMargin-List"},N.createElement(F,{className:"text-left",isError:Se,label:n("userinfo-positions-column-marginRatio","Margin ratio"),value:(0,C.e9)(Ie,{decimals:2})}),N.createElement(F,{className:"text-left",label:n("userinfo-positions-column-margin","Margin"),value:`${G(Ce,U)} ${ke}`}),N.createElement(F,{className:"text-right",label:n("userinfo-positions-column-liquidPriceV2","Liq. Price"),value:De})),N.createElement("div",{className:"userInfo-AddMargin-Separator"}),N.createElement("div",{className:"rounded p-4 flex mb-4 flex-col bg-interactive-interactive01 order-form-card userInfo-AddMargin-orderForm"},N.createElement("div",{className:"flex flex-row justify-between mb-2"},N.createElement("div",{className:"text-t-primary text-subtitle2 userInfo-AddMargin-orderForm-title"},n("userinfo-dialog-margin-add-margin","Add Margin")),N.createElement("div",{className:"text-t-secondary text-caption userInfo-AddMargin-orderForm-subtitle"},n("userinfo-dialog-margin-user-avail",{defaultValue:"Available : {{available}} {{margin}}",available:he,margin:ke}))),N.createElement(P.Q,{className:`add-margin-input h-[40px] mt-[4px] rounded-0 ${R?"border-interactive-primary":"!border-t-third"} border-t-0 border-x-0 [&>input]:text-left userInfo-AddMargin-orderForm-input`,precision:U,maxLength:19,boxProps:{className:(0,r.cn)("flex pb-0.5 rounded-none border-x-0 border-t-0 border-b border-t-third w-full h-10 [&_input]:text-left [&_input]:px-0 [&_.bn-input-suffix]:!mr-0 userInfo-AddMargin-orderForm-inputbox",{"border-t-error":Se})},value:_,onChange:be,onFocus:()=>B("focus"),onBlur:()=>B(""),suffix:N.createElement("div",{className:"text-body2 text-t-primary"},ke)})),N.createElement(w.W,{className:"userInfo-AddMargin-RadioOptions",optionClassName:"userInfo-AddMargin-RadioOption",activeIndex:k,options:A,onChange:ye}),Se&&N.createElement("p",{className:"text-t-error text-caption mt-4"},n("userinfo-dialog-margin-maximum-margin-ratio-warn",{defaultValue:"the maximum Margin ratio for {{symbol}} is {{maxMarginRatio}} , so it is recommended to input an additional margin below {{maxMargin}} {{marginSymbol}}.",maxMarginRatio:(0,C.e9)(Oe.toString(),{decimals:2}),symbol:z,maxMargin:G(we.toString(),U,{roundMode:1}),marginSymbol:ke})),N.createElement("div",{className:"flex mt-8 h-10 userInfo-AddMargin-button-container"},ne&&ge&&!new y.Z((0,u.r)(_,se)).isLessThanOrEqualTo(ge.toString())&&new y.Z(_).isLessThanOrEqualTo(he)?N.createElement(M,{approve:fe,getI18n:n,refetch:xe},n("userinfo-dialog-margin-increase-authorized-amount",{defaultValue:"Increase {{symbol}} authorization amount",symbol:ke})):N.createElement(o.z,{className:"w-full text-subtitle2 userInfo-AddMargin-Button",disabled:Ne.disabled||Se,onClick:Le},Ne.label))))),[n,D,Ee,z,q,Se,Ie,G,Ce,U,ke,De,he,R,_,be,k,ye,Oe,we,ne,ge,se,fe,xe,Ne.disabled,Ne.label,Le])},T=()=>{const[e,t]=(0,N.useState)(""),{isMobile:a}=(0,n.F)(),i=(0,N.useCallback)((()=>{t("")}),[]);return(0,N.useEffect)((()=>D.ee.on("MODAL_ADD_MARGIN_OPEN",(({hash:e})=>{t(e)}))),[]),(0,N.useEffect)((()=>D.ee.on("MODAL_ADD_MARGIN_CLOSE",(()=>{t("")}))),[]),(0,N.useMemo)((()=>e?a?N.createElement(l.dy,{open:!0},N.createElement(l.sc,{className:"w-full border-none px-4 pt-3 pb-6 rounded-t-[4px] bg-interactive-interactiveBg userInfo-AddMargin-SheetContent",onPointerDownOutside:i},N.createElement(_,{hash:e,onClose:i}))):N.createElement(c.Vq,{open:!0},N.createElement(c.PK,null,N.createElement(c.cZ,{className:"w-full sm:w-[320px] p-4 min-h-[384px] sm:min-h-[332px] userInfo-AddMargin-DialogContent",onPointerDownOutside:i},N.createElement(_,{hash:e,onClose:i})))):null),[e,a,i])}},80291:(e,t,a)=>{a.d(t,{n:()=>d});var n=a(76933),i=a(84400);const s=e=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"icon-warn css-aenbdp",viewBox:"0 0 96 96",...e},i.createElement("g",{filter:"url(#a)"},i.createElement("rect",{width:"65",height:"65",x:"8",y:"9",fill:"url(#b)",rx:"10"})),i.createElement("g",{filter:"url(#c)"},i.createElement("rect",{width:"58",height:"58",x:"30",y:"31",fill:"#F1F8FF",fillOpacity:".5",rx:"8"})),i.createElement("g",{filter:"url(#d)"},i.createElement("rect",{width:"38",height:"38",x:"40",y:"41",fill:"#fff",rx:"19"})),i.createElement("g",{filter:"url(#e)"},i.createElement("path",{fill:"#F0B90B",fillRule:"evenodd",d:"M62 51c0-1.105-1-3-3-3s-3 1.895-3 3l1 13a2 2 0 1 0 4 0l1-13zm-3 21a2 2 0 1 0 0-4 2 2 0 0 0 0 4z",clipRule:"evenodd"})),i.createElement("defs",null,i.createElement("filter",{id:"a",width:"66",height:"66",x:"8",y:"9",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"1",dy:"1"}),i.createElement("feGaussianBlur",{stdDeviation:"1"}),i.createElement("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.45 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),i.createElement("filter",{id:"c",width:"59",height:"59",x:"30",y:"31",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"1",dy:"1"}),i.createElement("feGaussianBlur",{stdDeviation:"1"}),i.createElement("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.45 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),i.createElement("filter",{id:"d",width:"50",height:"50",x:"36",y:"37",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"2",dy:"2"}),i.createElement("feGaussianBlur",{stdDeviation:"3"}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 0.941667 0 0 0 0 0.797749 0 0 0 0 0.427674 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"1",dy:"1"}),i.createElement("feGaussianBlur",{stdDeviation:".5"}),i.createElement("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.3 0"}),i.createElement("feBlend",{in2:"shape",result:"effect2_innerShadow"})),i.createElement("filter",{id:"e",width:"14",height:"32",x:"54",y:"46",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"2",dy:"2"}),i.createElement("feGaussianBlur",{stdDeviation:"2"}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 0.811167 0 0 0 0 0.141667 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),i.createElement("linearGradient",{id:"b",x1:"13.417",x2:"60.591",y1:"9",y2:"74",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFD37E"}),i.createElement("stop",{offset:"1",stopColor:"#F0B90B"}))));var r=a(89339),o=a(47909),l=a(50855),c=a(37672);const u=i.forwardRef((({getI18n:e,onClose:t,onConfirm:a,positions:o},l)=>i.createElement(n.cZ,{className:"!w-[298px] !min-h-[280px] p-6",onPointerDownOutside:t,ref:l},i.createElement("div",{className:"flex flex-col"},i.createElement("div",{className:"flex w-full justify-center items-center mb-4"},i.createElement(s,{width:60,height:60})),i.createElement("div",{className:"flex w-full justify-center items-center mb-2"},i.createElement("div",{className:"text-subtitle1 text-t-primary"},e("userinfo-positions-close-all-position-title",{defaultValue:"Closing all positions"}))),i.createElement("div",{className:"flex w-full justify-center items-center mb-6"},i.createElement("div",{className:"text-body2 text-t-third text-center"},e("userinfo-positions-close-all-position-desc-v2",{defaultValue:"Closing all positions will cancel all open orders. And the current {{number}} positions will be filled with market orders.",number:o.length}))),i.createElement("div",{className:"flex w-full justify-between items-center"},i.createElement(r.z,{className:"text-subtitle2 flex-[1] j-10 !mr-3",onClick:t,variant:"secondary"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),i.createElement(r.z,{className:"text-subtitle2 flex-[1] h-10",onClick:a},i.createElement("div",{className:"flex items-center"},e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"})))))))),m=i.forwardRef((({getI18n:e,onClose:t,onConfirm:a,positions:s},o)=>i.createElement(n.cZ,{className:"!w-[360px] !min-h-[170px] userInfo-CloseAllPosition-DialogContent",onPointerDownOutside:t,ref:o},i.createElement("div",{className:"flex flex-col p-2 items-center"},i.createElement("div",{className:"flex-1 pb-6 text-left"},i.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-all-position-desc-v2",{defaultValue:"Closing all positions will cancel all open orders. And the current {{number}} positions will be filled with market orders.",number:s.length}))),i.createElement("div",{className:"flex w-full justify-between items-center gap-[10px]"},i.createElement(r.z,{className:"text-subtitle2 flex-[1] h-9",onClick:t,variant:"outline"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),i.createElement(r.z,{className:"text-subtitle2 flex-[1] h-9",onClick:a},e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"}))))))),d=()=>{const{getI18n:e,usePositions:t}=(0,i.useContext)(l.Z),a=t(),[s,r]=(0,i.useState)(!1),{brokerName:d}=(0,o.z)(),f=(0,i.useCallback)((()=>{r(!1)}),[]),p=(0,i.useCallback)((()=>r(!0)),[]),h=(0,i.useCallback)((()=>{c.ee.emit("POSITION_ALL_CLOSE",void 0),f()}),[f]);return(0,i.useEffect)((()=>(c.ee.on("MODAL_CLOSE_ALL_POSITION",p),c.ee.on("MODAL_CLOSE_ALL_POSITION_CLOSE",f),()=>{c.ee.off("MODAL_CLOSE_ALL_POSITION",p),c.ee.off("MODAL_CLOSE_ALL_POSITION_CLOSE",f)})),[f,p]),i.createElement(n.Vq,{open:s},i.createElement(n.PK,null,"astherus"===d?i.createElement(m,{getI18n:e,onClose:f,onConfirm:h,positions:a}):i.createElement(u,{getI18n:e,onClose:f,onConfirm:h,positions:a})))}},48837:(e,t,a)=>{a.d(t,{t:()=>y});var n=a(8429),i=a(76933),s=a(89663),r=a(63925),o=a(84400),l=a(47909),c=a(24757),u=a(50855),m=a(37672),d=a(89339),f=a(94043);const p=o.forwardRef((({getI18n:e,onClose:t,onSubmit:a,showMinTp:n,minTp:s},r)=>o.createElement(i.cZ,{className:"!w-[298px] !min-h-[186px]",onPointerDownOutside:t,ref:r},o.createElement("div",{className:"flex flex-col"},o.createElement("div",{className:"flex w-full justify-between h-[38px] items-center"},o.createElement("div",{className:"text-t-primary text-subtitle1"},e("userinfo-positions-close-position-title",{defaultValue:"Close Position"})),o.createElement(i.GG,{onClick:t,className:"[&_svg]:w-5 [&_svg]:h-5 [&_svg]:text-[20px]"})),o.createElement("div",{className:"flex-1 pt-4 pb-10"},n?o.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-pnl-loss-close-patch1",{defaultValue:"When ROI is less than {rate}%, there may be a loss after closing the position due to close position fees.",rate:s})):null,o.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-desc",{defaultValue:"Are you sure to close your position?"}))),o.createElement("div",{className:"flex w-full justify-between items-center"},o.createElement(d.z,{className:"text-subtitle2 flex-[1] j-10 !mr-2",onClick:t,variant:"secondary"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),o.createElement(d.z,{className:"text-subtitle2 flex-[1] h-10",onClick:a},o.createElement("div",{className:"flex items-center"},o.createElement(f.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),o.createElement("span",null,e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"}))))))))),h=o.forwardRef((({getI18n:e,onClose:t,onSubmit:a,showMinTp:n,minTp:s},r)=>{const{icons:c}=(0,l.z)();return o.createElement(i.cZ,{className:"!w-[360px] !min-h-[170px] userInfo-ClosePosition-DialogContent",onPointerDownOutside:t,ref:r},o.createElement("div",{className:"flex flex-col p-2 items-center"},c.FileCircleQuestion&&o.createElement(c.FileCircleQuestion,{className:"text-t-third fill-t-third",width:"40px",height:"40px"}),o.createElement("div",{className:"flex-1 pt-3 pb-6 text-center"},n?o.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-pnl-loss-close-patch1",{defaultValue:"When ROI is less than {rate}%, there may be a loss after closing the position due to close position fees.",rate:s})):null,o.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-desc",{defaultValue:"Are you sure to close your position?"}))),o.createElement("div",{className:"flex w-full justify-between items-center gap-[10px]"},o.createElement(d.z,{className:"text-subtitle2 flex-[1] h-9 ",onClick:t,variant:"outline"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),o.createElement(d.z,{className:"text-subtitle2 flex-[1] h-9",onClick:a},e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"})))))}));var g,x=a(73847),E=a(95386);!function(e){e[e.FIXED=0]="FIXED",e[e.ONE_PERCENT_DEPTH=1]="ONE_PERCENT_DEPTH",e[e.NET_POSITION=2]="NET_POSITION",e[e.DEGEN=3]="DEGEN"}(g||(g={}));const b=({getI18n:e,onClose:t,onSubmit:a,markPrice:n,closePrice:s,ROIColor:r,ROI:l,spread:c})=>o.createElement(i.cZ,{className:"w-full max-w-[360px] p-6 userInfo-HighSpread-DialogContent",onEscapeKeyDown:()=>t(),onPointerDownOutside:()=>t()},o.createElement("h2",{className:"text-headline3 text-t-primary mb-3 text-center"},e("orderForm-high-spread-confirm-dialog-title","High Spread Notice")),o.createElement("p",{className:"text-caption1 mb-2 text-center text-t-third"},e("orderForm-high-spread-confirm-dialog-desc","This trade may result in significant price impact due to a substantial disparity in open interest between long and short positions.Please be aware.")),o.createElement("div",{className:"flex flex-row justify-between py-1"},o.createElement("div",{className:"text-body2 text-t-secondary"},e("orderForm-high-spread-confirm-mark-price","Mark price")),o.createElement("div",{className:"text-subtitle2 text-t-primary"},n)),o.createElement("div",{className:"flex flex-row justify-between py-1"},o.createElement("div",{className:"text-body2 text-t-secondary"},e("orderForm-high-spread-confirm-est-close-price","Est. Close price")),o.createElement("div",{className:"text-subtitle2 text-t-primary"},s)),o.createElement("div",{className:"flex flex-row justify-between py-1"},o.createElement("div",{className:"text-body2 text-t-secondary"},e("orderForm-high-spread-confirm-est-roi","Est. ROI")),o.createElement("div",{className:`text-subtitle2 ${r}`},l)),o.createElement("div",{className:"flex flex-row justify-between py-1"},o.createElement("div",{className:"text-body2 text-t-secondary"},e(" orderForm-high-spread-confirm-price-spread","Price spread")),o.createElement("div",{className:"text-subtitle2 text-t-sell"},c)),o.createElement(d.z,{type:"button",onClick:a,className:"block w-full mt-6"},e("orderForm-high-spread-confirm-close-button","Continue to close"))),y=()=>{const{getI18n:e,useColumnSymbol:t,useColumnPNL:a,useLeverage:d,usePositionDetail:f,useSpread:y}=(0,o.useContext)(u.Z),{brokerName:N}=(0,l.z)(),[v,C]=(0,o.useState)(""),{symbolType:P,symbol:w,isLong:I}=t(v),{ROIInNumber:O,isROINegative:S}=a(v),D=d(v),{min:k}=(0,c.Fe)(D),{isDegenMode:L}=(0,n.L)(P),{usePositionDetailPricePrecision:M}=f(),F=M(w),{entryPrice:A,marketPrice:_,qty:T,margin:R,longQty:B,shortQty:z,fundingFee:q,holdingFee:Z,slippageConfig:U}=y(v),V=(({marketPrice:e,qty:t})=>e*t/10n**BigInt(E.cB.qty))({marketPrice:_,qty:T}),G=(({isLong:e,size:t,longQty:a,shortQty:n,slippageConfig:i,marketPrice:s})=>{if(0n===t)return 0n;if(i?.slippageType===g.FIXED)return(0,x.f)(`${e?i?.slippageLongP:i?.slippageShortP}`)/10n**4n;const o=(({longQty:e,marketPrice:t})=>e*t)({longQty:a*10n**8n,marketPrice:s})/10n**18n,l=(({shortQty:e,marketPrice:t})=>e*t)({shortQty:n*10n**8n,marketPrice:s})/10n**18n;if(i?.slippageType===g.ONE_PERCENT_DEPTH){if(!t||!a)return 0n;if(0n===i.onePercentDepthAboveUsd)return 0n;const n=(e?(l+t)/i.onePercentDepthBelowUsd:(o+t)/i.onePercentDepthAboveUsd)*10n**18n;return(0,x.f)(""+Math.ceil(1e4*Number((0,r.d)(n)))/1e4)}if(i?.slippageType===g.NET_POSITION){if(!t||!a)return 0n;const n=e?i.onePercentDepthBelowUsd:i.onePercentDepthAboveUsd,s=BigInt(e?i?.slippageShortP:i?.slippageLongP)*10n**(18n-4n),r=(e?t-o+l:t-l+o)*10n**18n/n;return r>s?r:s}if(i?.slippageType===g.DEGEN){if(!t||!a)return 0n;const n=e?i.onePercentDepthBelowUsd:i.onePercentDepthAboveUsd,s=(0,x.f)("10000000000000000000000"),r=(e?t+l-s:t+o-s)*10n**18n/n;return r>0n?r:0n}return BigInt(0)})({isLong:I,size:V,longQty:B,shortQty:z,slippageConfig:U,marketPrice:_}),K=(({isLong:e,marketPrice:t,spread:a})=>e?t*(10n**18n-a)/10n**18n:t*(10n**18n+a)/10n**18n)({isLong:I,marketPrice:_,spread:G}),Q=(({qty:e,entryPrice:t,closePrice:a,isLong:n,fundingFee:i,holdingFee:s})=>{if(0n===a)return 0n;const r=i-s;return n?(a-t)*e/10n**BigInt(E.cB.qty)+r:(t-a)*e/10n**BigInt(E.cB.qty)+r})({isLong:I,qty:T,entryPrice:A,closePrice:K,fundingFee:q,holdingFee:Z}),H=(({pnl:e,margin:t})=>0n===e||0n===t?0n:e/t)({pnl:Q,margin:R}),j=0n===_?"-":(0,s.uf)((0,r.d)(_),F),W=0n===K?"-":(0,s.uf)((0,r.d)(K),F),$=0n===H?"-":`${(0,s.uf)((0,r.d)(100n*H),2)}%`,J=`${(0,s.uf)((0,r.d)(100n*G),2)}%`,X=(({size:e,pnl:t,margin:a})=>{if(0n===a)return 0n;const n=e*(0,x.f)("4")/10n**18n/10n**18n,i=a*10n**18n+t/10n**18n;return 0n!==i&&0n!==n?i/n:0n})({size:V,margin:R,pnl:Q}),Y=(0,o.useCallback)((()=>{C("")}),[]),ee=(0,o.useCallback)((({hash:e})=>{C(e)}),[]),te=(0,o.useCallback)((()=>{m.ee.emit("POSITION_CLOSE",{hash:v,symbol:w,isLong:I,leverage:D}),Y()}),[v,I,D,Y,w]);return(0,o.useEffect)((()=>(m.ee.on("MODAL_CLOSE_POSITION",ee),m.ee.on("MODAL_CLOSE_POSITION_CLOSE",Y),()=>{m.ee.off("MODAL_CLOSE_POSITION",ee),m.ee.off("MODAL_CLOSE_POSITION_CLOSE",Y)})),[Y,ee]),o.createElement(i.Vq,{open:Boolean(v)},o.createElement(i.PK,null,v?0n!==X&&G>=X?o.createElement(b,{getI18n:e,onClose:Y,onSubmit:te,markPrice:j,closePrice:W,ROIColor:0n===H?"text-t-primary":H>0?"text-t-buy":"text-t-sell",ROI:$,spread:J}):"astherus"===N?o.createElement(h,{getI18n:e,onClose:Y,onSubmit:te,showMinTp:L&&!S&&O<k,minTp:k}):o.createElement(p,{getI18n:e,onClose:Y,onSubmit:te,showMinTp:L&&!S&&O<k,minTp:k}):null))}},66099:(e,t,a)=>{a.d(t,{F:()=>L});var n=a(11273),i=a(58395),s=a(5837),r=a(30610),o=a(76933),l=a(17921),c=a(84400),u=a(47909),m=a(49506),d=a(49382),f=a(26997);const p=({hash:e,onClose:t})=>{const{getI18n:a,usePositionDetail:n}=(0,c.useContext)(f.C),{usePositionDetailSymbol:s}=n(),{symbol:r,isLong:o,symbolName:l}=s(e),{icons:m}=(0,u.z)();return(0,c.useMemo)((()=>c.createElement("div",{className:"items-center flex justify-between mb-4"},c.createElement("div",{className:"text-subtitle1 text-t-primary font-[500] userInfo-Detail-main-title"},l||r," ",o?a("orderForm-long","Long"):a("orderForm-short","Short")),m.CloseD?c.createElement(m.CloseD,{width:"20px",height:"20px",fontSize:"20px",className:"hidden sm:block text-t-third cursor-pointer absolute right-4 userInfo-Detail-close-icon",onClick:t}):c.createElement(i.E,{width:"20px",height:"20px",fontSize:"20px",className:"hidden sm:block text-t-third cursor-pointer absolute right-4 userInfo-Detail-close-icon",onClick:t}))),[m,a,o,t,r,l])},h=({hash:e})=>{const{getI18n:t,usePositionDetail:a,staticHost:n}=(0,c.useContext)(f.C),{usePositionDetailLeverage:i,usePositionDetailPNLROI:s,usePositionDetailSymbol:r}=a(),{isPNLNegative:o,isPNLPositive:l}=s(e),{symbolType:u}=r(e),p=i(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-leverage","Leverage")},c.createElement("div",{className:"flex items-center gap-[2px]"},p,c.createElement(d.b,{isPNLNegative:o,isPNLPositive:l,staticHost:n,symbolType:u})))},g=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailInitialMargin:n}=a(),i=n(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips01","Initial Margin is the margin initially allocated to this position.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips02","Initial Margin = Principal - Open Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-initialMargin","Initial Margin"),tips:s,showLabelSx:!0},i)},x=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailQtyAndSize:n,usePositionDetailPair:i}=a(),{baseAsset:s}=i(e),{size:r,qty:o}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-qty","QTY(Size)")},o," ",s," ( â‰ˆ ",r," USD )")},E=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailEntryPrice:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-entryPrice","Entry Price")},i," USD")},b=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailLiquidPrice:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-estLiquidPrice","Est. Liquid Price")},i," USD")},y=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailLiqLostRate:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-liquidLostRate","Liquid Lost Rate")},`${new l.Z(i).multipliedBy(100).toFixed(2)}%`)},N=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailFundingFee:n}=a(),{fundingFee:i,isFundingFeeNegative:s}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-accFundingFee","Acc. Funding Fee")},c.createElement("div",{className:"text-subtitle2",style:{color:s?"rgb(var(--colors-t-sell))":"rgb(var(--colors-t-buy))"}},i))},v=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailPNLROI:n}=a(),{PNL:i,isPNLNegative:s}=n(e),r=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips01","Unrealized PNL only calculates the profit and loss generated after the position is successfully opened.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips02","Long : Unrealized PNL = (Mark Price - Entry Price) * Qty + Funding Fee")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips03","Short : Unrealized PNL = (Entry Price - Mark Price ) * Qty + Funding Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-unrealizedPnl","Unrealized PNL"),tips:r,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:s?"rgb(var(--colors-t-sell))":"rgb(var(--colors-t-buy))"}},i))},C=({hash:e})=>{const{getI18n:t,usePositionDetail:a,enableShare:n,ee:i}=(0,c.useContext)(f.C),{usePositionDetailPNLROI:r}=a(),{ROI:o,isROINegative:l}=r(e),d=(0,c.useCallback)((()=>i.emit("MODAL_POSITION_SHARE_OPEN",{hash:e,overlay:!0})),[i,e]),{icons:p}=(0,u.z)(),h=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedROI-tips01","Unrealized ROI = Unrealized PNL / Initial margin * 100%")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-unrealizedROI","Unrealized ROI"),tips:h,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:l?"rgb(var(--colors-t-sell))":"rgb(var(--colors-t-buy))"}},o),n&&c.createElement("div",null,p.ShareD?c.createElement(p.ShareD,{className:"relative ml-1 cursor-pointer text-t-third userInfo-Detail-share-icon",onClick:d}):c.createElement(s.f,{className:"relative ml-0.5 cursor-pointer text-t-third userInfo-Detail-share-icon",width:"16px",height:"16px",fontSize:"16px",onClick:d})))},P=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailOpenFee:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-openFee","Open Fee")},i)},w=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailExecutionFee:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-executionFee","Execution Fee")},i)},I=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailNetProfit:n}=a(),{netProfit:i,isNetProfitNegative:s}=n(e),r=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips01","Net Profit is the profit and loss obtained after taking into account the trader's principal and trading fees.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips02-v2","Net Profit = Realized PNL - Open Fee - Execution Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-netProfit","Net Profit"),tips:r,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:s?"rgb(var(--colors-t-sell))":"rgb(var(--colors-t-buy))"}},i))},O=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailDuration:n}=a(),{time:i}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-time","Time")},i)},S=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(f.C),{usePositionDetailDuration:n}=a(),{duration:i}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-duration","Duration")},i)},D=({hash:e})=>c.createElement("div",{className:"flex gap-6 flex-col sm:flex-row max-h-[80vh] sm:max-h-[unset] overflow-auto sm:overflow-hidden"},c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4"},c.createElement(h,{hash:e}),c.createElement(g,{hash:e}),c.createElement(x,{hash:e}),c.createElement(E,{hash:e}),c.createElement(b,{hash:e}),c.createElement(y,{hash:e}),c.createElement(N,{hash:e}),c.createElement(v,{hash:e}),c.createElement(C,{hash:e})),c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4 bg-interactive-interactive01 dark:bg-interactive-interactive01 rounded-[10px] p-4 h-[max-content] userInfo-Detail-Content"},c.createElement(P,{hash:e}),c.createElement(w,{hash:e}),c.createElement(I,{hash:e}),c.createElement("div",{className:"border-b-border-line border-b border-solid"}),c.createElement(O,{hash:e}),c.createElement(S,{hash:e}))),k=({hash:e,onClose:t})=>(0,c.useMemo)((()=>c.createElement(c.Fragment,null,c.createElement(p,{hash:e,onClose:t}),c.createElement(D,{hash:e}))),[e,t]),L=()=>{const[e,t]=(0,c.useState)(""),{ee:a,usePositionDetail:i}=(0,c.useContext)(f.C),{onPositionDetailOpen:s,useIsDegenMode:l}=i(),u=l(),{isMobile:m}=(0,n.F)(),d=(0,c.useCallback)((()=>{t("")}),[]),p=(0,c.useCallback)((({hash:e})=>{s?.(u(e)),t(e)}),[u,s]);return(0,c.useEffect)((()=>(a.on("MODAL_POSITION_DETAIL_CLOSE",d),a.on("MODAL_POSITION_DETAIL_OPEN",p),()=>{a.off("MODAL_POSITION_DETAIL_CLOSE",d),a.off("MODAL_POSITION_DETAIL_OPEN",p)})),[a,d,p]),m?c.createElement(r.dy,{open:Boolean(e)},c.createElement(r.sc,{className:"w-full border-none px-4 pt-3 py-6 bg-interactive-interactiveBg userInfo-Detail-SheetContent",onPointerDownOutside:d},c.createElement(k,{hash:e,onClose:d}))):c.createElement(o.Vq,{open:Boolean(e)},c.createElement(o.PK,null,c.createElement(o.cZ,{className:"w-full sm:w-[750px] sm:min-w-[750px] p-4 sm:min-h-[332px] userInfo-Detail-DialogContent",onPointerDownOutside:d},c.createElement(k,{hash:e,onClose:d}))))}},26130:(e,t,a)=>{a.d(t,{m:()=>C});var n=a(11273),i=a(96336),s=a(57255),r=a(89663),o=a(76126),l=a(47231),c=a(67284),u=a(13466),m=a(84542),d=a(84400),f=a(47909),p=a(82210),h=a(93757),g=a(86364),x=a(12149),E=a(61239),b=a(26997),y=a(59712);const N={markPrice:"-",ROI:"-",PNL:"-"},v=({hash:e,checked:t,onClose:a,snapshotRef:s,onCheckedChange:o,copy:l,download:u})=>{const[m,x]=(0,d.useState)(N),{locale:y,getI18n:v,useMarkPrice:C,usePositionDetail:P,useTheme:w,staticHost:I,siteHost:O,agentCode:S}=(0,d.useContext)(b.C),{usePositionDetailSymbol:D,usePositionDetailLeverage:k,usePositionDetailPNLROI:L,usePositionDetailEntryPrice:M,usePositionDetailPricePrecision:F}=P(),{isLight:A}=w(),{PNLFormatted:_,ROI:T,marginSymbol:R}=L(e),{symbol:B,isLong:z}=D(e),q=C(B),Z=k(e),U=M(e),V=F(B),{address:G}=(0,c.m)(),{isMobile:K}=(0,n.F)(),Q=(0,E.eQ)({staticHost:I}),{brokerName:H,icons:j}=(0,f.z)();return(0,d.useEffect)((()=>{void 0!==q&&0!==Number(q)&&m.markPrice===N.markPrice&&x({markPrice:q,ROI:T,PNL:_})}),[_,T,q]),d.createElement("div",{className:"flex flex-col"},a&&(j.CircledCloseF?d.createElement(j.CircledCloseF,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute top-6 right-6 z-[1] userInfo-Share-close-icon",onClick:a}):d.createElement(i.M,{width:"24px",height:"24px",fontSize:"24px",className:"text-t-third cursor-pointer absolute top-[8px] right-[8px] z-[1] userInfo-Share-close-icon",onClick:a})),"astherus"===H?d.createElement(h.L,{data:{hash:e,locale:y||"en",agentCode:S,symbol:B,tokenInSymbol:R,closeTime:0,side:z?"LONG":"SHORT",leverage:Z,markPrice:Number(m.markPrice)>0?(0,r.uf)(m.markPrice,V):"-",entryPrice:U,closePrice:"-",PNL:m.PNL,ROI:m.ROI,isLightTheme:A,staticResource:Q,staticHost:I,SITE_HOST:O,userAddress:G,getI18n:v,sharePNL:t,snapshotRef:s}}):d.createElement(p.L,{data:{hash:e,locale:y||"en",symbol:B,tokenInSymbol:R,closeTime:0,side:z?"LONG":"SHORT",leverage:Z,markPrice:Number(m.markPrice)>0?(0,r.uf)(m.markPrice,V):"-",entryPrice:U,closePrice:"-",PNL:m.PNL,ROI:m.ROI,isLightTheme:A,staticResource:Q,staticHost:I,SITE_HOST:O,userAddress:G,getI18n:v,sharePNL:t,snapshotRef:s}}),!K&&d.createElement(d.Fragment,null,d.createElement(g.k,{className:"pt-[12px] pb-[24px]",getI18n:v,checked:t,onCheckedChange:o}),d.createElement(g.n,{getI18n:v,copy:l,download:u})))},C=()=>{const e=(0,u.x)(),t=(0,m.pT)(e),{ee:a,getI18n:i,locale:r}=(0,d.useContext)(b.C),[c,f]=(0,d.useState)(""),[p,h]=(0,d.useState)(!1),[g,N]=(0,d.useState)(!1),{isMobile:C}=(0,n.F)(),P=(0,d.useRef)(),w=(0,d.useMemo)((()=>(0,E.O1)({network:t?.apiNetwork,locale:r,hash:c,sharePNL:g})),[r,t?.apiNetwork,c,g]),I=(0,d.useCallback)((async()=>{try{await(0,o.v)(w),C||s.A.success(i("share-copy-message","Copy Successfully"))}catch(e){y.error(e)}}),[i,C,w]),O=(0,d.useCallback)((async()=>{y.log("downloda"),P.current&&(y.log("dom to img"),(0,l.Q)({el:P.current,success(e){y.log("success"),(0,l.L)(e,`share-position-${Date.now()}`)}})),y.log("this")}),[]),S=(0,d.useCallback)((e=>{"boolean"==typeof e&&N(e)}),[]),D=(0,d.useCallback)((()=>{f("")}),[]);return(0,d.useEffect)((()=>a.on("MODAL_POSITION_SHARE_OPEN",(({hash:e,overlay:t})=>{f(e),h(t)}))),[a]),(0,d.useEffect)((()=>a.on("MODAL_POSITION_SHARE_CLOSE",(()=>{f(""),h(!1)}))),[a]),(0,d.useMemo)((()=>c?C?d.createElement(x.V,{hash:c,onClose:D,getI18n:i,checked:g,onCheckedChange:S,copy:I,download:O},d.createElement(v,{hash:c,checked:g,snapshotRef:P})):d.createElement(x.t,{onClose:D,overlay:p},d.createElement(v,{hash:c,checked:g,onClose:D,onCheckedChange:S,copy:I,download:O,snapshotRef:P})):null),[I,O,i,c,C,S,D,p,g])}},26997:(e,t,a)=>{a.d(t,{C:()=>n});const n=a(84400).createContext({})},50855:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a(84400).createContext({})},37672:(e,t,a)=>{a.d(t,{ee:()=>n});const n=new(a(13565).v)},7061:(e,t,a)=>{a.d(t,{FB:()=>u,Y0:()=>c,e9:()=>l});var n=a(89663),i=a(17921);const s=2,r="-%",o=1,l=(e,t)=>{let a=new i.Z(e);const{positiveSign:n=!1,decimals:l=s,customNaNDisplay:c=r,allowNegative:u=!0,rm:m=o}=t||{};if(a.isNaN())return c;u||(a=a.abs());const d=a.shiftedBy(2).dp(l,m).toFormat({suffix:"%",decimalSeparator:"."}).toString();return n?`+${d}`:d},c=(e,t,a=3)=>(0,n.yd)(e,t).replace((0,n.rv)(t,a),"$&,"),u=(e,t,a=3)=>c(e,t,a).replace(/\.?[0,]+$/,"")},9125:(e,t,a)=>{a.d(t,{m:()=>o});var n=a(84400),i=a(66632),s=a(77884),r=a(4592);const o=e=>{const{data:t,isLoading:a,refetch:o,isError:l,queryKey:c}=(0,s.N)({allowFailure:!1,contracts:[{address:e.token,abi:i.Wo,functionName:"balanceOf",args:[e.address],chainId:e.chainId},{address:e.token,abi:i.Wo,functionName:"decimals",chainId:e.chainId},{address:e.token,abi:i.Wo,functionName:"symbol",chainId:e.chainId}],scopeKey:e.scopeKey,query:e.query}),[u,m,d]=t||[];return(0,n.useMemo)((()=>({data:u,decimals:m,symbol:d,formatted:(0,r.b)(u??0n,m??0),isLoading:a,refetch:o,isError:l,queryKey:c})),[u,m,d,a,o,l,c])}},83130:(e,t,a)=>{a.d(t,{o:()=>i});var n=a(84400);const i=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",...e},n.createElement("path",{d:"M12 6a1 1 0 00-1 1v4H7a1 1 0 100 2h4v4a1 1 0 102 0v-4h4a1 1 0 100-2h-4V7a1 1 0 00-1-1z"}),n.createElement("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-2 0a8 8 0 10-16 0 8 8 0 0016 0z",clipRule:"evenodd"}))},89555:(e,t,a)=>{a.d(t,{W:()=>i});var n=a(14154);function i(e){return"number"==typeof e?e:"wei"===e?0:Math.abs(n.Bd[e])}},99886:(e,t,a)=>{a.d(t,{K:()=>g});var n=a(17652),i=a(6716),s=a(4592),r=a(90386),o=a(89906),l=a(89555),c=a(42075);async function u(e,t){const{balanceAddress:a,chainId:n,symbolType:i,tokenAddress:r,unit:o}=t,u={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:i}]}],address:r},[m,d,f]=await(0,c.J)(e,{allowFailure:!1,contracts:[{...u,functionName:"balanceOf",args:[a],chainId:n},{...u,functionName:"decimals",chainId:n},{...u,functionName:"symbol",chainId:n}]});return{decimals:d,formatted:(0,s.b)(m??"0",(0,l.W)(o??d)),symbol:f,value:m}}var m=a(45046);function d(e={}){return["balance",(0,m.OP)(e)]}var f=a(68792),p=a(13466),h=a(81622);function g(e={}){const{address:t,query:a={}}=e,c=(0,h.Z)(e),m=(0,p.x)({config:c}),g=function(e,t={}){return{async queryFn({queryKey:t}){const{address:a,scopeKey:c,...m}=t[1];if(!a)throw new Error("address is required");const d=await async function(e,t){const{address:a,blockNumber:c,blockTag:m,chainId:d,token:f,unit:p="ether"}=t;if(f)try{return await u(e,{balanceAddress:a,chainId:d,symbolType:"string",tokenAddress:f})}catch(t){if("ContractFunctionExecutionError"===t.name){const t=await u(e,{balanceAddress:a,chainId:d,symbolType:"bytes32",tokenAddress:f}),s=(0,n.rR)((0,i.f)(t.symbol,{dir:"right"}));return{...t,symbol:s}}throw t}const h=e.getClient({chainId:d}),g=(0,o.s)(h,r.s,"getBalance"),x=await g(c?{address:a,blockNumber:c}:{address:a,blockTag:m}),E=e.chains.find((e=>e.id===d))??h.chain;return{decimals:E.nativeCurrency.decimals,formatted:(0,s.b)(x,(0,l.W)(p)),symbol:E.nativeCurrency.symbol,value:x}}(e,{...m,address:a});return d??null},queryKey:d(t)}}(c,{...e,chainId:e.chainId??m}),x=Boolean(t&&(a.enabled??!0));return(0,f.aM)({...a,...g,enabled:x})}},28801:(e,t,a)=>{a.d(t,{d:()=>p});var n=a(99874),i=a(4592),s=a(17652),r=a(6716),o=a(89555),l=a(42075),c=a(45046);function u(e={}){return["token",(0,c.OP)(e)]}var m=a(68792),d=a(13466),f=a(81622);function p(e={}){const{address:t,query:a={}}=e,c=(0,f.Z)(e),p=(0,d.x)({config:c}),h=function(e,t={}){return{async queryFn({queryKey:t}){const{address:a,scopeKey:c,...u}=t[1];if(!a)throw new Error("address is required");return async function(e,t){const{address:a,chainId:c,formatUnits:u=18}=t;function m(e){return[{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:e}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:e}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]}]}try{const t={address:a,abi:m("string"),chainId:c},[s,r,d,f]=await(0,l.J)(e,{allowFailure:!0,contracts:[{...t,functionName:"decimals"},{...t,functionName:"name"},{...t,functionName:"symbol"},{...t,functionName:"totalSupply"}]});if(r.error instanceof n.uq)throw r.error;if(d.error instanceof n.uq)throw d.error;if(s.error)throw s.error;if(f.error)throw f.error;return{address:a,decimals:s.result,name:r.result,symbol:d.result,totalSupply:{formatted:(0,i.b)(f.result,(0,o.W)(u)),value:f.result}}}catch(t){if(t instanceof n.uq){const t={address:a,abi:m("bytes32"),chainId:c},[n,d,f,p]=await(0,l.J)(e,{allowFailure:!1,contracts:[{...t,functionName:"decimals"},{...t,functionName:"name"},{...t,functionName:"symbol"},{...t,functionName:"totalSupply"}]});return{address:a,decimals:n,name:(0,s.rR)((0,r.f)(d,{dir:"right"})),symbol:(0,s.rR)((0,r.f)(f,{dir:"right"})),totalSupply:{formatted:(0,i.b)(p,(0,o.W)(u)),value:p}}}throw t}}(e,{...u,address:a})},queryKey:u(t)}}(c,{...e,chainId:e.chainId??p}),g=Boolean(t&&(a.enabled??!0));return(0,m.aM)({...a,...h,enabled:g})}}}]);