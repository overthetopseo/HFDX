"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[5451],{95795:(e,t,a)=>{a.d(t,{t:()=>s});var r=a(66618),n=a(27618),o=a(84400),l=a(50653);const s=e=>{const{tip:t,children:a,tipClassName:s,contentClassName:i,mode:c="hover"}=e,[d,m]=(0,l.Z)(!1),[u,p]=(0,l.Z)(!0),g="click"===c,f=(0,o.useCallback)((()=>{m(!0)}),[m]),h=(0,o.useCallback)((()=>{m(!1)}),[m]),b=(0,o.useCallback)((()=>{p(!u),m(!d)}),[u,d,p,m]);return o.createElement(r.J2,{open:d},o.createElement(r.i9,null,o.createElement(r.yk,{side:"top",align:"start",className:(0,n.cn)("outline-none p-3 rounded order-form-popover-tooltip-content",i),onMouseEnter:g&&u?void 0:f,onMouseLeave:g&&u?void 0:h,onEscapeKeyDown:h,onInteractOutside:h},o.createElement(r.QH,null),o.createElement("div",{className:(0,n.cn)("flex item-center text-t-secondary text-caption whitespace-pre-line order-form-popover-tooltip-text",s)},t))),o.createElement(r.xo,{asChild:!0,onMouseEnter:g&&u?void 0:f,onMouseLeave:g&&u?void 0:h,onClick:g?b:f,className:"cursor-pointer"},a))}},37444:(e,t,a)=>{a.d(t,{W:()=>o});var r=a(27618),n=a(84400);const o=n.forwardRef((({activeIndex:e,options:t,canCancel:a,onChange:o,suffix:l,suffixClassName:s,optionClassName:i,...c},d)=>{const m=(0,n.useCallback)(((t,r)=>{t===e&&a?o?.(-1,void 0):o?.(t,r)}),[e,a,o]);return n.createElement("div",{...c,className:(0,r.cn)("flex h-6 gap-1 select-none",c.className),ref:d},t.map(((t,a)=>n.createElement("button",{type:"button",key:t.key,className:(0,r.cn)("flex cursor-pointer justify-center items-center flex-1 h-full rounded radio-option",e===a?"bg-border-line":"bg-interactive-interactive01",i),"data-state":e===a?"active":"inactive",onClick:()=>m(a,t.key)},n.createElement("span",{className:"text-caption1 radio-option-text "+(e===a?"text-t-primary":"text-t-third")},t.label)))),l?n.createElement("div",{className:(0,r.cn)("flex-1 h-full",s)},l):null)}))},32142:(e,t,a)=>{a.d(t,{e:()=>i});var r=a(11273),n=a(66618),o=a(27618),l=a(8301),s=a(84400);const i=e=>{const{tip:t,children:a,tipClassName:i,align:c="center"}=e,{isMobile:d,isIPad:m}=(0,r.F)(),[u,p]=(0,s.useState)(!1),g=(0,s.useCallback)((e=>{p(e)}),[]),f=(0,s.useCallback)((()=>{p(!0)}),[]);return d||m?s.createElement(n.J2,{onOpenChange:g,open:u},s.createElement(n.i9,null,s.createElement(n.yk,{side:"top",align:"start",className:"p-3 rounded order-form-popover-tooltip-content"},s.createElement(n.QH,{className:"fill-interactive-interactivePopup"}),s.createElement("div",{className:(0,o.cn)("flex item-center text-t-onColor text-caption whitespace-pre-line order-form-popover-tooltip-text",i)},t))),s.createElement(n.xo,{className:"cursor-pointer",asChild:!0},a)):s.createElement(l.u,{onOpenChange:g,open:u},s.createElement(l.NM,null,s.createElement(l._v,{side:"top",align:c,className:"p-3 rounded max-w-[376px] order-form-popover-tooltip-content"},s.createElement("div",{className:(0,o.cn)("flex item-center text-t-white text-caption whitespace-pre-line order-form-popover-tooltip-text",i)},t),s.createElement(l.Ce,null))),s.createElement(l.aJ,{asChild:!0,className:"cursor-pointer",onClick:f},a))}},51308:(e,t,a)=>{a.d(t,{W:()=>r});const r=(0,a(57556).Ue)()((e=>({currentPredictionPeriod:null,setCurrentPredictionPeriod:t=>e((e=>({...e,currentPredictionPeriod:t})))})))},10091:(e,t,a)=>{a.d(t,{Q:()=>r,n:()=>n});const r="All",n=[{labelKey:r,labelTextKey:"ticker-market-all",labelTextValue:r,filterFunc:()=>!0},{labelKey:"crypto",labelTextKey:"ticker-market-crypto",labelTextValue:"Crypto",filterFunc:e=>0===e.pairType},{labelKey:"forex",labelTextKey:"ticker-market-forex",labelTextValue:"Forex",filterFunc:e=>2===e.pairType},{labelKey:"commodities",labelTextKey:"ticker-market-commodities",labelTextValue:"Commodities",filterFunc:e=>4===e.pairType}]},24757:(e,t,a)=>{a.d(t,{Fe:()=>o,IU:()=>i,ak:()=>s,dU:()=>l,nW:()=>n,t_:()=>c});const r=[[750,{min:50,max:500}],[1e3,{min:50,max:300}]],n=()=>({min:50,max:500}),o=e=>{const t=r.find((t=>e<=t[0]));return t?.[1]??r[0][1]},l=[{key:"1",label:"+100%"},{key:"2",label:"+200%"},{key:"3",label:"+300%"},{key:"5",label:"+500%"}],s=[{key:"1",label:"+100%"},{key:"2",label:"+200%"},{key:"3",label:"+300%"},{key:"5",label:"+500%"}],i=[{key:"1",label:"+100%"},{key:"2",label:"+200%"},{key:"3",label:"+300%"}],c=[{key:"0",label:"None"},{key:"-0.1",label:"-10%"},{key:"-0.25",label:"-25%"},{key:"-.5",label:"-50%"},{key:"-.75",label:"-75%"}]},7061:(e,t,a)=>{a.d(t,{FB:()=>d,Y0:()=>c,e9:()=>i});var r=a(89663),n=a(17921);const o=2,l="-%",s=1,i=(e,t)=>{let a=new n.Z(e);const{positiveSign:r=!1,decimals:i=o,customNaNDisplay:c=l,allowNegative:d=!0,rm:m=s}=t||{};if(a.isNaN())return c;d||(a=a.abs());const u=a.shiftedBy(2).dp(i,m).toFormat({suffix:"%",decimalSeparator:"."}).toString();return r?`+${u}`:u},c=(e,t,a=3)=>(0,r.yd)(e,t).replace((0,r.rv)(t,a),"$&,"),d=(e,t,a=3)=>c(e,t,a).replace(/\.?[0,]+$/,"")},62866:(e,t,a)=>{a.d(t,{Z:()=>k});var r=a(27618),n=a(32232),o=a(57255),l=a(58395),s=a(89339),i=a(88349),c=a(84400);const d=e=>c.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{fillRule:"evenodd",d:"M20 3a1 1 0 00-1-1H9a1 1 0 000 2h8.5a.5.5 0 01.5.5V17a1 1 0 102 0V3zm-6.5 5a.5.5 0 01.5.5v11a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-11a.5.5 0 01.5-.5h7zM4 8a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V8z",clipRule:"evenodd",fill:"currentColor"})),m=e=>c.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("circle",{cx:"10",cy:"10",r:"7.5",stroke:"currentColor",strokeWidth:"1.667"}),c.createElement("path",{stroke:"currentColor",strokeWidth:"1.667",d:"m11.085 6.299 1.8-.033a.833.833 0 0 1 .85.848l-.034 1.8a.833.833 0 0 1-.244.575L9.49 13.457a.834.834 0 0 1-.574.244l-1.8.033a.833.833 0 0 1-.85-.848l.034-1.8a.833.833 0 0 1 .243-.575l3.97-3.969a.833.833 0 0 1 .573-.243Z"}),c.createElement("circle",{cx:"10",cy:"10",r:".833",fill:"currentColor"})),u=e=>c.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M13 22a1 1 0 100-2H5V4h8a1 1 0 100-2H4a1 1 0 00-1 1v18a1 1 0 001 1h9z"}),c.createElement("path",{d:"M16.707 7.707a1 1 0 00-1.414 1.414L17.17 11H8a1 1 0 100 2h9.171l-1.878 1.879a1 1 0 101.414 1.414l3.586-3.586a1 1 0 000-1.414l-3.586-3.586z"}));var p=a(70377),g=a(67284),f=a(72088),h=a(37747),b=a(15100),v=a(59712);const x=e=>e?.replace(/(.{4})(.*)(.{4})/g,"$1...$3"),y=()=>{const{address:e,connector:t}=(0,g.m)(),a=(0,c.useMemo)((()=>e),[e]);return c.createElement(c.Fragment,null,c.createElement("div",{className:(0,r.cn)("user-address",t?.icon&&"w-4 sm:w-auto")},t?.icon?c.createElement("img",{src:t?.icon,alt:t.name,className:"w-4 h-4 sm:hidden"}):c.createElement("span",{className:"sm:hidden"},x(a)),c.createElement("div",{className:"user-address hidden sm:block"},x(a))),c.createElement(n.q,{className:"h-4 w-4"}))},k=c.forwardRef((({getI18n:e,onBeforeConnect:t,className:a,sideOffset:n,appendChild:k,children:C,...E},N)=>{const{isConnected:w,address:P,chain:I}=(0,g.m)(),{onBeforeConnect:L}=(0,h.o6)(),{setWalletConnectModalVisibility:T}=(0,b.v)(),M=(0,c.useCallback)((async()=>{try{await(L?.()),await(t?.()),T(!0)}catch(e){v.error(e)}}),[L,t,T]),{disconnectAsync:F}=(0,f.q)(),[,S]=(0,p.Z)(),B=(0,c.useCallback)((async()=>{localStorage.removeItem("WEB3_CONNECT_CACHED_PROVIDER");try{await F()}catch(e){v.error(e)}}),[F]),D=(0,c.useCallback)((()=>{S(P??"");const t=(0,o.A)(c.createElement("div",{className:"flex justify-between"},e("dex-header-copy-account-success","Copy Successfully"),c.createElement("button",{type:"button",onClick:()=>o.A.dismiss(t),className:"hover:text-t-linkHover"},c.createElement(l.E,{className:"w-6 h-5"}))))}),[P,S,e]);return w?c.createElement(i.h_,null,c.createElement(i.$F,{asChild:!0},c.createElement(s.z,{type:"button",variant:"secondary",id:"userActionDropdownMenuButton",size:"sm",className:(0,r.cn)("text-body2 pl-2 pr-0 py-1.5 sm:px-2 hover:bg-interactive-interactive01Hover",a),...E,ref:N},c.createElement(y,null))),c.createElement(i.cq,null,c.createElement(i.AW,{className:"bg-interactive-interactiveBg min-w-[250px] data-[side=bottom]:rounded-b-lg data-[side=top]:rounded-t-lg shadow-elevation1",sideOffset:n??16},c.createElement(i.Xi,{className:"pt-3 px-4 pb-0 cursor-pointer [&:hover_svg]:text-t-linkHover mb-1",onSelect:D,asChild:!0},c.createElement("button",{type:"button",className:"w-full"},c.createElement("span",null,c.createElement("span",{className:"text-body2 text-t-third block text-left"},e("dex-header-my-wallet","My Wallet")),c.createElement("span",{className:"flex items-center gap-2"},c.createElement("span",{className:"text-headline3 text-t-primary"},x(P)),c.createElement(d,{className:"h-6 w-6 md:w-4 md:h-4 text-t-third"}))))),I?.blockExplorers?.default.url?c.createElement(i.Xi,{className:"p-4 gap-2 cursor-pointer hover:bg-interactive-interactiveBgHover",asChild:!0},c.createElement("a",{className:"text-subtitle2 [&:hover_svg]:text-t-linkHover",href:`${I?.blockExplorers?.default.url.replace(/\/$/,"")}/address/${P}`,target:"_blank",rel:"noreferrer"},c.createElement(m,{className:"h-6 w-6 text-t-third"}),e("dex-header-view-on-explorer","View on explorer"))):null,c.createElement(i.VD,{className:"my-1"}),c.createElement(i.Xi,{className:"p-4 flex gap-2 cursor-pointer [&:hover_svg]:text-t-linkHover hover:bg-interactive-interactiveBgHover",onSelect:B,asChild:!0},c.createElement("button",{type:"button",className:"w-full"},c.createElement(u,{className:"h-6 w-6 text-t-third"}),c.createElement("span",{className:"text-t-primary"},e("dex-header-disconnect",{defaultValue:"Disconnect"}))))))):c.createElement(s.z,{ref:N,type:"button","aria-label":e("dex-header-ConnectWallet",{defaultValue:"Connect Wallet"}),onClick:M,size:"sm",className:(0,r.cn)("text-body2 whitespace-nowrap",a),...E},C||c.createElement(c.Fragment,null,c.createElement("span",{className:"hidden sm:contents"},e("dex-header-ConnectWallet",{defaultValue:"Connect Wallet"})),c.createElement("span",{className:"contents sm:hidden"},e("dex-header-ConnectWallet-short",{defaultValue:"Connect"}))),k||null)}))},9125:(e,t,a)=>{a.d(t,{m:()=>s});var r=a(84400),n=a(66632),o=a(77884),l=a(4592);const s=e=>{const{data:t,isLoading:a,refetch:s,isError:i,queryKey:c}=(0,o.N)({allowFailure:!1,contracts:[{address:e.token,abi:n.Wo,functionName:"balanceOf",args:[e.address],chainId:e.chainId},{address:e.token,abi:n.Wo,functionName:"decimals",chainId:e.chainId},{address:e.token,abi:n.Wo,functionName:"symbol",chainId:e.chainId}],scopeKey:e.scopeKey,query:e.query}),[d,m,u]=t||[];return(0,r.useMemo)((()=>({data:d,decimals:m,symbol:u,formatted:(0,l.b)(d??0n,m??0),isLoading:a,refetch:s,isError:i,queryKey:c})),[d,m,u,a,s,i,c])}},30610:(e,t,a)=>{a.d(t,{Qz:()=>s,dy:()=>l,rd:()=>i,sc:()=>d});var r=a(84400),n=a(60686),o=a(27618);const l=({shouldScaleBackground:e=!0,...t})=>r.createElement(n.d.Root,{shouldScaleBackground:e,...t});l.displayName="Drawer";const s=n.d.Trigger,i=n.d.Portal,c=(n.d.Close,r.forwardRef((({className:e,...t},a)=>r.createElement(n.d.Overlay,{ref:a,className:(0,o.cn)("fixed inset-0 z-dialogOverlay bg-overlay",e),...t}))));c.displayName=n.d.Overlay.displayName;const d=r.forwardRef((({className:e,children:t,overlayClassName:a,handleClassName:l,...s},d)=>r.createElement(i,null,r.createElement(c,{className:a}),r.createElement(n.d.Content,{ref:d,className:(0,o.cn)("drawer fixed inset-x-0 bottom-0 z-dialog mt-24 flex h-auto flex-col rounded-t-[10px] border bg-interactive-interactiveBg pt-3",e),...s},r.createElement("div",{className:(0,o.cn)("drawer-bar mx-auto h-1 w-16 rounded-full bg-border-lineSubtle mb-4 cursor-grab active:cursor-grabbing",l)}),t))));d.displayName="DrawerContent",r.forwardRef((({className:e,...t},a)=>r.createElement(n.d.Title,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}))).displayName=n.d.Title.displayName,r.forwardRef((({className:e,...t},a)=>r.createElement(n.d.Description,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}))).displayName=n.d.Description.displayName},88349:(e,t,a)=>{a.d(t,{$F:()=>d,AW:()=>u,VD:()=>g,Xi:()=>p,cq:()=>m,h_:()=>c});var r=a(58022),n=a(1596),o=a(30389),l=a(97330),s=a(84400),i=a(27618);const c=r.fC,d=r.xz,m=(r.ZA,r.Uv);r.Tr,r.Ee,s.forwardRef((({className:e,inset:t,children:a,...o},l)=>s.createElement(r.fF,{ref:l,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...o},a,s.createElement(n.Z,{className:"ml-auto h-4 w-4"})))).displayName=r.fF.displayName,s.forwardRef((({className:e,...t},a)=>s.createElement(r.tu,{ref:a,className:(0,i.cn)("z-dropdown min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",e),...t}))).displayName=r.tu.displayName;const u=s.forwardRef((({className:e,sideOffset:t=4,...a},n)=>s.createElement(r.Uv,null,s.createElement(r.VY,{ref:n,forceMount:!0,disableOutsidePointerEvents:!0,sideOffset:t,className:(0,i.cn)("z-dropdown min-w-[8rem] overflow-hidden animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}))));u.displayName=r.VY.displayName;const p=s.forwardRef((({className:e,inset:t,...a},n)=>s.createElement(r.ck,{ref:n,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...a})));p.displayName=r.ck.displayName,s.forwardRef((({className:e,children:t,checked:a,...n},l)=>s.createElement(r.oC,{ref:l,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...n},s.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},s.createElement(r.wU,null,s.createElement(o.Z,{className:"h-4 w-4"}))),t))).displayName=r.oC.displayName,s.forwardRef((({className:e,children:t,...a},n)=>s.createElement(r.Rk,{ref:n,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a},s.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},s.createElement(r.wU,null,s.createElement(l.Z,{className:"h-2 w-2 fill-current"}))),t))).displayName=r.Rk.displayName,s.forwardRef((({className:e,inset:t,...a},n)=>s.createElement(r.__,{ref:n,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a}))).displayName=r.__.displayName;const g=s.forwardRef((({className:e,...t},a)=>s.createElement(r.Z0,{ref:a,className:(0,i.cn)("-mx-1 my-1 h-px bg-border-line",e),...t})));g.displayName=r.Z0.displayName},24391:(e,t,a)=>{a.d(t,{l:()=>n});var r=a(84400);const n=e=>r.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{fillRule:"evenodd",d:"M6.628 8.775l.159-1.988 1.988-.159a3 3 0 001.707-.707L12 4.628l1.518 1.293a3 3 0 001.707.707l1.988.159.159 1.988a3 3 0 00.707 1.707L19.372 12l-1.293 1.518a3 3 0 00-.707 1.707l-.159 1.988-1.988.159a3 3 0 00-1.707.707L12 19.372l-1.518-1.293a3 3 0 00-1.707-.707l-1.988-.159-.159-1.988a3 3 0 00-.707-1.707L4.628 12l1.293-1.518a3 3 0 00.707-1.707zM4.861 5.778a1 1 0 01.917-.917l2.838-.226a1 1 0 00.569-.236l2.166-1.846a1 1 0 011.298 0l2.166 1.846a1 1 0 00.57.236l2.837.226a1 1 0 01.917.917l.226 2.838a1 1 0 00.236.569l1.846 2.166a1 1 0 010 1.298l-1.846 2.166a1 1 0 00-.236.57l-.226 2.837a1 1 0 01-.917.917l-2.838.226a1 1 0 00-.569.236l-2.166 1.846a1 1 0 01-1.298 0l-2.166-1.846a1 1 0 00-.57-.236l-2.837-.226a1 1 0 01-.917-.917l-.226-2.838a1 1 0 00-.236-.569L2.553 12.65a1 1 0 010-1.298l1.846-2.166a1 1 0 00.236-.57l.226-2.837zM13 9a1 1 0 10-2 0v3a1 1 0 102 0V9zm0 6a1 1 0 10-2 0 1 1 0 002 0z",clipRule:"evenodd"}))},32232:(e,t,a)=>{a.d(t,{q:()=>n});var r=a(84400);const n=e=>r.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{d:"M14.5 10.29a1 1 0 011 1v.353a1 1 0 01-.273.686l-2.5 2.65a1 1 0 01-1.454 0l-2.5-2.65a1 1 0 01-.273-.686v-.353a1 1 0 011-1h5z"}))},24973:(e,t,a)=>{a.d(t,{v:()=>n});var r=a(84400);const n=e=>r.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{d:"M17.879 7.707a1 1 0 111.414 1.414l-6.586 6.586a1 1 0 01-1.414 0L4.707 9.121a1 1 0 111.415-1.414L12 13.586l5.879-5.879z"}))},94043:(e,t,a)=>{a.d(t,{b:()=>n});var r=a(84400);const n=e=>r.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0147 14.2678C9.6364 14.2678 9.32975 13.9611 9.32975 13.5828V13.2599C8.88334 13.1707 8.45921 13.0305 8.11362 12.8593C7.7273 12.668 7.70961 12.1808 7.99564 11.8583C8.21607 11.6097 8.61862 11.6027 8.91562 11.7516C9.11384 11.8509 9.33284 11.93 9.53523 11.9781V10.6572C8.27299 10.3441 7.5 9.68852 7.5 8.58284C7.5 7.49674 8.23386 6.87052 9.43738 6.77267V6.51337C9.43738 6.1378 9.74184 5.83333 10.1174 5.83333C10.493 5.83333 10.7975 6.1378 10.7975 6.51337V6.84116C11.0945 6.90514 11.3745 6.99473 11.6234 7.10794C12.064 7.30831 12.0816 7.86427 11.7574 8.22369C11.5813 8.41898 11.2739 8.42577 11.0419 8.3019C10.8924 8.22212 10.7275 8.15683 10.5626 8.11318V9.35584C11.7074 9.66895 12.5 10.2463 12.5 11.3324C12.5 12.2326 11.9618 13.1425 10.6996 13.3187V13.5828C10.6996 13.9611 10.393 14.2678 10.0147 14.2678ZM9.14384 8.63177C9.14384 8.84703 9.25147 8.98402 9.58415 9.12101V8.09361C9.22211 8.18167 9.14384 8.44586 9.14384 8.63177ZM10.5528 10.8823V11.9879C10.8366 11.8803 10.8953 11.6553 10.8953 11.4596C10.8953 11.2052 10.7877 11.0095 10.5528 10.8823Z",fill:"currentColor"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.89261 5.28596C7.1662 4.01237 8.23492 3.33333 9.99997 3.33333C13.4002 3.33333 16.2059 5.87893 16.6153 9.16832C16.6721 9.62504 17.0397 10 17.5 10C17.9602 10 18.3377 9.62583 18.2923 9.16784C17.8747 4.95617 14.3215 1.66667 9.99997 1.66667C7.62288 1.66667 6.15498 2.66656 4.7141 4.10744L3.33332 5.48822V3.33333C3.33332 2.8731 2.96023 2.5 2.49999 2.5C2.03975 2.5 1.66666 2.8731 1.66666 3.33334V7.33333C1.66666 7.88562 2.11437 8.33333 2.66666 8.33333H6.66666C7.12689 8.33333 7.49999 7.96024 7.49999 7.5C7.49999 7.03976 7.12689 6.66667 6.66666 6.66667L4.5119 6.66667L5.89261 5.28596Z",fill:"currentColor"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.1074 14.714C12.8338 15.9876 11.7651 16.6667 10 16.6667C6.59976 16.6667 3.79407 14.1211 3.38472 10.8317C3.32788 10.375 2.96025 10 2.50001 10C2.03978 10 1.6623 10.3742 1.70771 10.8322C2.12527 15.0438 5.67849 18.3333 10 18.3333C12.3771 18.3333 13.845 17.3334 15.2859 15.8926L16.6667 14.5118V16.6667C16.6667 17.1269 17.0398 17.5 17.5 17.5C17.9602 17.5 18.3333 17.1269 18.3333 16.6667V12.6667C18.3333 12.1144 17.8856 11.6667 17.3333 11.6667H13.3333C12.8731 11.6667 12.5 12.0398 12.5 12.5C12.5 12.9602 12.8731 13.3333 13.3333 13.3333H15.4881L14.1074 14.714Z",fill:"currentColor"}))},63256:(e,t,a)=>{a.d(t,{r:()=>n});var r=a(84400);const n=e=>r.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{fillRule:"evenodd",d:"M11 5a6 6 0 110 12 6 6 0 010-12zm8 6a8 8 0 10-3.094 6.32l3.973 3.973a1 1 0 001.414-1.414l-3.973-3.973A7.965 7.965 0 0019 11z",clipRule:"evenodd"}))},43693:(e,t,a)=>{a.d(t,{G:()=>l});var r=a(10322),n=a(84400),o=a(87685);const l=({href:e="",onClick:t,children:a,...l})=>{const s=(0,o.d0)(),i=(0,n.useCallback)((a=>{a.preventDefault(),t&&t(a);const r=e.match(/\/([\dA-Z]+)/)?.[1];s&&r&&s({isBlank:!1,stateSymbol:r})}),[s,e,t]);return(0,r.jsx)("a",{href:e,onClick:i,...l,children:a})}},15451:(e,t,a)=>{a.r(t),a.d(t,{default:()=>hr});var r=a(10322),n=a(78659),o=a(95386),l=a(68575),s=a(27618),i=a(41008),c=a(67284),d=a(37747),m=a(13466),u=a(73847),p=a(84400),g=a(58211),f=a(50653),h=a(89339),b=a(33740),v=a(76933),x=a(92518),y=a(44679),k=a(11273);const C=e=>p.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M8.86193 11.2525C8.60158 11.5129 8.60158 11.935 8.86193 12.1954C9.12228 12.4557 9.54439 12.4557 9.80474 12.1954L13.2929 8.7072C13.6834 8.31667 13.6834 7.68351 13.2929 7.29298L9.80469 3.80478C9.54434 3.54443 9.12223 3.54443 8.86188 3.80478C8.60153 4.06513 8.60153 4.48724 8.86188 4.74759L11.4478 7.33347L2.66684 7.33348C2.29865 7.33348 2.00017 7.63195 2.00017 8.00014C2.00017 8.36833 2.29865 8.66681 2.66684 8.66681L11.4477 8.66681L8.86193 11.2525Z",fill:"white"})),E=e=>p.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 21 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M20.9409 17.6399C21.0011 17.7444 20.9282 17.875 20.8078 17.875H16.2143C16.0781 17.875 16.0367 17.7525 16.0581 17.6972C16.0719 17.6613 16.1057 17.6281 16.1614 17.6122C16.217 17.5963 16.3427 17.5973 16.3427 17.5973C16.6118 17.6122 16.8568 17.6262 17.0533 17.4397C17.2497 17.2531 17.3531 17.0251 17.3635 16.7556C17.3738 16.4862 17.3194 16.2546 17.1885 15.9721C17.1663 15.9244 17.1364 15.8683 17.1092 15.8194C17.1015 15.8061 17.0939 15.7928 17.0863 15.7795C17.071 15.7529 17.0557 15.7263 17.0402 15.6998C17.0169 15.6601 9.89568 3.30395 9.89568 3.30395L2.74857 15.7043C2.74857 15.7043 2.71079 15.7682 2.6833 15.8175C2.65581 15.8668 2.62535 15.9238 2.60294 15.9721C2.47203 16.2546 2.41759 16.4862 2.42793 16.7556C2.43827 17.0251 2.54168 17.2531 2.73814 17.4397C2.9346 17.6262 3.18335 17.6605 3.44185 17.6605H3.54038L3.57454 17.6643C3.616 17.6689 3.63437 17.7008 3.64737 17.7458C3.67044 17.8256 3.58557 17.875 3.54038 17.875L0.99405 17.875C0.87367 17.875 0.798447 17.7444 0.858666 17.6399L5.51903 9.55412L5.51784 9.55202L5.60298 9.40422L5.60419 9.40636L10.7644 0.453322C10.8246 0.348892 10.975 0.348893 11.0352 0.453323L15.4126 8.04822L16.4842 6.3056C16.502 6.27662 16.5336 6.25896 16.5675 6.25896C16.6424 6.25896 16.6896 6.33983 16.6528 6.40524L15.5732 8.32682L20.9409 17.6399Z",fill:"black"}),p.createElement("path",{d:"M3.71456 6.35234C3.71456 6.35234 3.71682 6.25093 3.7678 6.24346C3.79777 6.23907 3.82735 6.2536 3.84224 6.28004L5.261 8.79144L5.07827 9.10813L3.71456 6.35234Z",fill:"black"}),p.createElement("path",{d:"M6.33924 10.7134L6.16878 11.0097L9.90017 17.6331C9.96006 17.7393 10.2848 17.7392 10.3445 17.6329L13.8372 11.4166L13.5974 11.0002L9.96595 16.9056C9.96595 16.9056 9.92613 16.9748 9.89928 16.9748C9.86779 16.9748 9.83061 16.9056 9.83061 16.9056L6.33924 10.7134Z",fill:"black"}),p.createElement("path",{d:"M9.81656 6.86238C9.81656 8.7518 9.12514 10.0531 7.70265 10.0531C7.70246 10.0696 7.70235 10.0862 7.70233 10.1027C7.70233 10.1098 7.70233 10.1168 7.70235 10.1239C7.70233 10.131 7.70233 10.138 7.70233 10.1451C7.70235 10.1616 7.70246 10.1782 7.70265 10.1947C9.12514 10.1947 9.81656 11.496 9.81656 13.3854H9.96595C9.96595 11.496 10.6574 10.1947 12.0799 10.1947C12.0801 10.1782 12.0802 10.1616 12.0802 10.1451V10.1398C12.0802 10.1345 12.0802 10.1292 12.0802 10.1239L12.0802 10.1157L12.0802 10.1027C12.0802 10.0862 12.0801 10.0696 12.0799 10.0531C10.6574 10.0531 9.96595 8.7518 9.96595 6.86238H9.81656Z",fill:"black"})),N=e=>p.createElement("svg",{width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("rect",{y:"0.599976",width:"24",height:"24",rx:"4",fill:"#F8DFC1"}),p.createElement("path",{d:"M20.6065 19.1484C20.6582 19.238 20.5956 19.3499 20.4924 19.3499H16.5551C16.4384 19.3499 16.4029 19.2449 16.4212 19.1975C16.4331 19.1668 16.4621 19.1383 16.5098 19.1247C16.5575 19.111 16.6652 19.112 16.6652 19.112C16.8958 19.1247 17.1059 19.1367 17.2743 18.9768C17.4426 18.8169 17.5313 18.6215 17.5401 18.3905C17.549 18.1595 17.5024 17.961 17.3901 17.7189C17.3712 17.678 17.3455 17.6299 17.3222 17.588C17.3156 17.5766 17.3091 17.5652 17.3026 17.5538C17.2895 17.531 17.2764 17.5082 17.2631 17.4855C17.2431 17.4514 11.1392 6.86048 11.1392 6.86048L5.01309 17.4893C5.01309 17.4893 4.98071 17.5441 4.95715 17.5864C4.93358 17.6286 4.90747 17.6774 4.88827 17.7189C4.77605 17.961 4.7294 18.1595 4.73826 18.3905C4.74712 18.6215 4.83575 18.8169 5.00415 18.9768C5.17254 19.1367 5.38576 19.1661 5.60733 19.1661H5.69179L5.72106 19.1693C5.7566 19.1733 5.77235 19.2007 5.78349 19.2392C5.80327 19.3076 5.73052 19.3499 5.69179 19.3499L3.50922 19.3499C3.40603 19.3499 3.34156 19.238 3.39317 19.1484L7.38777 12.2178L7.38675 12.216L7.45973 12.0893L7.46076 12.0911L11.8838 4.41708C11.9354 4.32757 12.0643 4.32757 12.1159 4.41708L15.868 10.927L16.7865 9.43332C16.8018 9.40847 16.8288 9.39334 16.8579 9.39334C16.9221 9.39334 16.9625 9.46266 16.931 9.51872L16.0056 11.1658L20.6065 19.1484Z",fill:"black"}),p.createElement("path",{d:"M5.84108 9.47338C5.84108 9.47338 5.84302 9.38645 5.88672 9.38005C5.91241 9.37629 5.93776 9.38875 5.95053 9.41141L7.16661 11.564L7.00998 11.8355L5.84108 9.47338Z",fill:"black"}),p.createElement("path",{d:"M8.09081 13.2115L7.9447 13.4654L11.143 19.1426C11.1944 19.2337 11.4727 19.2336 11.5239 19.1424L14.5176 13.8141L14.3121 13.4572L11.1994 18.519C11.1994 18.519 11.1653 18.5783 11.1423 18.5783C11.1153 18.5783 11.0834 18.519 11.0834 18.519L8.09081 13.2115Z",fill:"black"}),p.createElement("path",{d:"M11.0714 9.91055C11.0714 11.5301 10.4787 12.6455 9.25944 12.6455C9.25928 12.6596 9.25919 12.6738 9.25917 12.688C9.25917 12.694 9.25917 12.7001 9.25919 12.7062C9.25917 12.7122 9.25917 12.7183 9.25917 12.7243C9.25919 12.7385 9.25928 12.7527 9.25944 12.7668C10.4787 12.7668 11.0714 13.8822 11.0714 15.5017H11.1994C11.1994 13.8822 11.7921 12.7668 13.0113 12.7668C13.0115 12.7527 13.0116 12.7385 13.0116 12.7243V12.7198C13.0116 12.7153 13.0116 12.7107 13.0116 12.7062L13.0116 12.6991L13.0116 12.688C13.0116 12.6738 13.0115 12.6596 13.0113 12.6455C11.7921 12.6455 11.1994 11.5301 11.1994 9.91055H11.0714Z",fill:"black"})),w=e=>p.createElement("svg",{width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M12 10.6197L17.9497 4.66997C18.3403 4.27944 18.9734 4.27944 19.364 4.66997C19.7545 5.06049 19.7545 5.69366 19.364 6.08418L13.4142 12.0339L19.364 17.9837C19.7545 18.3742 19.7545 19.0074 19.364 19.3979C18.9734 19.7884 18.3403 19.7884 17.9497 19.3979L12 13.4481L6.05025 19.3979C5.65972 19.7884 5.02656 19.7884 4.63603 19.3979C4.24551 19.0074 4.24551 18.3742 4.63603 17.9837L10.5858 12.0339L4.63603 6.08418C4.24551 5.69366 4.24551 5.0605 4.63603 4.66997C5.02656 4.27945 5.65972 4.27945 6.05025 4.66997L12 10.6197Z",fill:"currentColor"})),P=({getI18n:e,Link:t,brand:a,onClose:r})=>{const n=location.pathname.split("").reduce(((e,t,a)=>e.end||"/"===t&&0===a?e:"/"===t&&a>0?{...e,end:!0}:{...e,locale:e.locale+t}),{locale:"",end:!1}).locale||"en";return p.createElement("div",{className:"flex flex-col gap-4 items-center"},p.createElement("div",{className:"flex flex-row justify-end w-full -mb-4"},p.createElement(w,{className:"w-6 h-6 relative cursor-pointer text-t-third",onClick:r})),p.createElement("div",{className:"w-14 h-14 rounded-full bg-[#F4D5B1] flex items-center justify-center"},p.createElement(E,{className:"w-[33px] h-[29px] relative -top-[2px]"})),p.createElement("div",{className:"flex flex-col gap-4 mb-2"},p.createElement("div",{className:"text-headline6 text-t-primary text-center"},e("astherus-airdrop-challenge","Astherus Challenge")),p.createElement("div",{className:"flex flex-col justify-start text-body2 text-t-third gap-2"},p.createElement("span",null,p.createElement(x.c,{t:e,i18nKey:"astherus-airdrop-comment-s1-1",defaults:"Join the Astherus Stage 1 Points Program: Spectra to get the upcoming <highlight>$ASS</highlight> token airdrop. Earn Rh points when you trade onchain perps on Astherus (Not applicable for APX trades). Earn Au points when you mint & hold on Astherus.",components:{highlight:p.createElement("span",{className:"text-t-secondary"})}})),p.createElement("span",null,p.createElement(x.c,{t:e,i18nKey:"astherus-airdrop-comment-s1-2",defaults:"Bind an invite code or invite friends to get up to 1.2x team boost! <Link>Learn More.</Link>",components:{Link:p.createElement("a",{className:"text-t-link hover:text-t-linkHover",target:"_blank",href:"https://docs.asterdex.com/stage-1-spectra/referral-bonus-and-team-boosts",rel:"noreferrer"})}})))),p.createElement("div",{className:"flex flex-col gap-3 w-full items-center"},p.createElement(t,{className:"w-full",href:`https://www.astherus.finance/${n}/stage1`},p.createElement(h.z,{className:(0,s.cn)("text-subtitle2 w-full md:h-12 text-t-white","Apx"===a&&"md:h-10")},e("astherus-airdrop-gotoAstherus","Go to Astherus"))),p.createElement(t,{className:(0,s.cn)("text-center text-t-link hover:text-t-linkHover text-subtitle2","Apx"===a?"text-t-link hover:text-t-linkHover":"text-t-secondary dark:text-t-third"),href:"https://docs.asterdex.com/stage-1-spectra/astherus-spectra-stage-1"},e("astherus-airdrop-campaignRules","Campaign rules"))))},I=e=>{const{open:t,setOpen:a}=e,{isMobile:r}=(0,k.F)();return r?p.createElement(b.yo,{open:t,onOpenChange:a},p.createElement(b.ue,{side:"bottom",className:"w-full border-none p-4 rounded-t bg-interactive-interactiveBg shadow-elevation3",onPointerDownOutside:()=>a(!1)},p.createElement(P,{...e,onClose:()=>a(!1)}))):p.createElement(v.Vq,{open:t,onOpenChange:a},p.createElement(v.cZ,{className:"md:p-6 isolate md:w-[400px]"},p.createElement(P,{...e,onClose:()=>a(!1)})))},L=e=>{const[t,a]=(0,y.Z)(!1),{getI18n:r}=e;return p.createElement(p.Fragment,null,p.createElement(I,{open:t,setOpen:a,...e}),p.createElement("div",{className:"flex flex-row w-full items-center justify-between bg-interactive-bg border border-border-line p-2 gap-2 rounded relative overflow-hidden cursor-pointer",onClick:()=>a(!0)},p.createElement("div",{className:"flex flex-row items-center gap-2"},p.createElement(N,null),p.createElement("div",{className:"text-subtitle2 text-t-primary"},r("astherus-airdrop-tradeToEarn","Trade to Earn Ass Airdrop"))),p.createElement(C,{className:"text-t-primary"})))};var T=a(47909);const M=(new class{constructor(){this.map=new Map,this.kList=[]}initial(e){return this.kList=e,this.kList.forEach((e=>this.map.set(e,"default"))),this}reset(){return this.kList.forEach((e=>this.map.set(e,"default"))),this}set(e,t){return this.map.set(e,t),this}delete(e){return this.map.delete(e),this}toObject(){return Object.fromEntries(this.map)}}).initial(["tp","initial_margin","leverage","sl","slippage"]);var F=a(10091),S=a(63925),B=a(4592),D=a(98943),A=a(59712);const V=({collateral:e,leverage:t,indexPrice:a})=>e*t*(0,u.f)(a||"1")/10n**18n,q=({orderType:e,openFee:t,executionFee:a,collateral:r})=>{if("limit"===e)return r-t-a;if("market"===e)return r-t;throw new Error(`[function getInitialMarin]: Unsupported orderType ${e}`)},R=e=>(0,S.d)((0,u.f)(e)/10000n),z=e=>e?BigInt(e):0n,U=e=>BigInt(e||1),$=({leverageMargins:e,size:t})=>{const a=Array.from(e).sort(((e,t)=>e.notionalUsd===t.notionalUsd?0:e.notionalUsd>t.notionalUsd?1:-1));return a.find((e=>t<=e.notionalUsd))??a[a.length-1]??{}},O=({leverageMargins:e,size:t})=>{const a=$({leverageMargins:e,size:t});return BigInt(a?.initialLostP)},_=e=>e*10n**18n,W=e=>e/10n**18n,H=({longQty:e,marketPrice:t})=>e*t,Z=({shortQty:e,marketPrice:t})=>e*t,Q=({isLong:e,size:t,longQty:a,shortQty:r,slippageConfig:n,marketPrice:o})=>{if(n?.slippageType===D.cY.FIXED)return(0,u.f)(`${e?n?.slippageLongP:n?.slippageShortP}`)/10000n;if(n?.slippageType===D.cY.ONE_PERCENT_DEPTH){if(!t)return 0n;if(0n===n.onePercentDepthAboveUsd)return 0n;const l=o,s=e?_(W(100000000n*a*l)+t)/n.onePercentDepthAboveUsd:_(W(100000000n*r*l)+t)/n.onePercentDepthBelowUsd;return(0,u.f)(""+Math.ceil(1e4*Number((0,S.d)(s)))/1e4)}if(n?.slippageType===D.cY.NET_POSITION){if(!t||!a)return 0n;const l=H({longQty:a*10n**8n,marketPrice:o})/10n**18n,s=Z({shortQty:r*10n**8n,marketPrice:o})/10n**18n,i=e?n.onePercentDepthAboveUsd:n.onePercentDepthBelowUsd,c=BigInt(e?n?.slippageLongP:n?.slippageShortP)*10n**14n,d=(e?t-s+l:t-l+s)*10n**18n/i;return d>c?d:c}if(n?.slippageType===D.cY.DEGEN){if(!t||!a)return 0n;const l=H({longQty:a*10n**8n,marketPrice:o})/10n**18n,s=Z({shortQty:r*10n**8n,marketPrice:o})/10n**18n,i=e?n.onePercentDepthAboveUsd:n.onePercentDepthBelowUsd,c=((e?t+l:t+s)-(e?n?.longThresholdUsd:n?.shortThresholdUsd))*10n**18n/i;return c>0n?c:0n}return 0n},G=({limitPrice:e,isLong:t,marketPrice:a,spread:r,orderType:n})=>{if("limit"===n)return e;if("market"===n)return t?a*(10n**18n+r)/10n**18n:a*(10n**18n-r)/10n**18n;throw new Error(`[functionName getEntryPrice] unsupported order type ${n}`)},K=({size:e,entryPrice:t})=>0n===t?0n:e*10n**18n/t,j=e=>"true"===e,Y=({entryPrice:e,isLong:t,returnOfInvestmentRate:a,leverage:r})=>{const n=18n,o=10n**(n-2n),l=10n**n;return e*(t?l+BigInt(parseInt(""+100*a,10))*o/r:l-BigInt(parseInt(""+100*a,10))*o/r)/l},J=({qty:e,entryPrice:t,tpSlPrice:a,isLong:r})=>r?(a-t)*e/10n**18n:(t-a)*e/10n**18n,X=({pnl:e,leverage:t,qty:a,entryPrice:r})=>a*r===0n?0n:e*t*10n**18n/(a*r/10n**18n)*100n,ee=({entryPrice:e,slippage:t,isLong:a})=>{try{const r=(0,u.f)(`${t}`),n=(0,u.f)("100"),o=(a?e*(n+r):e*(n-r))/100n;return(0,B.b)(o,36)}catch(e){throw A.log("Error when parsing slippage",t),e}},te=({spread:e,limitPrice:t,isLong:a})=>a?t*((0,u.f)("1")-e)/10n**18n:t*((0,u.f)("1")+e)/10n**18n,ae=({isLong:e,collateral:t,qty:a,maxOi:r,marketPrice:n,indexPrice:o,leverage:l})=>{if(0n===t||0n===l)return!1;const s=(e?H({longQty:a*10n**8n,marketPrice:n}):Z({shortQty:a*10n**8n,marketPrice:n}))/10n**18n,i=V({collateral:t,leverage:l,indexPrice:o});return i+s!==0n&&r&&i+s>r},re=({pairBaseConfig:e,symbol:t,useWebsocketSymbolMarkPrice:a,useMarketInfo:r})=>{const{field:n}=(0,g.bc)({name:"acceptablePrice",shouldUnregister:!0,defaultValue:""}),{control:o}=(0,g.Gc)(),[l,s,i,c,d,m,f]=(0,g.qo)({name:["slippage","amountIn","isLong","leverage","orderType","pairBase","indexPrice"],control:o}),h=a(t,{enabled:"market"===d}),b=r(m),v=(0,u.f)(s||"0"),x=(0,u.f)(h.close??"0"),y=j(i),k=U(c),C=b?.data?.longQty,E=b?.data?.shortQty,N=V({collateral:v,leverage:k,indexPrice:f}),w=(0,u.f)("0"),P=Q({collateral:v,isLong:y,leverage:k,marketPrice:x,slippageConfig:e?.slippageConfig,longQty:C,shortQty:E,size:N}),I=G({isLong:y,orderType:d,limitPrice:w,marketPrice:x,spread:P}),L=ee({entryPrice:I,slippage:l||0,isLong:y});return(0,p.useEffect)((()=>{n.value!==`${L}`&&n.onChange(`${L}`)}),[L,n]),(0,p.useEffect)((()=>()=>{n.onChange("")}),[]),p.createElement(p.Fragment,null)};var ne=a(57255),oe=a(32232);const le=e=>p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",...e},p.createElement("path",{fill:"currentColor",d:"M5.333 2.667A.667.667 0 0 0 4.667 2h-2A.667.667 0 0 0 2 2.667v10.666c0 .368.298.667.667.667h10.666a.667.667 0 0 0 .667-.667v-2a.667.667 0 0 0-1.333 0v1.334H3.333V3.333h1.334a.667.667 0 0 0 .666-.666Z"}),p.createElement("path",{fill:"currentColor",d:"M8.667 2a.667.667 0 1 0 0 1.333h3.057L5.138 9.92a.667.667 0 1 0 .943.943l6.586-6.586v3.057a.667.667 0 1 0 1.334 0V2.667A.667.667 0 0 0 13.333 2H8.667Z"}));var se=a(9125),ie=a(69185),ce=a(65413),de=a(79210),me=a(46028),ue=a(71456);const pe=({getI18n:e,staticHost:t})=>{const a=(0,m.x)(),{isConnected:r,address:n}=(0,c.m)(),[o,l]=(0,ue.Z)("arbitrum-faucet-dialog",!1),[s,i]=(0,y.Z)(o??!1),{data:d,decimals:u}=(0,se.m)({address:n,chainId:ie.Z.id,token:"0xb444362CB447f4A703596F2a26A98331A43432ce",query:{enabled:Boolean(r)}}),g=(0,p.useCallback)((()=>{l(!1),i(!1)}),[l,i]),f=(0,p.useCallback)((()=>{i(!0)}),[i]),b=void 0!==d&&d<(0,ce.v)("50",u??0),{writeContractAsync:x,data:k,isPending:C}=(0,de.S)(),{isLoading:E}=(0,me.A)({hash:k}),N=(0,p.useCallback)((async()=>{if(b)try{await x({address:"0x615a54c1392748c11823bb6db44877a09c83e16d",abi:[{inputs:[],name:"claimTestnetTokens",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"claimTestnetTokens"})}catch(e){ne.A.error(e?.reason??e.error??e?.shortMessage??e?.message)}}),[x,b]);return a&&a!==ie.Z.id?null:p.createElement("div",{className:"bg-interactive-bg border border-border-line py-3 px-2 rounded mb-3 relative overflow-hidden"},p.createElement("span",{className:"text-caption2 text-t-white rounded-bl rounded-tr absolute top-0 right-0 px-1 py-0.5 bg-interactive-primary"},e("orderForm-faucet-testnet","Testnet")),p.createElement("p",{className:"text-caption1 text-t-third flex items-center"},e("orderForm-faucet-title","Get tokens for Arbitrum Sepolia Testnet"),":"),p.createElement("div",{className:"mt-2 flex gap-4 justify-between"},p.createElement("p",{className:"text-t-third text-caption1 flex items-center"},e("orderForm-faucet-get-token","Get tokens")),p.createElement("div",{className:"flex"},b?p.createElement("button",{type:"button",className:"flex items-center text-caption1",onClick:N,disabled:E||C},p.createElement("img",{width:20,height:20,className:"w-5 h-5 mr-1",loading:"lazy",decoding:"async",src:`${t}/static/images/futures/assets/usdt.svg`}),e("orderForm-faucet-get-usdt","Get USDT"),p.createElement(oe.q,{className:"w-4 h-4 -rotate-90"})):null,p.createElement("button",{type:"button",className:"flex items-center text-caption1",onClick:f},p.createElement("img",{loading:"lazy",decoding:"async",width:20,height:20,className:"w-5 h-5 mr-1",src:`${t}/static/images/wallet/arb-logo.svg`}),e("orderForm-faucet-get-gas-token","Get AGOR"),p.createElement(oe.q,{className:"w-4 h-4 -rotate-90"})))),p.createElement(v.Vq,{open:s},p.createElement(v.cZ,{className:"w-full max-w-[300px] p-6"},p.createElement("img",{width:60,height:60,className:"w-[3.75rem] h-[3.75rem] mx-auto mb-4 block",loading:"lazy",decoding:"async",src:`${t}/static/images/futures/assets/docs-dark.svg`}),p.createElement("h2",{className:"text-subtitle1 text-t-primary mb-2 text-center"},e("orderForm-faucet-dialog-title","How to get gas token AGOR?")),p.createElement("p",{className:"text-body2 mb-2 text-center text-t-third"},e("orderForm-faucet-dialog-desc","AGOR is the gas token of the Arb test network. For details on how to get it, please see the FAQ.")),p.createElement("a",{className:"block text-subtitle2 text-t-link hover:text-t-linkHover text-center mb-2",href:"https://arbitrum-faucet.com/",target:"_blank",rel:"noreferrer"},p.createElement("span",{className:"flex items-center justify-center"},e("orderForm-faucet-dialog-faq","Check FAQ")," ",p.createElement(le,{className:"w-5 h-5 ml-1"}))),p.createElement(h.z,{onClick:g,type:"button",className:"block w-full mt-6"},e("orderForm-faucet-dialog-ok","OK")))))},ge=p.createContext({}),fe=p.createContext({});var he=a(18185);const be=p.forwardRef((({className:e,type:t,...a},r)=>p.createElement("input",{type:t,className:(0,s.cn)("flex h-10 w-full rounded-md border-none bg-interactive-interactive01 autofill:bg-interactive-interactive01 px-3 py-3.5 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-t-placeholder focus-visible:outline-none focus-visible:bg-interactive-interactive01 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a})));be.displayName="Input";const ve=(0,he.j)("rounded bg-interactive-interactive02 text-body1 focus-visible:ring-0 ring-0 focus-visible:ring-offset-0 placeholder:text-t-placeholder input-text-field",{variants:{inputSize:{default:"h-10 py-2 px-4",lg:"h-12 py-6 px-9",md:"h-10 py-2 px-4",sm:"h-6 px-2 text-caption1",xs:"h-4 px-2 py-1 text-caption1"}},defaultVariants:{inputSize:"default"}}),xe=p.forwardRef((({error:e,className:t,inputSize:a,...r},n)=>p.createElement(be,{ref:n,...r,className:(0,s.cn)(ve({inputSize:a}),t,e?"border-t-error":"border-transparent")})));xe.displayName="TextField";var ye=a(63256),ke=a(83896),Ce=a(30610),Ee=a(24973),Ne=a(28801),we=a(92892),Pe=a(12284),Ie=a(66051),Le=a(64038),Te=a.n(Le);var Me=a(32142),Fe=a(42249),Se=a(99886),Be=a(7061);const De=({assetPrecision:e,balance:t})=>p.createElement("span",{className:"block text-body2 text-t-primary"},(0,Be.FB)(t??"0",e)),Ae=({erc20Address:e,context:t,tokenInName:a})=>{const{address:r,isConnected:n}=(0,c.m)(),{isLoading:l,formatted:s}=(0,se.m)({address:r,token:e,query:{enabled:Boolean(r)&&Boolean(e),refetchInterval:3e4}}),i=(0,Fe.h)(),{useAssetPrecision:d}=(0,p.useContext)(t),m=d((0,o.De)(a,i))||2;return l||!n?null:p.createElement(De,{balance:s,assetPrecision:m})},Ve=({context:e,tokenInName:t})=>{const{address:a,isConnected:r}=(0,c.m)(),{isLoading:n,data:l}=(0,Se.K)({address:a,query:{enabled:Boolean(a),refetchInterval:3e4}}),s=(0,Fe.h)(),{useAssetPrecision:i}=(0,p.useContext)(e),d=i((0,o.De)(t,s))||2;return!n&&r&&l?p.createElement(De,{balance:l.formatted,assetPrecision:d}):null},qe=({erc20Address:e,tokenInName:t,context:a})=>e?p.createElement(Ae,{erc20Address:e,context:a,tokenInName:t}):p.createElement(Ve,{context:a,tokenInName:t});var Re=a(57556),ze=a(95499);const Ue=(0,Re.Ue)()((e=>({amountIn:"",setAmountIn:t=>{e((e=>({...e,amountIn:t})))},isLong:"true",setIsLong:t=>{e((e=>({...e,isLong:t})))}}))),$e=(0,Re.Ue)()((0,ze.tJ)((e=>({expiration:{},setExpiration:(t,a,r)=>{e((e=>({...e,expiration:{...e.expiration,[t]:{[a]:r}}})))},orderType:"market",setOrderType:t=>{e((e=>({...e,orderType:t})))},takeProfitRadio:"3",setTakeProfitRadio:t=>{e((e=>({...e,takeProfitRadio:t})))},degenTakeProfitRadio:"1",setDegenTakeProfitRadio:t=>{e((e=>({...e,degenTakeProfitRadio:t})))},takeProfitPercentage:"",setTakeProfitPercentage:t=>{e((e=>({...e,takeProfitPercentage:t})))},degenTakeProfitPercentage:"",setDegenTakeProfitPercentage:t=>{e((e=>({...e,degenTakeProfitPercentage:t})))},stopLossRadio:"0",setStopLossRadio:t=>{e((e=>({...e,stopLossRadio:t})))},degenStopLossRadio:"0",setDegenStopLossRadio:t=>{e((e=>({...e,degenStopLossRadio:t})))},stopLossPercentage:"",setStopLossPercentage:t=>{e((e=>({...e,stopLossPercentage:t})))},degenStopLossPercentage:"",setDegenStopLossPercentage:t=>{e((e=>({...e,degenStopLossPercentage:t})))},degenLeverage:50,setDegenLeverage:t=>{e((e=>({...e,degenLeverage:t})))},leverage:50,setLeverage:t=>{e((e=>({...e,leverage:t})))},slippage:1,setSlippage:t=>{e((e=>({...e,slippage:t})))},tokenIn:{},setTokenIn:(t,a)=>{e((e=>({...e,tokenIn:{...e.tokenIn,[t]:a}})))}})),{name:"user-futures-order-preference-persist",version:1})),Oe=Symbol("Separator"),_e=({collateralTokens:e,swapToTradeTokens:t,getI18n:a,context:r,staticHost:l,onChange:i})=>{const[c]=(0,g.qo)({name:["orderType"]}),d=(0,Fe.h)(),m=(e=>{const{data:t}=(0,Pe.a)({queryKey:["ALP_Asset_logo"],queryFn:Ie.B,refetchOnMount:!1});return(0,p.useMemo)((()=>{const e=Te()(t,"assetCode");return e.CAKE&&(e.Cake=e.CAKE),e}),[t])})(),{isDumbMode:u}=(0,n.C)(),{brokerName:f,icons:h}=(0,T.z)(),b=(0,p.useRef)(null),v=!u&&"limit"===c&&t&&t.length>0,[x,y]=(0,p.useState)(""),k=(0,p.useMemo)((()=>e.filter((e=>e.name.toLowerCase().includes(x.toLocaleLowerCase())))),[e,x]),C=(0,p.useMemo)((()=>t?.filter((e=>e.symbol.toLowerCase().includes(x.toLocaleLowerCase())))),[t,x]),E=(0,p.useMemo)((()=>{let e=[];return k.length>0&&(e=e.concat(k)),v&&(e=e.concat(Oe)),!u&&C&&C.length>0&&(e=e.concat(C)),e}),[v,u,k,C]),N=(0,p.useCallback)((e=>{e.preventDefault(),y(e.currentTarget.value)}),[]),w=(0,we.MG)({count:E.length,getScrollElement:()=>b.current,estimateSize:e=>E[e]===Oe?32:52});return p.createElement(p.Fragment,null,p.createElement("div",{className:"px-4"},p.createElement("div",{className:"rounded bg-interactive-interactive01 flex items-center gap-2 placeholder:text-t-third px-3 order-form-token-search"},"astherus"===f?p.createElement(p.Fragment,null,p.createElement(xe,{placeholder:a("orderForm-collateral-search","Search"),className:"bg-transparent px-0 order-form-token-search-input",value:x,onChange:N}),h.SearchD?p.createElement(h.SearchD,{className:"text-t-third order-form-token-search-icon"}):p.createElement(ye.r,{className:"text-t-third order-form-token-search-icon"})):p.createElement(p.Fragment,null,p.createElement(ye.r,{className:"text-t-third order-form-token-search-icon"}),p.createElement(xe,{placeholder:a("orderForm-collateral-search","Search"),className:"bg-transparent px-0 order-form-token-search-input",value:x,onChange:N})))),p.createElement("div",{className:"mt-4 min-h-[25.75rem] max-h-[25.75rem] overflow-auto no-scrollbar",ref:b},p.createElement("ul",{style:{height:`${w.getTotalSize()}px`,width:"100%",position:"relative"}},w.getVirtualItems().map((e=>{const{index:t}=e;let n=null;const l=E[t];return n=l===Oe?p.createElement("div",{className:"flex items-center justify-center text-t-third text-caption1 gap-2 px-4 h-8"},p.createElement(ke.Z,{orientation:"horizontal",decorative:!0,className:"w-full h-px border-t border-t-third flex-1 border-dashed"}),p.createElement("span",{className:"w-max"},a("orderForm-collateral-limit-separator","Limit order do not support")),p.createElement(ke.Z,{orientation:"horizontal",decorative:!0,className:"w-full h-px border-t border-t-third flex-1 border-dashed"})):t<k.length?p.createElement("button",{key:l.tokenAddress,type:"button",className:"flex items-center text-subtitle2 gap-2 p-4 hover:bg-interactive-interactiveBgHover w-full",onClick:e=>{e.preventDefault(),i(l.tokenAddress)}},p.createElement("img",{src:m?.[(0,o.De)(l.name,d)]?.logoUrl||m?.[l.name]?.logoUrl,className:"w-5 h-5 rounded-full",width:20,height:20}),p.createElement("span",null,(0,o.De)(l.name,d)),p.createElement("span",{className:"text-caption1 px-1 bg-border-line rounded-sm order-form-token-badge"},a("orderForm-collateral-collateral","Collateral")),p.createElement("span",{className:"flex-1 text-end"},p.createElement(qe,{erc20Address:l.tokenAddress,context:r,tokenInName:l.name}))):p.createElement("button",{key:l.address,type:"button",disabled:v,className:(0,s.cn)("flex items-center text-subtitle2 gap-2 p-4 hover:bg-interactive-interactiveBgHover w-full",v&&"opacity-45"),onClick:e=>{e.preventDefault(),i(l.address)}},p.createElement("img",{src:l.logoURI,className:"w-5 h-5",width:20,height:20,loading:"lazy"}),p.createElement("span",null,l.symbol),p.createElement(Me.e,{align:"center",tipClassName:"max-w-[282px]",tip:a("orderForm-collateral-swap-to-trade-token-tip",{defaultValue:"When you use {{token}} as margin to open a position, the Astherus platform will automatically convert your assets to USDT as margin for opening the position.",token:l.symbol})},p.createElement("span",{className:"text-caption1 px-1 bg-interactive-primary text-t-primary rounded-sm hover:bg-interactive-primaryHover order-form-token-badge"},a("orderForm-collateral-swap-to-trade-token",{defaultValue:"Swap to {{token}}",token:"USDT"}))),p.createElement("span",{className:"flex-1 text-end"},p.createElement(qe,{key:l.address,tokenInName:l.symbol,erc20Address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"===l.address?void 0:l.address,context:r}))),p.createElement("li",{key:Number(e.key),style:{position:"absolute",top:0,left:0,width:"100%",height:`${e.size}px`,transform:`translateY(${e.start}px)`}},n)})))))},We={transition:"transform 300ms ease-in-out"},He=({context:e,collateralTokens:t=[],swapToTradeTokens:a=[],getI18n:r,staticHost:n})=>{const{clearErrors:l}=(0,g.Gc)(),i=(0,Fe.h)(),[d]=(0,g.qo)({name:["orderType"]}),{field:u}=(0,g.bc)({name:"tokenIn"}),{field:f}=(0,g.bc)({name:"tokenInDecimals"}),{field:h}=(0,g.bc)({name:"isSwapToTrade",defaultValue:!1}),{data:b}=(0,Ne.d)({address:u.value,query:{enabled:Boolean(u.value)}}),{chain:x}=(0,c.m)();(0,p.useEffect)((()=>{!x||""!==u.value&&"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"!==u.value||f.value===x.nativeCurrency.decimals?f.value!==b?.decimals&&void 0!==b?.decimals&&f.onChange(b?.decimals):f.onChange(x.nativeCurrency.decimals)}),[x,b?.decimals,u.value,f]);const{resetField:C,getValues:E}=(0,g.Gc)(),N=(0,p.useMemo)((()=>!0===h.value?a.find((e=>e.address===u.value))?.symbol??null:t.find((e=>e.tokenAddress===u.value))?.name??null),[u.value,h.value,a,t]),w=(0,m.x)(),P=$e((e=>e.setTokenIn));(0,p.useEffect)((()=>{const e=E("isSwapToTrade");if("limit"===d&&e&&t&&t.length>0){const e=t?.at(0)?.tokenAddress;C("isSwapToTrade",{defaultValue:!1}),C("tokenIn",{defaultValue:e}),P(w,e),C("amountIn"),l()}}),[w,l,t,E,d,C,P]),(0,p.useEffect)((()=>{const e=E("tokenIn"),r=E("isSwapToTrade");if(e&&a.some((t=>t.address===e))&&!r&&C("isSwapToTrade",{defaultValue:!0}),e&&t&&t.length>0&&!t.some((t=>t.tokenAddress===e))&&!a.some((t=>t.address===e)))return C("tokenIn",{defaultValue:t?.at(0)?.tokenAddress}),void C("isSwapToTrade",{defaultValue:!1});void 0===e&&t&&t.length>0&&(C("tokenIn",{defaultValue:t?.at(0)?.tokenAddress}),C("isSwapToTrade",{defaultValue:!1}))}),[t,E,C,a]);const[I,L]=(0,y.Z)(!1),M=(0,p.useCallback)((e=>{u.onChange(e),P(w,e),C("amountIn"),L(!1),t.some((t=>t.tokenAddress===e))&&h.onChange(!1),a.some((t=>t.address===e))&&h.onChange(!0)}),[P,w,C,L,t,a]),{isMobile:F}=(0,k.F)(),{icons:S}=(0,T.z)();return F?p.createElement(Ce.dy,{open:I,onOpenChange:L},p.createElement(Ce.Qz,{className:"flex items-center group text-body2"},N&&(0,o.De)(N,i)?p.createElement("div",{className:"flex flex-row items-center"},(0,o.De)(N,i)):null,S.ChevronDownD?p.createElement(S.ChevronDownD,{className:(0,s.cn)("ml-1.5 group-data-[state=open]:rotate-x-180 text-t-third"),style:We}):p.createElement(Ee.v,{className:(0,s.cn)("h-4 w-4 ml-0.5 group-data-[state=open]:rotate-x-180"),style:We})),p.createElement(Ce.sc,{className:"border-none rounded-t-lg order-form-token-list"},p.createElement(_e,{collateralTokens:t,swapToTradeTokens:a,onChange:M,context:e,getI18n:r,staticHost:n}))):p.createElement(v.Vq,{open:I,onOpenChange:L},p.createElement(v.hg,{className:"flex items-center group text-body2"},N&&(0,o.De)(N,i)?p.createElement("div",{className:"flex flex-row items-center"},(0,o.De)(N,i)):null,S.ChevronDownD?p.createElement(S.ChevronDownD,{className:(0,s.cn)("ml-1.5 group-data-[state=open]:rotate-x-180 text-t-third"),style:We}):p.createElement(Ee.v,{className:(0,s.cn)("h-4 w-4 ml-0.5 group-data-[state=open]:rotate-x-180"),style:We})),p.createElement(v.cZ,{className:"min-w-[23.4375rem] p-0 py-4 order-form-token-list"},p.createElement(_e,{collateralTokens:t,swapToTradeTokens:a,onChange:M,context:e,getI18n:r,staticHost:n})))};var Ze=a(23011),Qe=a(66632),Ge=a(8301),Ke=a(24391);const je=p.memo((({errorNames:e,children:t,align:a="start"})=>{const{clearErrors:r,getFieldState:n}=(0,g.Gc)(),o=(0,p.useRef)(null),l=e.map((e=>n(e).error))[0],s=(0,p.useCallback)((()=>{r(e)}),[r,e]);return p.createElement("div",{className:"contents [&_[data-radix-popper-content-wrapper]]:!absolute [&_[data-radix-popper-content-wrapper]]:!w-full",ref:o},p.createElement(Ge.u,{open:Boolean(l)},p.createElement(Ge.aJ,{asChild:!0},t),p.createElement(Ge.NM,{container:o.current},p.createElement(Ge._v,{align:a,onPointerDownOutside:s,side:"top",className:"p-0 bg-interactive-interactive01 w-full z-tooltip max-w-none",sideOffset:8,avoidCollisions:!1},p.createElement("div",{className:"bg-interactive-sell/10 text-caption2 text-t-error rounded p-2 flex gap-1 items-start max-w-[var(--radix-popper-anchor-width)]"},p.createElement(Ke.l,{className:"w-[0.875rem] h-[0.875rem]"}),p.createElement("div",{className:"flex-1"},p.createElement("p",null,l?.message)))))))})),Ye=e=>{const{suffix:t,getI18n:a,useGetMaxCollateral:r,tradeConfig:l,pairBaseConfig:i,symbol:d,onChainPerpContractAddress:m,...f}=e,h=(0,Fe.h)(),{useMarketInfo:b,useWebsocketSymbolMarkPrice:v,useAssetPrecision:x}=(0,p.useContext)(ge),{getValues:y,formState:k}=(0,g.Gc)(),{errors:C}=k,[E,N,w,P,I,L]=(0,g.qo)({name:["tokenIn","pairBase","indexPrice","tokenInName","fee","swapToTradeUSDTQty"]}),T=x((0,o.De)(P,h))||2,F=r({base:N}),{isDegenMode:B}=(0,n.C)(),D=v(d),A=b(N),{address:R,isConnected:$}=(0,c.m)(),{data:_,decimals:W,symbol:Y}=(0,se.m)({address:R,token:E,query:{enabled:Boolean(R)&&$}}),{data:J}=(0,Se.K)({address:R,query:{enabled:Boolean(R)&&$}}),X=E?W:J?.decimals,ee=E?_:J?.value,te=E?Y:J?.symbol;(0,Ze.u)({address:E,abi:Qe.Wo,functionName:"allowance",args:[R,m],query:{enabled:$&&Boolean(E)&&Boolean(R)&&Boolean(m),refetchInterval:3e4}});const{field:ae,fieldState:{error:re}}=(0,g.bc)({name:"amountIn",rules:{shouldUnregister:!0,required:a("orderForm-required-field","Required"),validate:{isSwapToTradeExist:()=>!(y("isSwapToTrade")&&!L)||a("orderForm-button-swap-to-trade-error",{defaultValue:"{{tokenInName}} is not supported for swap to USDT",tokenInName:P}),isInsufficientCollateralBalance:e=>{const t=(0,ce.v)(`${e}`,X??0);if(t>(ee??(0,u.f)("0")))return a("orderForm-button-InsufficientBalance",{defaultValue:"Insufficient Balance"});let r;if(y("isSwapToTrade")){if(!L)return!0;r=BigInt(L)}else r=t*(0,u.f)(w)/10n**BigInt(X??0);const n="true"===y("isLong"),o=y("orderType"),s=y("price"),c=U(y("leverage")),d=V({collateral:t,leverage:c,indexPrice:w}),m=(({openFeeRate:e,size:t})=>t*e/10n**4n)({openFeeRate:z(i.feeConfig.openFeeP),size:d}),p=l?.data.executionFeeUsd,g=q({collateral:r,executionFee:p,openFee:m,orderType:o}),f=O({leverageMargins:i.leverageMargins,size:d}),h=(0,u.f)(D.close??"0"),b=Q({isLong:n,collateral:r,leverage:c,marketPrice:h,size:d,slippageConfig:i?.slippageConfig,longQty:A.data?.longQty,shortQty:A.data?.shortQty}),v=(0,u.f)(`${s||0}`),x=G({limitPrice:v,isLong:n,marketPrice:h,orderType:o,spread:b}),k=(({qty:e,orderType:t,spread:a,limitPrice:r,marketPrice:n})=>{if("limit"===t)return r*e*a/10n**36n;if("market"===t)return n*e*a/10n**36n;throw new Error(`[functionName getOpenLost] unsupported order type ${t}`)})({qty:K({entryPrice:x,size:d}),orderType:o,spread:b,limitPrice:v,marketPrice:h});return g*f/BigInt(1e4)>k||a("orderForm-button-open-lost",{defaultValue:"Spread too high with current leverage and order size"})},isSafeInteger:e=>!Number.isSafeInteger(e),isNotANumber:e=>!Number.isNaN(e),isLessThanMaxCollateral:e=>{if(B)return!0;const t=F(y("leverage")||1);return(0,u.f)(`${e}`)*(0,u.f)(w||"1")/10n**18n<=t||a("orderForm-higher-than-max-collateral-v2",{defaultValue:"In {{leverage}}x, the maximum principal is {{maxCollateral}} {{collateralToken}}",leverage:y("leverage"),maxCollateral:Math.floor(parseFloat((0,S.d)(t*10n**18n/(0,u.f)(w||"1")))*10**T)/10**T,collateralToken:(0,o.De)(te,h)})},isLargerThanMinCollateral:e=>{const t=U(y("leverage")),r=(0,u.f)(w),n=(0,u.f)(`${e}`)*r/10n**18n,s=BigInt(l?.data.minNotionalUsd)/t+BigInt(l?.data.minNotionalUsd)*BigInt(i.feeConfig.openFeeP)/10n**BigInt(o.cB.percent)+l?.data.executionFeeUsd,c=s*10n**18n/r;return n>=s||(e=>{const t=Math.ceil(parseFloat(e)*10**T)/10**T;return a("orderForm-less-than-min-collateral-patch-2-V2",{defaultValue:"In {{leverage}}x, the minimum principal is {{minPrincipal}} {{tokenInName}}",minPrincipal:t,leverage:y("leverage"),tokenInName:(0,o.De)(te,h)})})((0,S.d)(c))},isBelowOrderMaxOI:e=>{const t=j(y("isLong")),r=(0,u.f)(D.close??"0"),n=t?i.maxLongOiUsd:i.maxShortOiUsd,o=(t?H({longQty:A?.data?.longQty*10n**8n,marketPrice:r}):Z({shortQty:A.data.shortQty*10n**8n,marketPrice:r}))/10n**18n;return V({collateral:(0,u.f)(`${e}`),leverage:U(y("leverage")),indexPrice:w})+o<=n||a("orderForm-button-reach-max-oi",{defaultValue:"{{symbol}} has reached the position limit",symbol:d})},isLargerThanFee:e=>(0,u.f)(`${e}`)*(0,u.f)(w)/10n**18n-(0,u.f)(I)*(0,u.f)(w)/10n**18n>0n||a("orderForm-button-principal-higher-fee",{defaultValue:"Please increase the principal and try again"})}}}),ne=Ue((e=>e.setAmountIn)),oe=(0,p.useCallback)((e=>{if(/^\d+(\.\d{0,8})?$/.test(e.target.value)&&e.target.value.length<19||""===e.target.value){const t=e.target.value.replaceAll(/[^0-9.]/g,"");ae.onChange(t),ne(t),M.set("initial_margin","input")}}),[T]),le=(0,p.useMemo)((()=>["amountIn","leverage"]),[]);return p.createElement(p.Fragment,null,p.createElement("div",{className:"flex flex-col relative"},p.createElement(je,{errorNames:le},p.createElement("div",{className:(0,s.cn)("flex gap-2 bg-interactive-interactive01 h-11 py-1.5 px-2 rounded border border-transparent border-solid has-[:focus]:border-transparent items-center order-form-input-container",re||C?.leverage?.message?"!border-interactive-sell":"")},p.createElement(xe,{maxLength:19,inputMode:"decimal",type:"text",placeholder:a("orderForm-Collateral-placeholder",{defaultValue:"Collateral"}),autoComplete:"off",...f,...ae,value:ae.value,onChange:oe,inputSize:"sm",className:"p-0 bg-transparent text-body2"}),p.createElement("div",null,t)))))},Je=p.memo((({getI18n:e,symbol:t,collateralTokens:a=[],useGetMaxCollateral:r,tradeConfig:n,pairBaseConfig:o,onChainPerpContractAddress:l,useCoachmark:s=(()=>({})),guideNoticeKey:i,swapToTradeTokens:c,staticHost:d})=>{const m=(0,p.useMemo)((()=>p.createElement(He,{context:ge,collateralTokens:a,getI18n:e,swapToTradeTokens:c,staticHost:d})),[a,e,c,d]),u=(0,p.useRef)(null),{putCoachMarkStep:g}=s();return(0,p.useEffect)((()=>{g?.(i,1,{title:e("v2-sdk-guide-notice-step2-title","V2 Features: Degen Mode"),content:e("v2-sdk-guide-notice-step2-content","Degen Mode allows users to set leverage to 500x, enabling them to either achieve enormous wealth or end up with nothing."),target:u,position:"bottom-end",hasCloseIcon:!0})}),[e]),p.createElement("div",{className:"relative mb-1"},p.createElement(Ye,{symbol:t,getI18n:e,suffix:m,useGetMaxCollateral:r,tradeConfig:n,pairBaseConfig:o,onChainPerpContractAddress:l}),p.createElement("div",{className:"relative left-[50%] w-0",ref:u}))})),Xe=(0,p.memo)((({getI18n:e})=>p.createElement("div",{className:"flex h-[18px] border-1 border-solid relative rounded overflow-hidden pt-[3px] pb-0.5 px-1 mr-1 bg-gradient-141 from-t-emphasize/50 from-[-9.31%] via-t-emphasize/10 via-[60.22%] to-t-emphasize/30 to-[106.44%] order-form-degen-label"},p.createElement("div",{className:"absolute top-[1px] right-[1px] z-0 rounded bg-background-bg1 w-[calc(100%-2px)] h-[calc(100%-2px)] order-form-degen-label-none"}),p.createElement("div",{className:"absolute top-[1px] right-[1px] z-1 rounded bg-t-emphasize opacity-[.1] w-[calc(100%-2px)] h-[calc(100%-2px)] order-form-degen-label-none"}),p.createElement("div",{className:"relative z-2 text-caption2 text-highLight order-form-degen-label-text"},e("orderForm-degen-mode-label","Degen")))));Xe.displayName="DegenModeBadge";var et=a(24596),tt=a(62866),at=a(81622);const rt=({tokenName:e,approve:t,onApproveSuccess:a,getI18n:r,refetch:n,disabled:s,isFetched:i,children:c})=>{const d=(0,Fe.h)(),[m,u]=(0,p.useState)(!1),{trigger:f}=(0,g.Gc)(),b=(0,at.Z)(),v=(0,p.useCallback)((async()=>{try{u(!0);const e=await t();await(0,l.As)({getI18n:r,config:b,hash:e}),setTimeout((()=>f("amountIn")),0),a&&a()}catch(e){ne.A.error(e.shortMessage??e?.reason??e.e??e?.message),u(!1)}finally{await n(),u(!1)}}),[t,r,b,a,f,n]);return p.createElement(h.z,{type:"button",className:"w-full h-10 text-subtitle1 whitespace-nowrap order-form-approve-button",onClick:v,disabled:m||!i||s},c??r("orderForm-button-approve",{defaultValue:"Approve {{token}}",token:(0,o.De)(e,d)}))};var nt=a(59712);const ot=({getI18n:e,useTokenApprove:t,collateralTokens:a,swapToTradeTokens:r,useCurrentProduct:n,pairBaseConfig:l,isUnsupportedNetwork:d=!1,defaultChainId:m=i.e.id,handleSwitchNetwork:u=(()=>{})})=>{const{isConnected:f,address:b}=(0,c.m)(),{connected:v}=(0,et.O)(),{baseAsset:x}=n(),[y,k,C,E,N,w]=(0,g.qo)({name:["tokenIn","isLong","amountIn","tokenInDecimals","isSwapToTrade","swapToTradeIsInit"]}),P=!C||!N||w,I=j(k),L=(({defaultText:e})=>{const{errors:t}=(0,g.cl)(),{isConnected:a}=(0,c.m)(),r=a?(({errorsInfo:e})=>[{field:"amountIn",errorType:"isInsufficientCollateralBalance",getButtonProps:e=>({disabled:!0,children:e?.amountIn?.message})}].find((({field:t,errorType:a})=>e?.[t]?.type===a))?.getButtonProps(e)??null)({defaultText:e,errorsInfo:t}):null,n=(0,p.useMemo)((()=>a&&r||{children:p.createElement("div",{className:"flex items-center"},e)}),[r,a,e]);return a?n:null})({defaultText:`${I?e("orderForm-long",{defaultValue:"Long"}):e("orderForm-short",{defaultValue:"Short"})} ${x}`}),T=(0,p.useMemo)((()=>N?r?.find((e=>e.address===y))?.symbol||"":a?.find((e=>e.tokenAddress===y))?.name||""),[a,N,r,y]),{allowance:M,approve:F,onApproveSuccess:S,refetch:B,isFetched:D,isPending:A,amount:V}=t(y),q=(0,Fe.h)(),{symbol:R}=(0,se.m)({address:b,token:y,query:{enabled:Boolean(b)&&f}});if((f||v)&&d)return p.createElement(h.z,{type:"button",className:"w-full h-10 text-subtitle1",onClick:async e=>{e.preventDefault();try{await u(Number(m))}catch(e){nt.error(e.shortMessage??e.reason??e?.message??e.error)}}},e("orderForm-switch-network","Switch Network"));if(!f)return p.createElement("div",{className:"[&_a]:flex [&_a]:h-10 w-full [&_a]:items-center"},p.createElement(tt.Z,{getI18n:e,size:"md",className:"w-full text-subtitle1 order-form-connect-button"}));if(!M&&""!==y&&"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"!==y)return p.createElement(rt,{disabled:A,isFetched:D,tokenName:T,getI18n:e,approve:F,onApproveSuccess:S,refetch:B});if(""!==y&&"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"!==y&&(0,ce.v)(`${C}`,E??0)>V)return p.createElement(rt,{disabled:A,isFetched:D,tokenName:T,getI18n:e,approve:F,onApproveSuccess:S,refetch:B},e("orderForm-button-increase-authorized-amount",{defaultValue:"Increase {{symbol}} authorization amount",symbol:(0,o.De)(R,q)}));if(l?.status!==o.Uo.Available){const t={[o.Uo.Only_Reduce]:e("orderForm-button-openOrderSuspended","Open order suspended"),[o.Uo.Close]:e("orderForm-button-marketClosed","Market Closed")};return p.createElement(h.z,{type:"submit",className:"w-full h-10 text-subtitle1",disabled:!0},t[l?.status])}return p.createElement(h.z,{className:(0,s.cn)("w-full h-10 text-subtitle2 order-form-confirm-button",I?"order-form-confirm-button-buy":"order-form-confirm-button-sell"),variant:I?"buy":"sell",disabled:!P,type:"submit",...L})};var lt=a(89663);const st=({open:e,getI18n:t,onClose:a,onConfirm:r,pricePrecision:n,symbol:o,pairBaseConfig:l,useWebsocketSymbolMarkPrice:s,useMarketInfo:i})=>{const[c,d,m,f,b]=(0,g.qo)({name:["isLong","leverage","pairBase","entryPrice","size"]}),x=s(o),y=(0,u.f)(x.close??"0"),k=i(m),C=k?.data?.longQty,E=k?.data?.shortQty,N=(0,Be.e9)(Number((0,S.d)(Q({isLong:j(c),leverage:U(d||1),marketPrice:y,slippageConfig:l?.slippageConfig,longQty:C,shortQty:E,size:(0,u.f)(b||"0")}))),{decimals:2});return p.createElement(v.Vq,{open:e},p.createElement(v.cZ,{className:"w-full max-w-[360px] p-6",onEscapeKeyDown:a,onPointerDownOutside:a},p.createElement("h2",{className:"text-headline3 text-t-primary mb-3 text-center"},t("orderForm-high-spread-confirm-dialog-title","High Spread Notice")),p.createElement("p",{className:"text-caption1 mb-2 text-center text-t-third"},t("orderForm-high-spread-confirm-dialog-desc","This trade may result in significant price impact due to a substantial disparity in open interest between long and short positions.Please be aware.")),p.createElement("div",{className:"flex flex-row justify-between py-1"},p.createElement("div",{className:"text-body2 text-t-secondary"},t("orderForm-high-spread-confirm-mark-price","Mark price")),p.createElement("div",{className:"text-subtitle2 text-t-primary"},(0,lt.uf)((0,S.d)(y||0n),n))),p.createElement("div",{className:"flex flex-row justify-between py-1"},p.createElement("div",{className:"text-body2 text-t-secondary"},t("orderForm-high-spread-confirm-est-entry-price","Est. Entry price")),p.createElement("div",{className:"text-subtitle2 text-t-primary"},(0,lt.uf)(f||"0",n))),p.createElement("div",{className:"flex flex-row justify-between py-1"},p.createElement("div",{className:"text-body2 text-t-secondary"},t(" orderForm-high-spread-confirm-price-spread","Price spread")),p.createElement("div",{className:"text-subtitle2 text-t-sell"},N)),p.createElement(h.z,{type:"button",onClick:r,className:"block w-full mt-6"},t("orderForm-high-spread-confirm-open-button","Continue to open"))))},it=p.memo((({getI18n:e})=>{const{control:t,clearErrors:a}=(0,g.Gc)(),r=Ue((e=>e.setIsLong)),{field:n}=(0,g.bc)({name:"isLong",control:t}),o=(0,p.useCallback)((e=>{n.onChange(e),r(e.currentTarget.value),a()}),[a,n,r]),l="true"===n.value;return p.createElement("div",{className:"flex bg-interactive-interactiveBg rounded direction-switch"},p.createElement("input",{...n,onChange:o,type:"radio",value:"true",id:"orderFormIsLongTrue",className:"absolute pointer-events-none",style:{clip:"rect(0,0,0,0)"}}),p.createElement("label",{htmlFor:"orderFormIsLongTrue",className:(0,s.cn)("w-full rounded cursor-pointer text-center py-[0.375rem] bg-background-bg1Accent01 direction-switch-long",l&&"bg-interactive-buy order-form-long-active"),"data-state":l?"active":"inactive"},p.createElement("span",{className:"block text-subtitle2 "+(l?"text-t-white":"text-t-third"),"data-state":l?"active":"inactive"},e("orderForm-long",{defaultValue:"Long"}))),p.createElement("input",{className:"absolute pointer-events-none",...n,onChange:o,type:"radio",value:"false",id:"orderFormIsLongFalse",style:{clip:"rect(0,0,0,0)"}}),p.createElement("label",{htmlFor:"orderFormIsLongFalse",className:(0,s.cn)("w-full rounded-r cursor-pointer text-center py-[0.375rem] bg-background-bg1Accent01 direction-switch-short",!l&&"bg-interactive-sell rounded"),"data-state":l?"inactive":"active"},p.createElement("span",{className:"block text-subtitle2 "+(l?"text-t-third":"text-t-white"),"data-state":l?"inactive":"active"},e("orderForm-short",{defaultValue:"Short"}))))}));var ct=a(95795);const dt=(0,p.memo)((({label:e,children:t,className:a,labelClassName:r,detailClassName:n})=>p.createElement("div",{className:(0,s.cn)("flex justify-between items-center pt-2",a)},p.createElement("span",{className:(0,s.cn)("text-t-third text-caption1",r)},e||null),p.createElement("span",{className:(0,s.cn)("text-t-primary text-caption1",n)},t||null))));dt.displayName="FormItem";const mt=({getI18n:e,symbol:t,pricePrecision:a})=>{const[r,n,o]=(0,g.qo)({name:["isLong","entryPrice","spread"]}),l=j(r);return p.createElement(dt,{label:p.createElement(ct.t,{tip:p.createElement("div",{className:"w-[282px]"},p.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-entryPrice-tip01","In order to protect the price from being manipulated, the Entry Price of the market order will use Mark Price +/- Spread to open the position.")),p.createElement("div",{className:"text-caption whitespace-pre-line mt-5"},e("orderForm-entryPrice-tip02",{defaultValue:"The {{side}} slippage for {{symbol}} is {{spread}}",side:l?"Buy":"Sell",symbol:t,spread:(0,Be.e9)(Number((0,S.d)(o)),{decimals:2})})))},p.createElement("div",{className:"flex"},p.createElement("span",null,e("orderForm-entryPrice","Entry Price")),p.createElement("span",{className:"text-t-third"},"",e("orderForm-entryPrice-spread",{defaultValue:"({{spread}} Spread)",spread:(0,Be.e9)(Number((0,S.d)(o)),{decimals:2})}))))},p.createElement("div",{className:"text-t-primary"},(0,lt.uf)(n,a),"USD"))};var ut=a(25681),pt=a(33868);const gt=({getI18n:e,tradeConfig:t,pairBaseConfig:a,useAssetPrecision:r,Link:l="a"})=>{const s=(0,Fe.h)(),[i,d,m,f,h,b]=(0,g.qo)({name:["indexPrice","tokenInName","entryPrice","isSwapToTrade","swapToTradeIndexPrice","qty"]}),{isDegenMode:v}=(0,n.C)(),{isConnected:x}=(0,c.m)(),y=r((0,o.De)(d,s))||2,k=(0,p.useMemo)((()=>t.data||{}),[t.data]),C=k.executionFeeUsd?k.executionFeeUsd:(0,u.f)("0"),E=(0,p.useMemo)((()=>z(a?.feeConfig?.openFeeP)),[a?.feeConfig?.openFeeP]),N=(0,p.useMemo)((()=>f?C*10n**18n/(0,u.f)(h||"1"):C*10n**18n/((0,u.f)(i||"1")||1n)),[C,i,f,h]),w=(0,u.f)(m||"1")>0?(0,u.f)(m||"1"):(0,u.f)("1"),P=(0,u.f)(b)*w*(0,u.f)(`${E}`)/10n**40n,I=(0,p.useMemo)((()=>f?P*10n**18n/(0,u.f)(h||"1"):P*10n**18n/((0,u.f)(i||"1")||1n)),[i,f,P,h]);return p.createElement(p.Fragment,null,p.createElement(dt,{label:p.createElement("span",null,e("orderForm-fee","Fee"))},p.createElement(ct.t,{mode:"click",tip:p.createElement("div",{className:"w-[282px]"},p.createElement("div",{className:"whitespace-pre-line text-caption"},e("orderForm-fee-tip01-openFee-patch1",{defaultValue:"Open Fee : {{openFee}} {{tokenInName}} ({{openFeeRate}})",openFee:`${(0,Be.FB)((0,S.d)(I),y)}`,openFeeRate:(0,Be.e9)(R(E.toString()),{decimals:4}),tokenInName:(0,o.De)(d,s)})),p.createElement("div",{className:"whitespace-pre-line text-caption"},x?e("orderForm-fee-tip01-executionFee-patch1",{defaultValue:"Execution Fee : {{executionFee}}  {{symbolExecutionFee}} (fixed)",executionFee:`${(0,S.d)(C)} USD`,symbolExecutionFee:`${(0,Be.FB)((0,S.d)(N),y)} ${(0,o.De)(d,s)||""}`}):e("orderForm-fee-tip01-executionFee",{defaultValue:"Execution Fee : {{executionFee}} (fixed)",executionFee:`${(0,S.d)(C)} USD`})),p.createElement("div",{className:"whitespace-pre-line text-caption mt-4"},e("orderForm-fee-tip02","Execution Fee is a fixed additional fee for the execution of the Keeper program. It will be charged when a position is opened.")),v&&p.createElement(p.Fragment,null,p.createElement("div",{className:"whitespace-pre-line text-caption text-highLight mt-[10px]"},e("orderForm-fee-degen-tip-title","Degen Mode")),p.createElement("div",{className:"whitespace-pre-line text-caption text-highLight mt-1"},e("orderForm-fee-degen-tip-desc",{defaultValue:"In \"degen mode,\" there's no fee for opening trades, but for closing trades, there's a fee of {{shareRate}}% PNL, with a minimum charge of just {{minCloseFeeRate}}%.",shareRate:(0,B.b)(BigInt(a?.feeConfig?.shareP??0n),3),minCloseFeeRate:(0,B.b)(BigInt(a?.feeConfig?.minCloseFeeP??0n),3)})),p.createElement(l,{href:"https://apollox-finance.gitbook.io/apollox-finance/welcome/trading-on-v2/degen-trading-mode/dynamic-close-fee-for-degen-mode",target:"_blank",className:"flex items-center text-highLight text-caption2 leading-[14px] mt-2"},p.createElement("span",null,e("orderForm-dee-degen-tip-more","View more details")),p.createElement(ut.S,{className:"ml-1 w-[14px] h-[14px]"}))))},p.createElement("div",null,!v&&p.createElement("span",{className:"text-t-primary"},`${(0,Be.FB)((0,S.d)(I),y)} ${(0,o.De)(d,s)||""}`),v&&p.createElement("div",{className:"flex flex-row items-center text-highLight"},p.createElement(pt.g,{className:"w-[14px] h-[14px] mr-1"}),p.createElement("span",null,x?`${(0,Be.FB)((0,S.d)(N),y)} ${(0,o.De)(d,s)||""}`:`${(0,S.d)(C)} USD`))))))},ft=({symbol:e,tradeConfig:t,pairBaseConfig:a,useMarketInfo:r,useWebsocketSymbolMarkPrice:n})=>{const{setValue:o,getValues:l}=(0,g.Gc)();(0,g.bc)({name:"fee",defaultValue:""}),(0,g.bc)({name:"entryPrice",defaultValue:""}),(0,g.bc)({name:"marketPrice",defaultValue:""}),(0,g.bc)({name:"spread",defaultValue:""}),(0,g.bc)({name:"qty"}),(0,g.bc)({name:"size"});const[s,i,c,d,m,f,h,b,v]=(0,g.qo)({name:["isLong","leverage","pairBase","orderType","price","amountIn","indexPrice","isSwapToTrade","swapToTradeIndexPrice"]}),x=r(c),y=n(e),k=j(s),C=(0,u.f)(f||"0"),E=(0,p.useMemo)((()=>U(i)),[i]),N=(0,u.f)(y.close??"0"),w=(0,u.f)(`${m||0}`),P=x?.data?.longQty,I=x?.data?.shortQty,L=V({collateral:C,leverage:E,indexPrice:h}),T=(0,p.useMemo)((()=>t.data||{}),[t.data]),M=T.executionFeeUsd?T.executionFeeUsd:(0,u.f)("0"),F=(0,p.useMemo)((()=>Q({collateral:C,isLong:k,leverage:E,marketPrice:N,slippageConfig:a?.slippageConfig,longQty:P,shortQty:I,size:L})),[L,C,k,E,N,a?.slippageConfig,P,I]),B=G({isLong:k,orderType:d,limitPrice:w,marketPrice:N,spread:F}),D=(0,p.useMemo)((()=>z(a?.feeConfig?.openFeeP)),[a?.feeConfig?.openFeeP]),A=(0,p.useMemo)((()=>b?M*10n**18n/(0,u.f)(v||"1"):M*10n**18n/((0,u.f)(h||"1")||1n)),[M,h,b,v]),q=(0,S.d)(B),R=(0,u.f)(q||"1")>0?(0,u.f)(q||"1"):(0,u.f)("1"),$=(({amountIn:e,entryPrice:t,leverage:a,openFeeRate:r,executionFeeUSD:n,indexPrice:o})=>0n===t||0n===e||0n===o?0n:(e*o/10n**18n-BigInt(n))*10n**18n/(t/a+t*(0,u.f)(`${r}`)/10n**22n))({leverage:E,indexPrice:(0,u.f)(h||"1"),amountIn:(0,u.f)(f||"0"),entryPrice:R,executionFeeUSD:M,openFeeRate:D}),O=$*R*(0,u.f)(`${D}`)/10n**40n,_=(0,p.useMemo)((()=>b?O*10n**18n/(0,u.f)(v||"1"):O*10n**18n/((0,u.f)(h||"1")||1n)),[h,b,O,v]),W=(0,p.useMemo)((()=>(0,S.d)(A+_)),[A,_]),H=(0,S.d)($),Z=(0,S.d)(L);return(0,p.useEffect)((()=>{const[e,t,a,r,n,s]=l(["fee","entryPrice","marketPrice","spread","qty","size"]);W!==e&&o("fee",W),q!==t&&o("entryPrice",q),N!==a&&o("marketPrice",N),F!==r&&o("spread",F),H!==n&&o("qty",H),Z!==s&&o("size",Z)}),[W,q,N,F,H,Z,o,l]),p.createElement(p.Fragment,null)},ht=({useWebSocketAssetIndex:e})=>{const t=(0,Fe.h)(),{field:a}=(0,g.bc)({name:"indexPrice"}),{control:r}=(0,g.Gc)(),[n]=(0,g.qo)({name:["tokenInName"],control:r}),[l,s]=(0,g.qo)({name:["isSwapToTrade","swapToTradeIndexPrice"]}),i=e((0,o.De)(n,t));return(0,p.useEffect)((()=>{const e=l?s:i.index;a.value!==e&&a.onChange(e)}),[i.index,a,l,s]),p.createElement(p.Fragment,null)},bt=e=>p.createElement("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 11.9474C2 11.6821 2.10536 11.4278 2.2929 11.2402L10.893 2.64043C11.2835 2.24992 11.9167 2.24992 12.3072 2.64044L13.9596 4.2929C14.3502 4.68343 14.3502 5.3166 13.9596 5.70712L6.39998 13.2665H13.3333C13.7015 13.2665 14 13.565 14 13.9332C14 14.3014 13.7015 14.5999 13.3333 14.5999L2.99999 14.5998C2.44771 14.5998 2 14.1521 2 13.5998V11.9474ZM3.33333 13.2665H4.12114C4.38516 13.2665 4.63847 13.1621 4.8258 12.976L10.7117 7.1306L9.52396 5.94283L3.62624 11.8402C3.4387 12.0278 3.33333 12.2821 3.33333 12.5474V13.2665ZM10.4668 5.00002L11.6601 6.19339L12.8668 5.00002L11.6668 3.80002L10.4668 5.00002Z",fill:"currentColor"})),vt=e=>p.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},p.createElement("path",{d:"M3 12a1 1 0 011-1h16a1 1 0 110 2H4a1 1 0 01-1-1z"})),xt=e=>p.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},p.createElement("path",{d:"M10 11a1 1 0 001-1V4a1 1 0 112 0v6a1 1 0 001 1h6a1 1 0 110 2h-6a1 1 0 00-1 1v6a1 1 0 11-2 0v-6a1 1 0 00-1-1H4a1 1 0 110-2h6z"}));var yt=a(63046);const kt=p.forwardRef((({className:e,orientation:t,marks:a,thumbProps:r={},trackClassName:n,...o},l)=>{const{className:i,rangeClassName:c,dragNode:d,children:m,...u}=r,[g,f]=p.useState(!1);return p.createElement(yt.fC,{ref:l,className:(0,s.cn)("relative flex w-full touch-none select-none items-center",e),onPointerUp:d?()=>f(!1):void 0,onPointerDown:d?()=>f(!0):void 0,...o},p.createElement(yt.fQ,{className:(0,s.cn)("relative h-1 w-full grow overflow-hidden rounded-full bg-interactive-interactive01 cursor-pointer",n)},p.createElement(yt.e6,{className:(0,s.cn)("slider-range absolute h-full bg-interactive-primary",c)})),a&&a.map(((e,a)=>p.createElement("button",{...e,type:"button",key:`slider_mark_${a}`,className:(0,s.cn)("absolute cursor-pointer rounded-full "+("horizontal"===t?"-translate-x-1/2":"-translate-y-1/2"),e.className),style:e.style,onClick:()=>e.onClick(e.value)},e.children))),p.createElement(yt.bU,{className:(0,s.cn)("block cursor-pointer box-content h-3 w-3 rounded-full border-0 bg-border-lineStrong dark:bg-t-onColor ring-offset-background transition-colors disabled:pointer-events-none disabled:opacity-50 border-interactive-primary focus-within:outline-none",i),...u,asChild:!0},p.createElement("span",null,g?d:null,m)))}));kt.displayName=yt.fC.displayName;var Ct=a(72413),Et=a(97603);function Nt(e,t){(0,p.useEffect)((()=>{const a=a=>{e.current&&!e.current.contains(a.target)&&t(a)};return document.addEventListener("click",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("click",a),document.removeEventListener("touchstart",a)}}),[e,t])}const wt="top-[2px] w-1 h-1 rounded-full bg-t-third order-form-slider-mark",Pt="bg-border-lineStrong dark:bg-t-onColor",It=({value:e,minLeverage:t,maxLeverage:a})=>{let r=0;return r=e===t?1:e===a?100:(e-t)/((a-t)/100),r};function Lt({minLeverage:e=1,maxLeverage:t=1}){const a=(0,p.useRef)(null),[r,o]=(0,p.useState)(!1),{sliderThumbProps:l}=(0,p.useContext)(ge),i=$e(),{field:c}=(0,g.bc)({name:"leverage",defaultValue:i.leverage,rules:{deps:["amountIn"]}}),{switchMode:d}=(0,n.C)(),m=(0,p.useCallback)((a=>Math.max(Math.min(a,t),e)),[t,e]),u=(0,Et.Z)(e),f=(0,Et.Z)(e),h=(0,p.useCallback)((e=>{c.onChange(m(e)),i.setLeverage(m(e)),M.set("leverage","button")}),[m,i]),b=(0,p.useMemo)((()=>t>e?[{value:e,className:(0,s.cn)(wt,Pt),style:{left:"0"},onClick:h,children:p.createElement("span",{className:"absolute text-caption2 text-t-primary order-form-slider-select-text top-3 left-0"},e,"x")},{value:Math.floor((t-e)/5)+e,className:(0,s.cn)(wt,c.value>(t-e)/5?Pt:""),style:{left:"calc(20% - 4px)"},onClick:h,children:p.createElement("span",{className:"absolute text-caption2 text-t-primary order-form-slider-select-text top-3 left-[-6px]"},Math.floor((t-e)/5)+e,"x")},{value:Math.floor(2*(t-e)/5)+e,className:(0,s.cn)(wt,c.value>2*(t-e)/5?Pt:""),style:{left:"calc(40% - 4px)"},onClick:h,children:p.createElement("span",{className:"absolute text-caption2 text-t-primary order-form-slider-select-text top-3 left-[-6px]"},Math.floor(2*(t-e)/5)+e,"x")},{value:Math.floor(3*(t-e)/5)+e,className:(0,s.cn)(wt,c.value>3*(t-e)/5?Pt:""),style:{left:"calc(60% - 4px)"},onClick:h,children:p.createElement("span",{className:"absolute text-caption2 text-t-primary order-form-slider-select-text top-3 left-[-6px]"},Math.floor(3*(t-e)/5)+e,"x")},{value:Math.floor(4*(t-e)/5)+e,className:(0,s.cn)(wt,c.value>4*(t-e)/5?Pt:""),style:{left:"calc(80% - 4px)"},onClick:h,children:p.createElement("span",{className:"absolute text-caption2 text-t-primary order-form-slider-select-text top-3 left-[-6px]"},Math.floor(4*(t-e)/5)+e,"x")},{value:t,className:wt,style:{left:"calc(100% - 4px)"},onClick:h,children:p.createElement("span",{className:"absolute text-caption2 text-t-primary order-form-slider-select-text top-3 right-0"},t,"x")}]:[]),[c.value,h,t,e]);(0,p.useEffect)((()=>{d("classic")}),[d]),(0,p.useEffect)((()=>{const a=m(c.value);f&&f!==t&&c.value>t&&c.value!==a&&c.onChange(a),u&&u!==e&&c.value<e&&c.value!==a&&c.onChange(a)}),[m,c,t,e,f,u]);const v=(0,p.useCallback)((([a])=>{const r=(({value:e,minLeverage:t,maxLeverage:a})=>{let r=0;if(1===e)r=t;else if(100===e)r=a;else{const n=(a-t)/100;r=t+Math.round(e*n)}return r})({value:a,maxLeverage:t,minLeverage:e});c.onChange(m(r)),i.setLeverage(m(r)),M.set("leverage","button")}),[m,t,e,i]),x=(0,p.useCallback)(((e="")=>{const t=m(parseInt(e,10));if(Number.isNaN(t))c.onChange("");else{if(0===t)return i.setLeverage(1),c.onChange(1);i.setLeverage(t),c.onChange(t),M.set("leverage","input")}}),[m,i]),y=(0,p.useCallback)((()=>{x(c.value-1)}),[c.value,x]),k=(0,p.useCallback)((()=>{x(c.value+1)}),[c.value,x]),C=(0,p.useCallback)((()=>{o((e=>!e))}),[]),E=(0,p.useCallback)((()=>{o(!1)}),[]),{icons:N}=(0,T.z)();return Nt(a,E),p.createElement("div",{className:"relative flex flex-col w-auto",ref:a},p.createElement("button",{type:"button",className:"flex items-center text-subtitle2 text-t-primary order-form-slider-selected-text",onClick:C},p.createElement("span",null,c.value,"x"),N.DrawD?p.createElement(N.DrawD,{className:"w-4 h-4 ml-1"}):p.createElement(bt,{className:"w-4 h-4 ml-0.5"})),r&&p.createElement("div",{className:"z-[100] absolute w-[calc(100vw-48px)] md:w-[288px] h-auto top-[28px] right-0 items-center rounded bg-interactive-interactiveBg shadow-elevation3 bg-[linear-gradient(152.61deg,#FFFFFF_2.23%,#F2F2F5_82.94%)] dark:bg-[linear-gradient(152.61deg,#62658D_2.23%,#363655_82.94%)] order-form-leverage-popover-container"},p.createElement("div",{className:"flex flex-col gap-1 rounded overflow-hidden bg-interactive-interactiveBg bg-clip-padding border border-transparent border-solid"},p.createElement("div",{className:"flex gap-2 bg-interactive-interactive01 w-full h-11 min-h-11 py-1.5 px-2 rounded border border-transparent border-solid [&:has(input:focus)]:border-transparent items-center bg-clip-padding"},p.createElement("button",{onClick:y,type:"button"},N.MinusD?p.createElement(N.MinusD,{className:"w-4 h-4 text-t-third"}):p.createElement(vt,{className:"w-4 h-4 text-t-third"})),p.createElement(Ct.Z,{className:"w-full h-full bg-transparent border-0 text-t-primary outline-none text-center text-body2",autoComplete:"off",decimalsLimit:0,allowNegativeValue:!1,allowDecimals:!1,value:c.value,maxLength:t.toString().length||2,onValueChange:x,step:1}),p.createElement("button",{onClick:k,type:"button"},N.PlusD?p.createElement(N.PlusD,{className:"w-4 h-4 text-t-third"}):p.createElement(xt,{className:"w-4 h-4 text-t-third"}))),p.createElement("div",{className:(0,s.cn)("relative flex items-center w-full h-14 min-h-14 mb-1 px-2")},p.createElement(kt,{value:[It({value:c.value||1,maxLeverage:t,minLeverage:e})],trackClassName:"order-form-slider-track",min:1,max:100,onValueChange:v,step:1,thumbProps:{...l,className:"order-form-slider-thumb",dragNode:p.createElement("div",{className:(0,s.cn)("absolute top-[-20px] right-[-6px] bg-interactive-primary px-0.5 text-caption1 rounded-sm text-t-onColor order-form-drag-node",c.value>9*(t-e)/10?"right-[2px]":"right-[-6px]")},c.value,"x")},marks:b})))))}const Tt=250,Mt=[Tt,500,750,1e3],Ft=e=>{const t=[];Mt.forEach((a=>{t.push(Math.abs(a-e))}));const a=t.indexOf(Math.min.apply(null,t));return Mt[a]},St=({value:e,minLeverage:t,maxLeverage:a})=>{let r=0;return r=1===e?1:1001===e?100:e>250?50+(e-250)/((a-250)/50):(e-t)/((250-t)/50),r},Bt="top-[2px] w-1 h-1 rounded-full bg-t-third order-form-slider-mark",Dt="bg-border-lineStrong dark:bg-t-onColor";function At({symbol:e,pairBaseConfig:t,getI18n:a,minLeverage:r=1,maxLeverage:o=1e3,Link:l="a"}){const i=(0,p.useRef)(null),[c,d]=(0,p.useState)(!1),{getValues:m,setValue:f}=(0,g.Gc)(),{sliderThumbProps:h,useMarketInfo:b,useWebsocketSymbolMarkPrice:v,useCurrentProduct:x,usePairByBaseConfig:y}=(0,p.useContext)(ge),{degenPairBase:k}=x(),{data:C}=y(k),[E,N]=(0,g.qo)({name:["pairBase","orderType"]}),w=v(e),P=b(E),I=b(k),L=$e(),{isDegenMode:F,switchMode:S}=(0,n.C)(),{field:B}=(0,g.bc)({name:"leverage",defaultValue:L.degenLeverage,rules:{deps:["amountIn"],shouldUnregister:!0,required:{value:!0,message:a("orderForm-required-field","Required")},validate:{isOverMaxOI:e=>{const r=m("isLong"),n=m("amountIn"),o=m("indexPrice"),l=(0,u.f)(w.close??"0"),s=j(r),i=(0,u.f)(n||"0"),c=ae({isLong:s,collateral:i,marketPrice:l,indexPrice:o,qty:s?P?.data?.longQty||0n:P?.data?.shortQty||0n,maxOi:s?t.maxLongOiUsd:t.maxShortOiUsd,leverage:U(e)}),d=ae({isLong:s,collateral:i,marketPrice:l,indexPrice:o,qty:s?I?.data?.longQty||0n:I?.data?.shortQty||0n,maxOi:s?C.maxLongOiUsd:C.maxShortOiUsd,leverage:U(Tt)});let p=!0,g="";return c&&(p=!1,g=F||d?a("orderForm-leverage-high-hit-maxoi","Hit the Max OI limit, please try 1x-250x Leverage."):a("orderForm-leverage-low-hit-maxoi","Hit the Max OI limit, please try 250x-1001x Leverage.")),p||g}}}}),D=(0,p.useCallback)((e=>Math.max(Math.min(e,o),r)),[o,r]),A=(0,Et.Z)(r),V=(0,Et.Z)(r),q=(0,p.useCallback)((e=>{B.onChange(D(e)),L.setDegenLeverage(D(e)),M.set("leverage","button")}),[D,L]),R=(0,p.useMemo)((()=>[{value:0,className:(0,s.cn)(Bt,Dt),style:{left:"0"},onClick:q,children:p.createElement("span",{className:"absolute text-caption2 text-t-primary top-3 order-form-slider-select-text"},"0")},{value:250,className:(0,s.cn)(Bt,B.value>250?Dt:""),style:{left:"calc(50% - 4px)"},onClick:q,children:p.createElement("span",{className:"absolute text-caption2 text-t-primary top-3 left-[-6px] order-form-slider-select-text"},"250")},{value:500,className:(0,s.cn)(Bt,B.value>500?Dt:""),style:{left:"calc(66.6% - 4px)"},onClick:q,children:p.createElement("span",{className:"absolute text-caption2 text-highLight top-3 left-[-6px]"},"500")},{value:750,className:(0,s.cn)(Bt,B.value>750?Dt:""),style:{left:"calc(83.3% - 4px)"},onClick:q,children:p.createElement("span",{className:"absolute text-caption2 text-highLight top-3 left-[-6px]"},"750")},{value:1e3,className:Bt,style:{left:"calc(100% - 4px)"},onClick:q,children:p.createElement("span",{className:"absolute text-caption2 text-highLight top-3 right-0"},"1001x")}]),[B.value,q]),z=(0,p.useCallback)((e=>{e<=Tt&&F?S("classic"):e>Tt&&!F&&(S("degen"),f("orderType","market"))}),[F,f,S]);(0,p.useEffect)((()=>{const e=D(m("leverage"));V&&V!==o&&m("leverage")>o&&B.value!==e&&B.onChange(e),A&&A!==r&&m("leverage")<r&&B.value!==e&&B.onChange(e)}),[B,D,m,z,o,r,V,A]),(0,p.useEffect)((()=>{z(D(B.value))}),[D,B.value,z,N]);const $=(0,p.useCallback)((([e])=>{d(!0);const t=(({value:e,minLeverage:t,maxLeverage:a})=>{let r=0;if(1===e)r=t;else if(100===e)r=a;else if(e>50){const t=(a-250)/50,n=250+Math.round((e-50)*t);r=Ft(n)}else{const a=(250-t)/50;r=t+Math.round(e*a)}return r})({value:e,maxLeverage:o,minLeverage:r});B.onChange(D(t)),L.setDegenLeverage(D(t)),M.set("leverage","button")}),[D,o,r,L]),O=(0,p.useCallback)(((e="")=>{const t=D(parseInt(e,10));if(Number.isNaN(t))B.onChange("");else{if(0===t)return L.setDegenLeverage(1),B.onChange(1);B.onChange(t),L.setDegenLeverage(t),M.set("leverage","input")}}),[D,L]),_=(0,p.useCallback)((()=>{const e=m("leverage"),t=Mt.indexOf(e);O(t>0?Mt[t-1]:e-1)}),[m,O]),W=(0,p.useCallback)((()=>{const e=m("leverage"),t=Mt.indexOf(e);t>-1&&t<Mt.length-1?O(Mt[t+1]):O(e+1)}),[m,O]),H=(0,p.useCallback)((()=>{d((e=>!e))}),[]);Nt(i,(0,p.useCallback)((()=>{d(!1)}),[]));const Z=(0,p.useCallback)((()=>{const e=m("leverage");O(e<=Tt?e:Ft(e))}),[m,O]),Q=(0,p.useMemo)((()=>[St({value:B.value||1,maxLeverage:o,minLeverage:r})]),[B.value,o,r]),{icons:G}=(0,T.z)();return p.createElement("div",{className:"relative flex flex-col w-auto",ref:i},p.createElement("button",{type:"button",className:(0,s.cn)("flex items-center text-subtitle2 order-form-slider-selected-text",F?"text-highLight":"text-t-primary"),onClick:H},p.createElement("span",null,B.value===o?"1001":B.value,"x"),G.DrawD?p.createElement(G.DrawD,{className:"w-4 h-4 ml-1"}):p.createElement(bt,{className:"w-4 h-4 ml-0.5"})),c&&p.createElement("div",{className:"z-[100] absolute w-[calc(100vw-48px)] md:w-[288px] h-auto top-[28px] right-0 rounded bg-interactive-interactiveBg shadow-elevation3 bg-[linear-gradient(152.61deg,#FFFFFF_2.23%,#F2F2F5_82.94%)] dark:bg-[linear-gradient(152.61deg,#62658D_2.23%,#363655_82.94%)] order-form-leverage-popover-container"},p.createElement("div",{className:"fflex flex-col gap-1 rounded overflow-hidden bg-interactive-interactiveBg bg-clip-padding border border-transparent border-solid"},p.createElement("div",{className:"flex gap-2 bg-interactive-interactive01 w-full h-11 min-h-11 py-1.5 px-2 rounded border border-transparent border-solid [&:has(input:focus)]:border-transparent items-center order-form-no-rounded"},p.createElement("button",{onClick:_,type:"button"},G.MinusD?p.createElement(G.MinusD,{className:"w-4 h-4 text-t-third"}):p.createElement(vt,{className:"w-4 h-4 text-t-third"})),p.createElement(Ct.Z,{className:"w-full h-full bg-transparent border-0 text-t-primary outline-none text-center text-body2",autoComplete:"off",decimalsLimit:0,allowNegativeValue:!1,allowDecimals:!1,value:B.value===o?"1001":B.value,maxLength:o.toString().length||2,onValueChange:O,step:1,onBlur:Z}),p.createElement("button",{onClick:W,type:"button"},G.PlusD?p.createElement(G.PlusD,{className:"w-4 h-4 text-t-third"}):p.createElement(xt,{className:"w-4 h-4 text-t-third"}))),p.createElement("div",{className:(0,s.cn)("flex items-center w-full h-14 min-h-14 mb-1",c?"px-2":"")},p.createElement(kt,{value:Q,trackClassName:"order-form-slider-track",min:1,max:100,onValueChange:$,step:1,thumbProps:{...h,className:"order-form-slider-thumb",dragNode:p.createElement("div",{className:(0,s.cn)("absolute top-[-20px] right-[-6px] bg-interactive-primary px-0.5 text-caption1 rounded-sm text-t-onColor order-form-drag-node",B.value===o?"right-[2px]":"right-[-6px]")},B.value,"x")},marks:R})),F&&p.createElement("div",{className:"flex flex-col w-[calc(100%-1rem)] bg-support-warning/10 rounded mx-auto mb-2 degen-mode-tooltip-container"},p.createElement("div",{className:"flex items-center gap-1 p-2 text-caption2 text-highLight degen-mode-dropdown-wrapper"},p.createElement(pt.g,{className:"w-[14px] h-[14px] degen-mode-dropdown-icon"}),p.createElement("span",null,a("orderForm-leverage-degen-mode-tip-title","Degen Mode"))),p.createElement("div",{className:"px-2 pb-2 degen-mode-tooltip-list"},p.createElement("ul",{className:" mb-1 text-highLight text-caption2 leading-[14px] list-disc ml-[18px] [&_li_span]:ml-[-4px] degen-mode-tooltip-ul"},p.createElement("li",null,p.createElement("span",{className:"degen-mode-tooltip-item"},"-"),p.createElement("span",null,a("orderForm-leverage-degen-mode-tip-1","Lower price slippage"))),p.createElement("li",null,p.createElement("span",{className:"degen-mode-tooltip-item"},"-"),p.createElement("span",null,a("orderForm-leverage-degen-mode-tip-2","Lower trading fees"))),p.createElement("li",null,p.createElement("span",{className:"degen-mode-tooltip-item"},"-"),p.createElement("span",null,a("orderForm-leverage-degen-mode-tip-3","No opening position fees"))),p.createElement("li",null,p.createElement("span",{className:"degen-mode-tooltip-item"},"-"),p.createElement("span",null,a("orderForm-leverage-degen-mode-tip-4","Closing position fees are charged based on PNL"))),p.createElement("li",null,p.createElement("span",null,p.createElement("span",{className:"degen-mode-tooltip-item"},"-"),a("orderForm-leverage-degen-mode-tip-5","Unable to add margin to positions")))),p.createElement(l,{href:"https://apollox-finance.gitbook.io/apollox-finance/welcome/trading-on-v2/degen-trading-mode",target:"_blank",className:"flex items-center text-t-secondary text-caption2 degen-mode-tooltip-link"},p.createElement("span",null,a("orderForm-leverage-degen-mode-tip-more","View more details")),G.ArrowRightD?p.createElement(G.ArrowRightD,{className:"ml-1 w-[6.25px] h-[10px]"}):p.createElement(ut.S,{className:"ml-1 w-[14px] h-[14px]"})))))))}const Vt=({getI18n:e,symbol:t,pricePrecision:a,useMarketInfo:r,useWebsocketSymbolMarkPrice:n,pairBaseConfig:l})=>{const{getValues:i,setValue:c}=(0,g.Gc)(),[d,m]=(0,g.qo)({name:["orderType","indexPrice"]}),[f,h,b,v]=i(["isLong","pairBase","amountIn","leverage"]),x=n(t),y=(x.symbol??"")===t,k=(0,u.f)(x.close??"0"),C=j(f),E=r(h),N=(0,u.f)(b||"0"),w=U(v||1),P=E.data?.longQty,I=E.data?.shortQty,L=V({collateral:N,leverage:w,indexPrice:m}),T=Q({isLong:C,collateral:N,marketPrice:k,size:L,slippageConfig:l?.slippageConfig,longQty:P,shortQty:I,leverage:w}),{field:F,fieldState:{error:B}}=(0,g.bc)({name:"price",defaultValue:"",shouldUnregister:!1,rules:{required:e("orderForm-required-field","Required"),validate:{isLessMaxLimitPrice:t=>{const a=(0,ce.v)(t||"0",o.cB.price),r=e("orderForm-limit-price-over-max",{defaultValue:"Limit price over the max value"});return a<=2n**64n||r},isNumber:e=>!Number.isNaN(e),isTriggerPriceLessThanMarketPrice:t=>!C||(te({limitPrice:(0,u.f)(`${t||0}`),spread:T,isLong:C})<k||e("orderForm-trigger-price-over-market-price",{defaultValue:"Trigger price should smaller than Mark price"})),isTriggerPriceGreaterThanMarketPrice:t=>!!C||(te({limitPrice:(0,u.f)(`${t||0}`),spread:T,isLong:C})>k||e("orderForm-trigger-price-less-market-price",{defaultValue:"Trigger price should greater than Mark price"}))}}}),D=(0,p.useCallback)((e=>{(/^\d+(\.\d{0,9})?$/.test(e.target.value)&&e.target.value.length<19||""===e.target.value)&&(F.onChange(e.target.value.replaceAll(/[^0-9.]/g,"")),M.set("limitPrice","input"))}),[F]);(0,p.useEffect)((()=>{const e=(({isLong:e,marketPrice:t,orderType:a,pricePrecision:r})=>{if("limit"===a&&0n!==t){const a=e?(0,S.d)(t*BigInt(995)/1000n):(0,S.d)(t*BigInt(1005)/1000n);return parseFloat(a).toFixed(r)}return""})({orderType:d,isLong:C,marketPrice:k,pricePrecision:a});"limit"!==d||0n===k||i("price")||c("price",e)}),[t,C,d,y]);const A=(0,p.useMemo)((()=>["price"]),[]);return p.createElement("div",{className:"flex flex-col relative"},p.createElement(je,{errorNames:A},p.createElement("div",{className:(0,s.cn)("flex gap-2 bg-interactive-interactive01 h-11 py-1.5 px-2 mb-2 rounded border border-transparent border-solid has-[:focus]:border-transparent items-center order-form-input-container",B?"!border-interactive-sell":"")},p.createElement(xe,{autoComplete:"off",type:"text",inputMode:"decimal",placeholder:e("orderForm-limit-price-title",{defaultValue:"Limit Price"}),...F,value:F.value,onChange:D,className:"p-0 bg-transparent text-body2"}),p.createElement("div",{className:"text-t-primary text-body2 mr-1"},"USD"))))},qt=(0,p.memo)((({price:e,percent:t,tip:a,getI18n:r,isDegenMode:n})=>p.createElement(dt,{label:p.createElement(ct.t,{tip:a},p.createElement("div",{className:"flex"},p.createElement("span",null,r("orderForm-liqPrice","Liq. Price")),p.createElement("span",{className:"text-t-third"},"",r("orderForm-liqPrice-margin",{defaultValue:"({{margin}} Margin)",margin:t}))))},p.createElement("div",{className:n?"text-t-sell":"text-t-primary"},e,n?` (${r("orderForm-degen-mode-liqPrice-rekt",{defaultValue:"Rekt"})})`:null,"USD")))),Rt=({getI18n:e,pairBaseConfig:t,pricePrecision:a})=>{const[r,o,l,s]=(0,g.qo)({name:["isLong","leverage","size","entryPrice"]}),i=(0,p.useMemo)((()=>U(o)),[o]),c=(0,p.useMemo)((()=>j(r)),[r]),d=(0,p.useMemo)((()=>(0,u.f)(l)),[l]),m=(0,p.useMemo)((()=>(({leverageMargins:e,size:t})=>{if(!e)return 0n;const a=$({leverageMargins:e,size:t});return BigInt(a.liqLostP??0n)})({leverageMargins:t?.leverageMargins,size:d})),[t,d]),f=(0,p.useMemo)((()=>(0,u.f)(s)),[s]),h=(0,p.useMemo)((()=>(({entryPrice:e,liqLostRate:t,leverage:a})=>e*t/(a||1n)/10000n)({entryPrice:f,liqLostRate:m,leverage:i})),[f,m,i]),b=(0,p.useMemo)((()=>(({entryPrice:e,liqPriceDistance:t,isLong:a})=>a?e-t:e+t)({entryPrice:f,liqPriceDistance:h,isLong:c})),[f,h,c]),v=(0,p.useMemo)((()=>(0,Be.e9)(R((-1n*m).toString()),{decimals:4})),[m]),y=(0,p.useMemo)((()=>(0,Be.e9)(R(m.toString()),{decimals:4})),[m]),k=(0,p.useMemo)((()=>e("orderForm-liqPrice-tip",{defaultValue:"The position will be liquidated when the initial margin (after deducting the fee) reaches a loss of <red>{{margin}}</red>.",margin:y})),[y,e]),C=(0,p.useMemo)((()=>p.createElement("div",{className:"w-[282px]"},p.createElement("div",{className:"text-caption whitespace-pre-line"},p.createElement(x.c,{i18nKey:"orderForm-liqPrice-tip",components:{red:p.createElement("div",{className:"inline text-t-sell"})},defaults:k})))),[k]),{isDegenMode:E}=(0,n.R)();return p.createElement(qt,{isDegenMode:E,price:b>=0n?(0,lt.uf)((0,S.d)(b),a):"-",percent:v,tip:C,getI18n:e})};var zt=a(44478),Ut=a(90471);const $t=({getI18n:e,staticHost:t,Link:a="a",locale:r})=>{const{switchMode:o,isDumbMode:l}=(0,n.C)(),s=(0,Ut.G)((e=>e.changeTradeModeTab)),{futuresPageBasePath:i}=(0,T.z)(),c=(0,p.useCallback)((()=>{o("dumb"),s(zt.O.Dumb)}),[o,s]);return p.createElement(a,{className:"flex flex-row flex-1 items-center h-12 justify-center order-form-mode-switch-button","data-state":l?"active":"inactive",href:`/${r}${i}/BTCUSD`,onClick:c},p.createElement("img",{src:`${t}/static/images/dumb-mode/dumb-neutral.webp`,className:"w-6 h-6 mr-1"}),p.createElement("span",{className:"text-subtitle2 orderform-common-text "+(l?"text-t-primary":"text-t-third")},e("orderForm-dumb-mode-button",{defaultValue:"Dumb"})))},Ot=({getI18n:e,Link:t="a",locale:a})=>{const{switchMode:r,isDumbMode:o}=(0,n.C)(),l=(0,Ut.G)((e=>e.changeTradeModeTab)),s=(0,p.useCallback)((()=>{r("classic"),l(zt.O.Classic)}),[r,l]),{futuresPageBasePath:i}=(0,T.z)();return p.createElement(t,{className:"flex flex-row items-center h-12 flex-1 justify-center order-form-mode-switch-button",href:`/${a}${i}/BTCUSD`,onClick:s,"data-state":o?"inactive":"active"},p.createElement("span",{className:"text-subtitle2 orderform-common-text "+(o?"text-t-third":"text-t-primary")},e("orderForm-futures-mode-button",{defaultValue:"Perp"})))},_t=({getI18n:e,Link:t,locale:a,staticHost:r,enableDumbMode:n})=>p.createElement("div",{className:"flex items-center justify-evenly border-b-[0.6px] border-solid border-border-line order-form-mode-switch"},p.createElement(Ot,{getI18n:e,Link:t,locale:a}),n?p.createElement("div",{className:"border-r-[0.6px] border-solid border-border-line h-6 order-form-mode-switch-separator"}):null,n?p.createElement($t,{getI18n:e,staticHost:r,Link:t,locale:a}):null),Wt=p.memo((({getI18n:e})=>{const{control:t,clearErrors:a,resetField:r}=(0,g.Gc)(),{field:o}=(0,g.bc)({name:"orderType",control:t}),l=o.value,{isDegenMode:i}=(0,n.C)(),c=$e(),d=(0,p.useCallback)((e=>{o.onChange(e),c.setOrderType(e.currentTarget.value),a(),r("takeProfit"),r("stopLoss")}),[a,o,c,r]);return p.createElement("div",{className:"flex items-center"},p.createElement("input",{className:"absolute pointer-events-none [clip:rect(0,0,0,0)]",...o,onChange:d,type:"radio",value:"market",id:"orderFormOrderTypeMarket"}),p.createElement("label",{htmlFor:"orderFormOrderTypeMarket",className:(0,s.cn)("mr-4 rounded cursor-pointer text-t-third hover:text-t-link order-form-order-type  "+("market"===l?"text-t-primary":"text-t-third"))},p.createElement("span",{className:"block text-subtitle2 orderform-common-text"},e("orderForm-market",{defaultValue:"Market"}))),i?null:p.createElement(p.Fragment,null,p.createElement("input",{className:"absolute pointer-events-none [clip:rect(0,0,0,0)]",...o,onChange:d,type:"radio",value:"limit",id:"orderFormOrderTypeLimit"}),p.createElement("label",{htmlFor:"orderFormOrderTypeLimit",className:(0,s.cn)("mr-4 rounded cursor-pointer text-t-third hover:text-t-link order-form-order-type "+("limit"===l?"text-t-primary":"text-t-third"))},p.createElement("span",{className:"block text-subtitle2 orderform-common-text"},e("orderForm-limit",{defaultValue:"Limit"})))))}));var Ht=a(72929),Zt=a(59240);const Qt=Ht.default.create({adapter:["http","fetch"],headers:new Zt.uu({Clienttype:"web"})}),Gt=e=>Qt.get("/bapi/futures/v1/public/future/web3/1inch/swap/swap",{params:e});var Kt=a(17921);function jt(e,t,a=3){return new Kt.O(e).toFixed(t).replace((0,lt.rv)(t,a),"$&,").replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}var Yt=a(64732);const Jt=e=>{const{address:t,isConnected:a}=(0,c.m)(),{isLoading:r,formatted:n}=(0,se.m)({address:t,token:e,query:{enabled:Boolean(t)&&Boolean(e),refetchInterval:1e4}}),{isLoading:o,data:l}=(0,Se.K)({address:t,query:{enabled:Boolean(t),refetchInterval:1e4}});return a?e?r&&void 0===n?null:n:o&&!l?null:l?.formatted:null},Xt="top-[2px] w-1 h-1 rounded-full bg-t-third order-form-slider-mark",ea="bg-border-lineStrong dark:bg-t-onColor",ta="0x55d398326f99059ff775485246999027b3197955",aa=({useWebSocketAssetIndex:e})=>{const t=(0,m.x)(),a=e("USDT").index,[r,n,o]=(0,g.qo)({name:["amountIn","tokenIn","tokenInDecimals"]}),[l,s]=(0,p.useState)(r),[i]=(0,Yt.Z)((()=>{s(r)}),1e3,[r]),{data:c,isLoading:d,isError:f}=(0,Pe.a)({queryKey:["get-1inch-quota",{chainId:t,amountIn:l,tokenInDecimals:o,tokenIn:n}],queryFn:async()=>Gt({chainId:t,src:n,dst:ta,amount:(0,ce.v)(r,o).toString()}),enabled:Boolean(r&&(0,ce.v)(l,o)>0n),retry:()=>!1}),{data:h}=(0,Pe.a)({queryKey:["get-1inch-quota",t,n,o],queryFn:async()=>Gt({chainId:t,src:n,dst:ta,amount:(0,ce.v)("1",o).toString()}),enabled:Boolean(o&&(0,ce.v)("1",o)>0n),retry:()=>!1}),{field:b}=(0,g.bc)({name:"swapToTradeUSDTQty"}),{field:v}=(0,g.bc)({name:"swapToTradeData"}),{field:x}=(0,g.bc)({name:"swapToTradeIndexPrice"}),{field:y}=(0,g.bc)({name:"swapToTradeIsInit",defaultValue:!1}),{getValues:k,setValue:C}=(0,g.Gc)(),E=(0,p.useMemo)((()=>BigInt(c?.data?.data.dstAmount??0)*(0,u.f)(a||"1")/10n**18n),[a,c?.data?.data.dstAmount]),N=(0,p.useMemo)((()=>BigInt(h?.data?.data.dstAmount??0)*(0,u.f)(a||"1")/10n**18n),[a,h?.data?.data.dstAmount]),w=(0,p.useMemo)((()=>N>0n?(0,S.d)(N):void 0),[N]);return(0,p.useEffect)((()=>{const e=k("swapToTradeIndexPrice");!d&&f||void 0===e?w&&C("swapToTradeIndexPrice",w):(0,ce.v)(l,0)>0n&&E>0n&&C("swapToTradeIndexPrice",(0,S.d)(E/(0,ce.v)(l,0)))}),[k,C,f,d,E,l,o,w]),(0,p.useEffect)((()=>{if(!d&&f)return C("swapToTradeIsInit",!0),C("swapToTradeUSDTQty",void 0),void C("swapToTradeData",void 0);c?.data?.data.dstAmount&&c?.data?.data.dstAmount!==k("swapToTradeUSDTQty")&&(C("swapToTradeIsInit",!0),C("swapToTradeUSDTQty",c?.data?.data.dstAmount),C("swapToTradeData",c?.data?.data.tx.data))}),[k,c?.data?.data.dstAmount,C,f,d,c?.data?.data]),p.createElement(p.Fragment,null,p.createElement("input",{type:"hidden",...b,value:b.value||""}),p.createElement("input",{type:"hidden",...v,value:v.value||""}),p.createElement("input",{type:"hidden",...y,value:y.value||""}),p.createElement("input",{type:"hidden",...x,value:x.value||""}),d||!i()?"-":`$${jt((0,B.b)(E,18),2)}`)};function ra({getI18n:e,useWebSocketAssetIndex:t}){const a=(0,Fe.h)(),{sliderThumbProps:r,useAssetPrecision:n}=(0,p.useContext)(ge),{setValue:l}=(0,g.Gc)(),[i,c,d,m,f]=(0,g.qo)({name:["amountIn","indexPrice","tokenInName","tokenIn","isSwapToTrade"]}),h=n((0,o.De)(d,a))||2,b=Jt("0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"===m?"":m),v=Number(b??0),x=(0,u.f)(i||"0"),y=(0,u.f)(b||"0"),k=(0,Be.Y0)(Number(b??0),h),C=String(k).replace(/,/g,""),E=i&&Number(b??0)>0?Number(i)>=Number(C)?100:Number(i)/Number(v)*100:0,N=(100===E?y:x)*(0,u.f)(c||"1")/10n**18n,w=jt((0,S.d)(N),2),P=(0,p.useCallback)((e=>{if(e>=100)l("amountIn",C);else if(e<=0)l("amountIn","0");else{const t=Number(v)/100*e,a=Math.floor(t*10**h)/10**h;l("amountIn",String(a))}}),[h,C,v,l]),I=(0,p.useCallback)((([e])=>{P(e)}),[P]),L=(0,p.useCallback)((e=>{P(e)}),[P]),T=(0,p.useMemo)((()=>[{value:0,className:(0,s.cn)(Xt,ea),style:{left:0},onClick:L},{value:25,className:(0,s.cn)(Xt,E>25?ea:""),style:{left:"25%"},onClick:L},{value:50,className:(0,s.cn)(Xt,E>50?ea:""),style:{left:"50%"},onClick:L},{value:75,className:(0,s.cn)(Xt,E>75?ea:""),style:{left:"75%"},onClick:L},{value:100,className:Xt,style:{right:0},onClick:L}]),[L,E]),M=(0,p.useCallback)((()=>{l("amountIn",C)}),[C,l]);return p.createElement("div",{className:"relative flex flex-col mb-3 w-full"},p.createElement("div",{className:(0,s.cn)("relative flex items-center w-full h-14 min-h-14 mb-1")},p.createElement(kt,{value:[E],trackClassName:"order-form-slider-track",min:0,max:100,onValueChange:I,step:1,thumbProps:{...r,className:"order-form-slider-thumb",dragNode:p.createElement("div",{className:(0,s.cn)("absolute top-[-20px] right-[-6px] bg-interactive-primary px-0.5 text-caption1 rounded-sm text-t-onColor order-form-drag-node",E>90?"right-[2px]":"right-[-6px]")},parseInt(`${E}`,10),"%")},marks:T}),p.createElement("div",{className:"absolute flex text-caption1 left-0 top-10 text-t-third"},p.createElement("span",{className:"mr-1"},`${parseInt(`${E}`,10)}%`),p.createElement("span",null," ","= ",f?p.createElement(aa,{useWebSocketAssetIndex:t}):`$${w}`)),p.createElement("button",{type:"button",className:"absolute flex text-caption1 text-t-primary right-0 top-10",onClick:M},p.createElement("span",{className:"text-t-third mr-1"},e("orderForm-leverage-max","Max")),k)))}const na=({getI18n:e})=>{const[t]=(0,g.qo)({name:["size"]}),a=(0,lt.uf)(t,1);return p.createElement(dt,{label:p.createElement("div",{className:"flex"},p.createElement("span",null,e("orderForm-size-in-usd",{defaultValue:"Size in USD"})))},p.createElement("div",{className:"text-t-primary"},a,"USD"))},[oa,la]=[0,50],sa=({getI18n:e})=>{const{field:t,fieldState:a}=(0,g.bc)({name:"slippage",defaultValue:1,rules:{required:{value:!0,message:e("orderForm-required-field","Required")}}}),r=$e((e=>e.setSlippage));(0,p.useEffect)((()=>{const e=parseFloat(`${t.value}`);isNaN(e)||(e<oa?t.onChange(oa):e>la&&t.onChange(la))}),[t.value,t]);const[,n]=((e=o.YE)=>(0,ue.Z)("trading-v2-order-form-default-values",e))(),l=(0,p.useCallback)(((e="")=>{const a=e?e.replace(",","."):"";n(e?e=>({...e,slippage:a}):e=>({...e,slippage:void 0})),t.onChange(a),r(a),M.set("slippage","input")}),[n,t,r]),i=(0,p.useMemo)((()=>["slippage"]),[]);return p.createElement(je,{errorNames:i,align:"end"},p.createElement("div",{className:(0,s.cn)("flex flex-row flex-1 h-11 py-3 px-2 items-center justify-between text-body2 bg-interactive-interactive01 rounded border border-solid currency-input border-transparent order-form-input-container",a.error&&"!border-interactive-sell")},p.createElement("div",{className:"text-t-third"},p.createElement(ct.t,{tip:p.createElement("div",{className:"w-[282px]"},p.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-slippage-tip01","Used to cancel a market order automatically if the price moved too fast in the direction of the trade before it was opened.")),p.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-slippage-tip02","For example if you wish to market long the current price but before your trade is opened the price moved up 1%, it will cancel automatically.")))},p.createElement("span",{className:"text-t-third whitespace-nowrap"},e("orderForm-slippage","Slippage")))),p.createElement("div",{className:"flex text-t-primary"},p.createElement(Ct.Z,{className:"text-right bg-transparent border-0 text-t-primary outline-none w-full ",autoComplete:"off",allowNegativeValue:!1,inputMode:"decimal",step:.1,value:t.value,onValueChange:l}),p.createElement("span",null,"%"))))},ia=({collateralTokens:e,swapToTradeTokens:t})=>{const{supportedChains:a}=(0,d.o6)(),r=(0,m.x)(),n=(0,p.useMemo)((()=>a.find((e=>e.id===r))),[r,a]),{field:o}=(0,g.bc)({name:"tokenInName"}),{control:l}=(0,g.Gc)(),[s]=(0,g.qo)({name:["tokenIn"],control:l}),[i]=(0,g.qo)({name:["isSwapToTrade"]}),c=(0,p.useMemo)((()=>i?t?.find((e=>e.address===s))?.symbol||"":e?.find((e=>e.tokenAddress===s))?.name||n?.nativeCurrency.symbol||""),[e,n?.nativeCurrency.symbol,i,s,t]);return(0,p.useEffect)((()=>{o.value!==c&&o.onChange(c)}),[o,c]),p.createElement(p.Fragment,null)};var ca=a(66618),da=a(24757);const ma=({getI18n:e,tradeConfig:t,pricePrecision:a})=>{const{brokerName:r,icons:l}=(0,T.z)(),[i,c,d,m,f,h]=(0,g.qo)({name:["isLong","orderType","price","leverage","entryPrice","size"]}),{getValues:b,resetField:v}=(0,g.Gc)(),x=j(i),y=U(m),k=(0,p.useMemo)((()=>(0,u.f)(h)),[h]),C=(0,p.useMemo)((()=>(0,u.f)(f)),[f]),E=K({entryPrice:C,size:k}),{min:N,max:w}=(0,p.useMemo)((()=>(0,da.nW)()),[]),P=t.data?.maxTakeProfitP/10**o.cB.percent*100,I=Math.min(w,P),{isDegenMode:L}=(0,n.C)(),F=y>750n?da.IU:da.dU,{field:B,fieldState:{invalid:D}}=(0,g.bc)({name:"takeProfit",rules:{required:{value:!0,message:e("orderForm-take-profit-required",{defaultValue:"Take Profit is required"})},validate:{isLessMaxTakePrice:t=>{const a=(0,ce.v)(t||"0",o.cB.price),r=e("orderForm-take-profit-over-max",{defaultValue:"Take Profit over the max value"});return a<=2n**64n||r},isTakeProfitPositive:t=>{const a=e("orderForm-take-profit-large-than-zero",{defaultValue:"TP price should large than zero"});return parseFloat(t)>0||a},isTakeProfitLowerThanMaxTakeProfitRatio:t=>{if(E<=0n)return!0;const a=e("orderForm-take-profit-not-in-range",{defaultValue:"Please enter a number of take profit with in the range of {{min}}%-{{max}}%",min:N,max:I}),r=J({entryPrice:C,tpSlPrice:(0,u.f)(`${parseFloat(t||"0")}`),qty:E,isLong:x}),n=X({pnl:r,leverage:y,qty:E,entryPrice:C}),o=parseFloat((0,S.d)(n));return 0n!==E&&o<=I||a},isTakeProfitGreaterThanMinTakeProfitRatio:t=>{if(E<=0n)return!0;const a=J({entryPrice:C,tpSlPrice:(0,u.f)(`${parseFloat(t||"0")}`),qty:E,isLong:x}),r=X({pnl:a,leverage:y,qty:E,entryPrice:C}),n=parseFloat((0,S.d)(r));return 0n!==E&&n>=N||e("orderForm-take-profit-not-in-range",{defaultValue:"Please enter a number of take profit with in the range of {{min}}%-{{max}}%",min:N,max:I})},isTakeProfitLargeThanZero:()=>!0,isTakeProfitLargerThanPrice:t=>{if("true"!==i)return!0;const a=e("orderForm-take-profit-too-low",{defaultValue:"TP price is too low"});return"limit"===c?parseFloat(t)>parseFloat(d)||a:"market"!==c||parseFloat(t)>parseFloat((0,S.d)(C))||a},isTakeProfitLowerThanPrice:t=>{if("true"===i)return!0;const a=e("orderForm-take-profit-too-high",{defaultValue:"TP price is too high"});return"limit"===c?parseFloat(t)<parseFloat(d)||a:"market"!==c||parseFloat(t)<parseFloat((0,S.d)(C))||a}}}}),{field:A,fieldState:{invalid:V}}=(0,g.bc)({name:"stopLoss",rules:{validate:{isLessMaxStopLoss:t=>{const a=(0,ce.v)(t||"0",o.cB.price),r=e("orderForm-stop-loss-over-max",{defaultValue:"Stop loss over the max value"});return a<=2n**64n||r},isStopLossLessThanPrice:t=>{if("true"!==i)return!0;if(""===t)return!0;const a=e("orderForm-stop-loss-too-high",{defaultValue:"SL price is too high"});return"limit"===c?parseFloat(t)<parseFloat(d)||a:"market"!==c||parseFloat(t)<parseFloat((0,S.d)(C))||a},isStopLossLargerThanPrice:t=>{if("true"===i)return!0;if(""===t)return!0;const a=e("orderForm-stop-loss-too-low",{defaultValue:"SL price is too low"});return"limit"===c?parseFloat(t)>parseFloat(d)||a:"market"!==c||parseFloat(t)>parseFloat((0,S.d)(C))||a}}}}),q=B.value?J({entryPrice:C,tpSlPrice:(0,u.f)(`${parseFloat(B.value||"0")}`),qty:E,isLong:x}):0n,R=A.value?J({entryPrice:C,tpSlPrice:(0,u.f)(A.value||"0"),qty:E,isLong:x}):0n,z=X({pnl:q,leverage:y,qty:E,entryPrice:C}),$=X({pnl:R,leverage:y,qty:E,entryPrice:C}),O=$e(),_=(0,p.useCallback)((e=>{e.preventDefault()}),[]),W=(0,p.useMemo)((()=>L?O.degenTakeProfitPercentage?"":O.degenTakeProfitRadio:O.takeProfitPercentage?"":O.takeProfitRadio),[L,O.degenTakeProfitPercentage,O.degenTakeProfitRadio,O.takeProfitPercentage,O.takeProfitRadio]),H=(0,p.useMemo)((()=>L?O.degenStopLossPercentage?"":O.degenStopLossRadio:O.stopLossPercentage?"":O.stopLossRadio),[L,O.degenStopLossPercentage,O.degenStopLossRadio,O.stopLossPercentage,O.stopLossRadio]);(0,p.useEffect)((()=>{v("takeProfitOptions",{defaultValue:W}),v("takeProfitPercentage",{defaultValue:L?O.degenTakeProfitPercentage:O.takeProfitPercentage}),v("stopLossOptions",{defaultValue:H}),v("stopLossPercentage",{defaultValue:L?O.degenStopLossPercentage:O.stopLossPercentage})}),[L]);const{field:Z}=(0,g.bc)({name:"takeProfitOptions",defaultValue:W}),{field:Q}=(0,g.bc)({name:"takeProfitPercentage",defaultValue:L?O.degenTakeProfitPercentage:O.takeProfitPercentage}),{field:G}=(0,g.bc)({name:"takeProfitText",defaultValue:""}),{field:ee}=(0,g.bc)({name:"stopLossOptions",defaultValue:H}),{field:te}=(0,g.bc)({name:"stopLossPercentage",defaultValue:L?O.degenStopLossPercentage:O.stopLossPercentage}),{field:ae}=(0,g.bc)({name:"stopLossText",defaultValue:""}),re=(0,p.useCallback)((e=>{te.onChange(""),ae.onChange(""),ee.onChange(e),M.set("sl","button"),L?(O.setDegenStopLossRadio(e.currentTarget.value),O.setDegenStopLossPercentage("")):(O.setStopLossRadio(e.currentTarget.value),O.setStopLossPercentage(""))}),[L,O,ee,te,ae]),ne=(0,p.useCallback)((e=>{if(/^\d+(\.\d{0,8})?$/.test(e.currentTarget.value)&&e.currentTarget.value.length<19||""===e.currentTarget.value){const t=e.currentTarget.value.replaceAll(/[^0-9.]/g,"");ae.onChange(t),A.onChange(t),ee.onChange(""),te.onChange(""),M.set("sl","input")}}),[A,ee,te,ae]),oe=(0,p.useCallback)((e=>{""===e?.currentTarget.value&&A.onChange("");const t=Number.isNaN(Number(e.currentTarget.value))||""===e.currentTarget.value?e.currentTarget.value:Math.abs(Number(e.currentTarget.value));ae.onChange(""),ee.onChange(""),te.onChange(t),L?(O.setDegenStopLossPercentage(e.currentTarget.value),O.setDegenStopLossRadio("")):(O.setStopLossPercentage(e.currentTarget.value),O.setStopLossRadio(""))}),[L,O,A,ee,te,ae]),le=(0,p.useCallback)((e=>{const t=Number.isNaN(Number(e.currentTarget.value))?e.currentTarget.value:Math.abs(Number(e.currentTarget.value));Q.onChange(""),G.onChange(""),Z.onChange(t),M.set("tp","button"),L?(O.setDegenTakeProfitRadio(e.currentTarget.value),O.setTakeProfitPercentage("")):(O.setTakeProfitRadio(e.currentTarget.value),O.setTakeProfitPercentage(""))}),[L,O,Z,Q,G]),se=(0,p.useCallback)((e=>{G.onChange(""),Z.onChange(""),Q.onChange(e),L?(O.setDegenTakeProfitPercentage(e.currentTarget.value),O.setDegenTakeProfitRadio("")):(O.setTakeProfitPercentage(e.currentTarget.value),O.setTakeProfitRadio(""))}),[L,O,Z,Q,G]),ie=(0,p.useCallback)((e=>{if(/^\d+(\.\d{0,8})?$/.test(e.currentTarget.value)&&e.currentTarget.value.length<19||""===e.currentTarget.value){const t=e.currentTarget.value.replaceAll(/[^0-9.]/g,"");G.onChange(t),B.onChange(t),Z.onChange(""),Q.onChange(""),M.set("tp","input")}}),[B,Z,Q,G]);(0,p.useEffect)((()=>{if(!Q.value&&!Z.value)return;const e=Q.value?parseFloat(Q.value)/100:parseFloat(Z.value),t=x?100*parseFloat(`${e}`)===N?Math.ceil:Math.floor:100*parseFloat(`${e}`)===I?Math.ceil:Math.floor;if(0n!==C){const r=Y({isLong:x,entryPrice:C,returnOfInvestmentRate:e,leverage:y});if(x){const e=10**a,n=t(parseFloat((0,S.d)(r))*e)/e;B.onChange(`${n}`)}else{const e=10**a,n=t(parseFloat((0,S.d)(r))*e)/e;B.onChange(`${n}`)}}else b("takeProfit")&&0n===C&&B.onChange("")}),[C,m,x,y,I,N,a,F,Z.value,Q.value]),(0,p.useEffect)((()=>{if(te.value||ee.value)if(0n!==C){const e=-1*Math.abs(te.value?parseFloat(te.value)/100:parseFloat(ee.value));if(Number.isNaN(e)||0===e)return void A.onChange("");const t=Y({isLong:x,entryPrice:C,returnOfInvestmentRate:e,leverage:y}),r=10**a,n=Math.floor(parseFloat((0,S.d)(t))*r)/r;A.onChange(`${n}`)}else b("stopLoss")&&0n===C&&A.onChange("")}),[C,b,x,y,a,ee.value,te.value,ae.value]);const de=Q.value?parseFloat(Q.value):Z.value?100*parseFloat(Z.value):Math.floor(parseFloat((0,S.d)(z))),me=te.value?-1*Math.abs(parseFloat(te.value)):ee.value?100*parseFloat(ee.value):Math.floor(parseFloat((0,S.d)($))),ue=(0,p.useRef)(null),pe=(0,p.useMemo)((()=>["takeProfit","stopLoss"]),[]);return p.createElement(ca.J2,null,p.createElement("div",{className:"contents [&_[data-radix-popper-content-wrapper]]:!absolute [&_[data-radix-popper-content-wrapper]]:!w-full",ref:ue},p.createElement(je,{errorNames:pe},p.createElement(ca.xo,{className:"w-full orderform-tpsl-popover"},p.createElement("div",{className:(0,s.cn)("text-t-third flex flex-row flex-1 h-11 py-3 px-2 items-center justify-between text-body2 bg-interactive-interactive01 rounded order-form-tpsl-container",(D||V)&&"ring-1 ring-support-error order-form-tpsl-container-error")},e("orderForm-tp-sl",{defaultValue:"TP/SL"}),p.createElement("div",{className:"flex items-center text-t-primary text-body2 overflow-hidden gap-1.5"},p.createElement("div",null,(0,lt.fd)(de),"%"),p.createElement("div",{className:"h-3 border-r border-solid border-t-primary order-form-border-line"}),p.createElement("div",null,0===me?"None":`${(0,lt.fd)(me)}%`)))))),p.createElement(ca.yk,{align:"start",className:"z-[100] p-0 bg-transparent rounded overflow-visible md:max-w-[18rem] max-w-none border border-border-line border-solid items-center relative shadow-elevation3 order-form-tpsl-popover-container",sideOffset:8,onOpenAutoFocus:_,container:ue.current},p.createElement("div",{className:"rounded overflow-hidden"},p.createElement("div",{className:"grid gap-2 grid-cols-[1fr_min-content_64px] py-3 bg-interactive-interactive01 px-2 items-center"},p.createElement("label",{className:"flex items-center gap-2"},p.createElement("span",{className:"text-t-third text-body2"},e("orderForm-tpsl-tp-price",{defaultValue:"TP Price"})),p.createElement(xe,{...G,className:"h-5 text-body2 rounded-none bg-interactive-interactive01 flex-1 p-0 text-end placeholder:text-t-primary focus:placeholder:text-transparent text-t-primary",type:"number",inputMode:"decimal",placeholder:B.value,onChange:ie})),p.createElement(ke.Z,{decorative:!0,orientation:"vertical",className:"h-5"}),p.createElement("label",{className:"flex gap-0.5"},p.createElement("span",{className:"text-body2 text-t-third flex items-center"},"astherus"===r&&l.PlusD?p.createElement(l.PlusD,{className:"w-[10px] h-[10px]"}):"+"),p.createElement(xe,{...Q,className:"h-5 text-body2 rounded-none bg-interactive-interactive01 flex-1 p-0 placeholder:text-t-primary focus:placeholder:text-transparent text-end text-t-primary",placeholder:(0,lt.fd)(de),type:"number",inputMode:"numeric",onChange:se}),p.createElement("span",{className:"text-t-primary text-body2"},"%"))),p.createElement("div",{className:"bg-interactive-interactiveBg px-2 h-10 flex justify-between"},F.map((e=>p.createElement("label",{key:e.key,className:"text-caption1 text-t-third text-center cursor-pointer hover:text-t-linkHover flex items-center justify-center has-[:checked]:text-t-primary"},e.label,p.createElement("input",{...Z,type:"radio",value:e.key,className:"sr-only",onChange:le,checked:String(Z.value)===e.key}))))),p.createElement("div",{className:"grid gap-2 grid-cols-[1fr_min-content_64px] py-3 bg-interactive-interactive01 px-2 items-center"},p.createElement("label",{className:"flex items-center gap-2"},p.createElement("span",{className:"text-t-third text-body2"},e("orderForm-tpsl-sl-price",{defaultValue:"SL Price"})),p.createElement(xe,{...ae,className:"h-5 text-body2 rounded-none bg-interactive-interactive01 flex-1 p-0 text-end placeholder:text-t-primary focus:placeholder:text-transparent text-t-primary",type:"number",inputMode:"decimal",placeholder:A.value,onChange:ne})),p.createElement(ke.Z,{decorative:!0,orientation:"vertical",className:"h-5"}),p.createElement("label",{className:"flex gap-0.5"},p.createElement("span",{className:"text-body2 text-t-third flex items-center"},"astherus"===r&&l.MinusD?p.createElement(l.MinusD,{className:"w-[10px] h-[10px]"}):"-"),p.createElement(xe,{...te,className:(0,s.cn)("h-5 text-body2 rounded-none bg-interactive-interactive01 flex-1 p-0 focus:placeholder:text-transparent text-end text-t-primary",0===me?"placeholder:text-t-placeholder":"placeholder:text-t-primary"),placeholder:0===me?"ROI":`${(0,lt.fd)(Math.abs(me))}`,type:"number",inputMode:"numeric",onChange:oe}),p.createElement("span",{className:"text-t-primary text-body2"},"%"))),p.createElement("div",{className:"bg-interactive-interactiveBg px-2 h-10 flex justify-between"},da.t_.map((e=>p.createElement("label",{key:e.key,className:"text-caption1 text-t-third text-center cursor-pointer hover:text-t-linkHover flex items-center justify-center has-[:checked]:text-t-primary first:justify-start last:justify-end"},e.label,p.createElement("input",{...ee,type:"radio",value:e.key,className:"sr-only",checked:ee.value===e.key,onChange:re}))))))))},ua=({getI18n:e,symbol:t,pricePrecision:a=2,useMarketInfo:r,useWebsocketSymbolMarkPrice:n,pairBaseConfig:o})=>{const{isMobile:l}=(0,k.F)(),{getValues:s}=(0,g.Gc)(),[i,c]=(0,g.qo)({name:["price","indexPrice"]}),[d,m,f,h]=s(["isLong","pairBase","amountIn","leverage"]),b=n(t),v=(0,u.f)(b.close??"0"),x=j(d),y=r(m),C=(0,u.f)(f||"0"),E=U(h||1),N=y.data?.longQty,w=y.data?.shortQty,P=(0,u.f)(`${i||0}`),I=V({collateral:C,leverage:E,indexPrice:c}),L=Q({isLong:x,collateral:C,marketPrice:v,size:I,slippageConfig:o?.slippageConfig,longQty:N,shortQty:w,leverage:E}),T=te({limitPrice:P,spread:L,isLong:x});return 0n!==T?p.createElement(dt,{label:p.createElement(ct.t,{tip:p.createElement("div",null,p.createElement("div",{className:"text-caption mb-6"},e("orderForm-trigger-price-tip",{defaultValue:"In order to protect the price from being manipulated, the limit order will be triggered when Limit price * ( 1 +/- Spread), and the transaction will be executed at the Limit price"})),p.createElement("div",{className:"text-caption"},e("orderForm-trigger-price-long-tip",{defaultValue:"Long Trigger Price = Limit Price * (1 - Spread%)"})),p.createElement("div",{className:"text-caption"},e("orderForm-trigger-price-short-tip",{defaultValue:"Short Trigger Price = Limit Price * (1 + Spread%)"})))},p.createElement("div",{className:"flex"},p.createElement("span",{className:l?"border-b border-dashed border-b-t-secondary":""},e("orderForm-limit-trigger-price",{defaultValue:"Trigger Price"}))))},p.createElement("div",{className:"text-t-primary"},Math.ceil(parseFloat((0,S.d)(T))*10**a)/10**a,"USD")):null},pa=({assetDecimals:e,ee:t,enableDumbMode:a,filterTabInfo:r,filterTabItems:l=F.n,getI18n:h,guideNoticeKey:b,isLeverageLoading:v,isLight:x,Link:y,locale:k,onChainPerpContractAddress:C,onError:E,onSubmit:N,pairBase:w,pricePrecision:P,siteHost:I,staticHost:S,tradeConfig:B,sliderThumbProps:D,useActionBtnDisabled:A,useAssetPrecision:V,useChangeSymbol:R,useCoachmark:$,useCurrentProduct:_,useFuturesMarket:W,useFuturesMarketSort:H,useGetCollateralTokens:Z,useGetMaxCollateral:j,useGetPairMaxTpRatios:Y,useIsMarketClose:J,useMarketInfo:X,usePairByBaseConfig:ee,useSymbolConfigInfo:te,useSymbolLogo:ae,useTokenApprove:ne,useTrackPopupViewWithWalletAddress:oe,useTrackWebClickWithWalletAddress:le,useWebSocketAssetIndex:se,useWebsocketSymbolMarkPrice:ie,useGetSwapToTradeTokens:ce,isUnsupportedNetwork:de=!1,defaultChainId:me=i.e.id,handleSwitchNetwork:ue=(()=>{})})=>{const{chain:fe}=(0,c.m)(),{brokerName:he}=(0,T.z)(),{supportedChains:be}=(0,d.o6)(),ve=(0,m.x)(),xe=(0,p.useMemo)((()=>be.find((e=>e.id===ve))),[ve,be]),ye=Ue(),ke=$e(),{isDegenMode:Ce,tradingMode:Ee}=(0,n.C)(),Ne=_(),{symbol:we,degenPairSymbol:Pe,degenPairBase:Ie}=Ne,Le=(0,g.cI)({shouldFocusError:!1,reValidateMode:"onSubmit",defaultValues:{isLong:ye.isLong,orderType:Boolean(Ie)&&Boolean(Pe)&&Ce?"market":ke.orderType,tokenIn:ke.tokenIn[ve],pairBase:w,amountIn:ye.amountIn,price:"",takeProfit:"",stopLoss:"",leverage:Boolean(Ie)&&Boolean(Pe)?ke.degenLeverage:ke.leverage,slippage:ke.slippage,fee:"0",spread:"0",entryPrice:"0",acceptablePrice:"",qty:"",size:""}});(0,p.useEffect)((()=>{Ie&&Le.resetField("leverage",{defaultValue:Boolean(Ie)&&Boolean(Pe)?ke.degenLeverage:ke.leverage})}),[Ie,Pe,Le,ke.degenLeverage,ke.leverage]);const[Te,Me]=(0,g.qo)({name:["orderType","pairBase"],control:Le.control}),{handleSubmit:Fe,reset:Se,setValue:Be}=Le,De=!!Ie&&!!Pe,{data:Ae}=ee(Me||w),Ve=(0,p.useMemo)((()=>Ae?.leverageMargins?.reduce(((e,t)=>t.maxLeverage>e?t.maxLeverage:e),0)||1),[Ae]),qe=Y(Me),Re=(0,p.useMemo)((()=>qe.data&&0!==qe.data.length?Math.min(...qe.data.map((e=>e.leverage))):1),[qe.data]),ze=Z(),Oe=(0,p.useMemo)((()=>ze?.map((e=>o.KF.has(e.tokenAddress)?{...e,tokenAddress:"",name:fe?fe.nativeCurrency.symbol:xe?.nativeCurrency.symbol}:e))?.filter((e=>{switch(Ee){case"classic":case"degen":return e?.asMargin;case"dumb":return e?.asBet;default:return!0}})).filter(Boolean)||[]),[fe,xe?.nativeCurrency.symbol,ze,Ee]);(0,p.useEffect)((()=>{Be("pairBase",Ce?Ie:w)}),[Ie,Ce,w,Be]);const _e=(0,p.useMemo)((()=>({ee:t,filterTabInfo:r,filterTabItems:l,getI18n:h,isLeverageLoading:v,isLight:x,Link:y,locale:k,maxLeverage:Ve,minLeverage:Re,siteHost:I,sliderThumbProps:D,useActionBtnDisabled:A,useAssetPrecision:V,useChangeSymbol:R,useCurrentProduct:_,useFuturesMarket:W,useFuturesMarketSort:H,useIsMarketClose:J,useMarketInfo:X,useSymbolConfigInfo:te,useSymbolLogo:ae,usePairByBaseConfig:ee,useTokenApprove:ne,useTrackPopupViewWithWalletAddress:oe,useTrackWebClickWithWalletAddress:le,useWebsocketSymbolMarkPrice:ie,isUnsupportedNetwork:de,defaultChainId:me,handleSwitchNetwork:ue})),[t,r,l,h,v,x,y,k,Ve,Re,I,D,A,V,R,_,W,H,J,X,te,ae,ee,ne,oe,le,ie,de,me,ue]),We=(0,p.useCallback)((()=>{Se(void 0,{keepDirtyValues:!0,keepValues:!0,keepDefaultValues:!0})}),[Se]),He=X(w),[Ze,Qe]=(0,f.Z)(!1),Ge=(0,p.useRef)(null),Ke=(0,p.useCallback)((()=>{Ge.current?.resolve&&(Ge.current?.resolve(),Qe(!1))}),[Qe]),je=(0,p.useCallback)((()=>{Ge.current?.reject&&(Qe(!1),Ge.current?.reject(new Error("User cancel")))}),[Qe]),Ye=(0,p.useCallback)((async(e,t)=>{const a=e.marketPrice??0n,r=(0,u.f)(`${e.price||0}`),n="true"===e.isLong,o=(0,u.f)(e.size),l=(0,u.f)(e.amountIn||"0"),s=Q({isLong:n,leverage:U(e.leverage),marketPrice:a,slippageConfig:Ae?.slippageConfig,longQty:He?.data?.longQty,shortQty:He?.data?.shortQty,size:o}),i=G({isLong:n,orderType:Te,limitPrice:r,marketPrice:a,spread:s}),c=K({entryPrice:i,size:o}),d=B?.data?.executionFeeUsd||0n,m=z(Ae?.feeConfig?.openFeeP),p=l*(0,u.f)(e.indexPrice||"1")/10n**BigInt(e.tokenInDecimals??0),g=q({collateral:p,executionFee:d,openFee:m,orderType:e.orderType}),f=Ae?.leverageMargins?O({leverageMargins:Ae?.leverageMargins,size:o}):0n,h=(({initialMargin:e,initialLostRate:t,orderType:a,qty:r,limitPrice:n,marketPrice:o})=>{const l="limit"===a?n*r:o*r,s=e*t;return 0n===s||0n===l?0n:s/(l/10n**18n)*10n**14n})({orderType:e.orderType,limitPrice:r,marketPrice:a,qty:c,initialMargin:g,initialLostRate:f}),b=0n===h?0n:h/((0,u.f)("4")/10n**18n);if(e.amountIn&&s>=b&&s<h){Qe(!0);const e=()=>{let e,t;return{promise:new Promise(((a,r)=>{e=a,t=r})),resolve:e,reject:t}};Ge.current=e();try{await(Ge.current?.promise)}catch(e){return t.preventDefault(),void(Ge.current=null)}finally{Ge.current=null}}await N({...e,userHeatMap:M.toObject()},void 0,We)}),[He?.data?.longQty,He?.data?.shortQty,N,Te,Ae?.feeConfig?.openFeeP,Ae?.leverageMargins,Ae?.slippageConfig,We,Qe,B?.data?.executionFeeUsd]),et=ce();return p.createElement(g.RV,{...Le},p.createElement("form",{noValidate:!0,onSubmit:Fe(Ye,E)},p.createElement(_t,{getI18n:h,Link:y,locale:k,staticHost:S,enableDumbMode:a}),p.createElement("div",{className:"p-4"},p.createElement(ge.Provider,{value:_e},p.createElement(p.Fragment,null,p.createElement("div",{className:"mb-4"},p.createElement(it,{getI18n:h})),p.createElement("div",{className:"mb-2 flex flex-row justify-between z-[2]"},p.createElement(Wt,{getI18n:h}),p.createElement("div",{className:"flex flex-row items-center text-subtitle2"},Ce&&p.createElement(Xe,{getI18n:h}),De?p.createElement(At,{symbol:we,pairBaseConfig:Ae,getI18n:h,isLoading:v,staticHost:S,Link:y}):p.createElement(Lt,{minLeverage:Re,maxLeverage:Ve}))),"limit"===Te?p.createElement(Vt,{useMarketInfo:X,useWebsocketSymbolMarkPrice:ie,getI18n:h,symbol:we,pricePrecision:P,pairBaseConfig:Ae}):null,"market"===Te?p.createElement(re,{useWebsocketSymbolMarkPrice:ie,pairBaseConfig:Ae,useMarketInfo:X,symbol:we}):null,p.createElement("div",{className:"relative mb-4"},p.createElement(Je,{symbol:we,collateralTokens:Oe,useGetMaxCollateral:j,getI18n:h,tradeConfig:B,pairBaseConfig:Ae,onChainPerpContractAddress:C,useCoachmark:$,guideNoticeKey:b,swapToTradeTokens:et,staticHost:S}),p.createElement(ra,{getI18n:h,useWebSocketAssetIndex:se})))),p.createElement("div",{className:(0,s.cn)("mb-6 relative isolate z-[2] order-form-tpsl-slippage-container","market"===Te&&"grid grid-cols-2 gap-2")},p.createElement(ma,{getI18n:h,useWebsocketSymbolMarkPrice:ie,pairBaseConfig:Ae,useMarketInfo:X,symbol:we,pricePrecision:P,tradeConfig:B,useAssetPrecision:V}),"market"===Te?p.createElement(sa,{getI18n:h}):null),p.createElement(ht,{useWebSocketAssetIndex:se}),p.createElement(ia,{collateralTokens:Oe,swapToTradeTokens:et}),p.createElement(ot,{symbol:we,getI18n:h,tradeConfig:B,useTokenApprove:ne,collateralTokens:Oe,useMarketInfo:X,useWebsocketSymbolMarkPrice:ie,pricePrecision:P,pairBaseConfig:Ae,useActionBtnDisabled:A,useCurrentProduct:_,swapToTradeTokens:et,isUnsupportedNetwork:de,defaultChainId:me,handleSwitchNetwork:ue}),p.createElement("div",{className:"mt-2"},"limit"===Te?p.createElement(ua,{getI18n:h,symbol:we,pricePrecision:P,useMarketInfo:X,useWebsocketSymbolMarkPrice:ie,pairBaseConfig:Ae}):null,p.createElement(na,{getI18n:h,symbol:we,pairBaseConfig:Ae,tradeConfig:B,useMarketInfo:X,useWebsocketSymbolMarkPrice:ie}),"market"===Te?p.createElement(mt,{getI18n:h,symbol:we,useMarketInfo:X,useWebsocketSymbolMarkPrice:ie,pairBaseConfig:Ae,pricePrecision:P}):null,p.createElement(Rt,{getI18n:h,symbol:we,useMarketInfo:X,useWebsocketSymbolMarkPrice:ie,pairBaseConfig:Ae,pricePrecision:P}),p.createElement(gt,{getI18n:h,tradeConfig:B,pairBaseConfig:Ae,assetDecimal:e,useAssetPrecision:V,Link:y}),p.createElement(ft,{symbol:we,useMarketInfo:X,tradeConfig:B,pairBaseConfig:Ae,useWebSocketAssetIndex:se,useWebsocketSymbolMarkPrice:ie})))),"apx"===he&&p.createElement("div",{className:"px-4 pt-2 order-form-bottom hidden sm:flex"},p.createElement(L,{getI18n:h,Link:y||"a",brand:"Apx"})),p.createElement("div",{className:"p-4 order-form-bottom"},p.createElement(pe,{getI18n:h,staticHost:S})),p.createElement(st,{open:Ze,getI18n:h,onClose:je,onConfirm:Ke,useWebsocketSymbolMarkPrice:ie,useMarketInfo:X,symbol:we,pricePrecision:P,pairBaseConfig:Ae}))};var ga=a(41822),fa=a(63840),ha=a(92343),ba=a(43693),va=a(33687),xa=a(63469),ya=a(17845),ka=a(87685),Ca=a(85177),Ea=a(2547),Na=a(96988),wa=a(52590),Pa=a(32327),Ia=a(1619),La=a(43785),Ta=a(82452),Ma=a(77884),Fa=a(29376),Sa=a(73586);const Ba=()=>{const{chain:e,address:t,isConnected:a}=(0,c.m)(),{supportedChains:r}=(0,d.o6)(),n=(0,m.x)(),l=(0,p.useMemo)((()=>r.find((e=>e.id===n))),[n,r]),{data:s}=(()=>{const e=(0,Fa.E)();return(0,Ze.u)({...e,functionName:"tokensV3"})})(),{data:g,isFetched:f}=(0,Pe.a)({queryKey:["assetIndex",i.e.id],queryFn:()=>(async()=>{try{return fetch(`${va.brokerConfig.apiBaseUrl}/fapi/v1/assetIndex`).then((e=>e.json()))}catch(e){return[]}})(),staleTime:1/0,refetchInterval:!!w?.watch&&1e4}),h=(0,p.useMemo)((()=>new Map(g?.map((e=>[e.symbol.slice(0,e.symbol.lastIndexOf("USD")),(0,u.f)(e.index||"0")]))||[])),[g]),b=(0,p.useMemo)((()=>s?.map((e=>e.tokenAddress))),[s]),{data:v}=(0,Se.K)({address:t,query:{enabled:Boolean(t)}}),{data:x,isFetched:y}=(e=>{const t=e.tokens.map((t=>({address:t,abi:Qe.Wo,functionName:"balanceOf",args:[e.address],chainId:e.chainId}))),a=e.tokens.map((t=>({address:t,abi:Qe.Wo,functionName:"decimals",chainId:e.chainId}))),r=e.tokens.map((t=>({address:t,abi:Qe.Wo,functionName:"symbol",chainId:e.chainId}))),{data:n,isLoading:o,refetch:l,isError:s,queryKey:i,isFetched:c}=(0,Ma.N)({allowFailure:!1,contracts:t.concat(a).concat(r),scopeKey:e.scopeKey,query:e.query}),d=(0,p.useMemo)((()=>{const t=[];if(n)for(let a=0,r=e.tokens.length;a<r;a+=1){const r=n[a],o=n[a+e.tokens.length],l=n[a+2*e.tokens.length];t.push({data:r,decimals:o,symbol:l,formatted:(0,B.b)(r??0n,o??0)})}return t}),[e.tokens.length,n]);return(0,p.useMemo)((()=>({data:d,isLoading:o,isFetched:c,refetch:l,isError:s,queryKey:i})),[d,o,l,s,i,c])})({address:t,tokens:b||[],query:{enabled:Boolean(t)&&Boolean(b)}}),k=(0,Sa.n)(b),C=(0,p.useMemo)((()=>k?.map((e=>({...e,functionName:"symbol"})))),[k]),{data:E}=(0,Ma.N)({contracts:C,query:{enabled:Boolean(C?.length&&C?.length>0)}}),N=(0,p.useMemo)((()=>s?.map(((t,a)=>o.KF.has(t.tokenAddress)?{...t,name:(e?e.nativeCurrency.symbol:l?.nativeCurrency.symbol)||"",formatted:v?.formatted||"0"}:{...t,name:E?.at(a)?.result||"",formatted:x?.at(a)?.formatted||"0"}))),[e,l?.nativeCurrency.symbol,s,v?.formatted,E,x]);var w;return(0,p.useMemo)((()=>!f||!y&&a||!N?[]:a&&N?Array.from(N)?.sort(((e,t)=>{const a=(0,u.f)(e.formatted)*(h.get((0,o.De)(e.name))||0n)/10n**18n,r=(0,u.f)(t.formatted)*(h.get((0,o.De)(t.name))||0n)/10n**18n;return Number((0,S.d)(r))-Number((0,S.d)(a))})):N),[f,y,a,N,h])};var Da=a(72200);const Aa=({base:e})=>{const t=(0,Da.t)(e,{watch:!1});return(0,p.useCallback)((e=>{const a=(({leverageMarginTier:e,leverage:t})=>{const a=Array.from(e??[])?.sort(((e,t)=>e.maxLeverage-t.maxLeverage)).find((e=>t<=e.maxLeverage));return a?.notionalUsd??0n})({leverageMarginTier:t.data?.leverageMargins,leverage:e});return(({maxOrderNotional:e,leverage:t})=>e/BigInt(t))({maxOrderNotional:a,leverage:e})}),[t.data?.leverageMargins])};var Va=a(66779),qa=a(24722),Ra=a(54872),za=a(48118),Ua=a(26101),$a=a(25254);class Oa extends Error{constructor(e,t,a){super(e),this.messageDetail=t,this.code=a}}const _a=e=>{return o=Qt.get("/bapi/futures/v1/public/future/web3/1inch/swap/tokens",{params:e}),t=void 0,a=void 0,n=function*(){const e=yield o;if(!e.data.success)throw new Oa(e.data.message,e.data.messageDetail,e.data.code);return e.data},new((r=void 0)||(r=Promise))((function(e,o){function l(e){try{i(n.next(e))}catch(e){o(e)}}function s(e){try{i(n.throw(e))}catch(e){o(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof r?a:new r((function(e){e(a)}))).then(l,s)}i((n=n.apply(t,a||[])).next())}));var t,a,r,n,o};var Wa=a(59712);const Ha=(0,p.memo)((()=>{const{brokerId:e}=va.brokerConfig,{isDegenMode:t}=(0,n.C)(),a=(0,p.useRef)(t),{isLight:s}=(0,wa.F)(),{symbol:i,products:c}=(0,Ca.GS)(),{getI18n:d,i18n:g}=(0,Na.V6)(),f=(0,ka.E4)(),{setDisabled:h}=(0,Ca.a9)(),[b,v]=(0,ka.zC)(),{data:x,isLoading:y}=(0,qa.S)(),k=(0,ka.fV)(i),C=(0,p.useMemo)((()=>(x||[]).find((e=>e.name.replace("/","").toLowerCase()===i.toLocaleLowerCase()))),[x,i]),E=(0,ga.NL)(),N=(0,at.Z)(),w=(0,fa.t)(),P=Ba(),I=P?.find((e=>"USDT"===e.name)),L=(0,p.useCallback)((async(a,r,n)=>{const{pairBase:s,isLong:c,tokenIn:m,amountIn:p,price:g,stopLoss:x,takeProfit:y,orderType:k,acceptablePrice:C,tokenInDecimals:P,fee:L,leverage:T,entryPrice:M,indexPrice:F,qty:B,userHeatMap:D,tokenInName:A,isSwapToTrade:V,swapToTradeData:q}=a;h(!0),(0,La.wu)(t?"click_open_degen_position_button":"tradingV2_place_order",{...D});const R=x?(0,ce.v)(x,o.cB.price):0n,z=(0,ce.v)(y,o.cB.price),U=(0,ce.v)(p,P),$=(0,u.f)(p)*(0,u.f)(F||"1")/10n**18n,O="true"===c,_="ASBNB"===A.toUpperCase()?985n:995n;try{if("limit"===k){const t=Math.floor(parseFloat(g)*10**o.cB.price),a=($-(0,u.f)(L)*(0,u.f)(F||"1")/10n**18n)*BigInt(T)*10n**BigInt(o.cB.qty)/(0,u.f)(g),r=T>=v||T>=750?a*_/1000n:T===b&&1!==b?1100n*a/1000n:a;Wa.debug("limit order",{parsedAmountInBasedUSD:$.toString(),pairBase:s,direction:O,tokenIn:m,tempQty:a,parsedAmountIn:U.toString(),finalQty:r,limitPrice:t,stopLossPrice:R.toString(),takeProfitPrice:z.toString(),OnChainPerpBrokerCode:e});const c={amountIn:U,broker:e,isLong:O,pairBase:s,price:BigInt(t),qty:r,stopLoss:R,takeProfit:z,tokenIn:m};await(0,l.sW)({address:f.address,amountIn:p,config:N,getI18n:d,leverage:T,limitPrice:g,onUserConfirm:()=>n?.(),openLimitOrderParams:c,publicClient:w,symbol:i,tokenInName:A}),(0,La.wu)("tradingV2_place_order_success")}if("market"===k){const a=Math.floor(parseFloat(C)*10**o.cB.price),r=(0,u.f)(B),c=BigInt(Math.floor(parseFloat((0,S.d)(r))*10**o.cB.qty)),g=T>=v||T>=750?c*_/1000n:T===b&&1!==b?1100n*c/1000n:c,h=($-(0,u.f)(L)*(0,u.f)(F||"1")/10n**18n)*BigInt(T)*10n**BigInt(o.cB.qty)/(0,u.f)(M);Wa.debug("market order",{leverage:T,maxLeverage:v,isMaxLeverage:T>=v,pairBase:s,direction:O,tokenIn:m,parsedAmountInBasedUSD:(0,S.d)($),parsedAmountIn:U.toString(),tempQty:c.toString(),qtyFromAmountIn:h.toString(),finalQty:g.toString(),acceptPrice:a,stopLossPrice:R.toString(),takeProfitPrice:z.toString(),OnChainPerpBrokerCode:e,entryPrice:M,fee:(0,u.f)(L).toString(),indexPrice:F,feeInUsd:(0,S.d)((0,u.f)(L)*(0,u.f)(F||"1")/10n**18n)}),V?await(0,l.J6)({address:f.address,amountIn:p,config:N,getI18n:d,leverage:T,onUserConfirm:()=>n?.(),openMarketTradeParams:{swapData:q,data:{amountIn:U,broker:e,isLong:O,pairBase:s,price:BigInt(a),qty:g,stopLoss:R,takeProfit:z,tokenIn:I?.tokenAddress}},publicClient:w,symbol:i,tokenInName:A}).then((()=>{(0,La.wu)(t?"open_degen_position_success":"tradingV2_place_order_success")})):await(0,l.k3)({address:f.address,amountIn:p,config:N,getI18n:d,leverage:T,onUserConfirm:()=>n?.(),openMarketTradeParams:{amountIn:U,broker:e,isLong:O,pairBase:s,price:BigInt(a),qty:g,stopLoss:R,takeProfit:z,tokenIn:m},publicClient:w,symbol:i,tokenInName:A}).then((()=>{(0,La.wu)(t?"open_degen_position_success":"tradingV2_place_order_success")}))}}catch(e){Wa.error(e),e instanceof ha.ab||(0,La.wu)(t?"open_degen_position_error":"tradingV2_place_order_error"),(0,La.wu)(t?"open_degen_position_error":"tradingV2_place_order_error"),ne.A.error(e.shortMessage??e?.reason??e.error??e?.message)}finally{h(!1),await E.invalidateQueries({predicate:e=>"balance"===e.queryKey[0].entity||"getMarketInfo"===e.queryKey[0].functionName}),ya.ee.emit("REFETCH_POSITION_LIST",void 0),ya.ee.emit("REFETCH_ORDER_LIST",void 0)}}),[h,t,v,b,e,f.address,N,d,w,i,I?.tokenAddress,E]),T=(0,p.useCallback)((()=>{}),[]),M=(0,za.J)(),F=(0,Ta.$)();(0,p.useEffect)((()=>{t?!a.current&&t&&(0,La.wu)("click_degen_mode_button"):a.current=!1}),[t]);const{dumb:B,swapToTrade:D}=(0,Ea.B)(),{data:A}=(e=>{const t=(0,m.x)();return(0,Pe.a)({queryKey:["get-swap-to-trade-tokens",{chainId:t}],queryFn:async()=>_a({chainId:t}),enabled:e?.enabled})})({enabled:D}),V=(0,p.useCallback)((()=>A?.data?Object.values(A?.data.tokens):[]),[A?.data]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(pa,{assetDecimals:F.data,ee:Ia.ee,enableDumbMode:B,getI18n:d,isLeverageLoading:y,isLight:s,Link:ba.G,locale:g.language,maxLeverage:v,minLeverage:b,onChainPerpContractAddress:f.address,onError:T,onSubmit:L,pairBase:C?.base||"",pricePrecision:k,products:c,siteHost:va.brokerConfig.staticBaseUrl,staticHost:va.brokerConfig.apxStaticBaseUrl,tradeConfig:M,useActionBtnDisabled:Ca.a9,useAssetPrecision:ka.RK,useChangeSymbol:ka.d0,useCurrentProduct:ka.j2,useFuturesMarket:ka.Pj,useFuturesMarketSort:ka.e,useGetCollateralTokens:Ba,useGetMaxCollateral:Aa,useGetPairMaxTpRatios:Ua.r,useIsMarketClose:$a.Z,useMarketInfo:Va.c,usePairByBaseConfig:Da.t,useSymbolConfigInfo:ka.Kn,useSymbolList:qa.S,useSymbolLogo:ka.sH,useTokenApprove:Ra.Z,useTrackPopupViewWithWalletAddress:ka.Tb,useTrackWebClickWithWalletAddress:ka.fM,useWebSocketAssetIndex:ka.Ms,useWebsocketSymbolMarkPrice:ka.Le,enableActivityNotice:!0,useCoachmark:Pa.KO,guideNoticeKey:xa.IL,useGetSwapToTradeTokens:V})})})),Za=({symbol:e,useWebsocketSymbolMarkPrice:t})=>{const{field:a}=(0,g.bc)({name:"acceptablePrice",shouldUnregister:!0,defaultValue:""}),{control:r}=(0,g.Gc)(),[n,o]=(0,g.qo)({name:["slippage","isLong"],control:r}),l=t(e),s=(0,u.f)(l.close??"0"),i=j(o),c=(0,u.f)("0"),d=G({isLong:i,orderType:"market",limitPrice:c,marketPrice:s,spread:0n}),m=ee({entryPrice:d,slippage:n||0,isLong:i});return(0,p.useEffect)((()=>{a.value!==m&&a.onChange(`${m}`)}),[m,a]),(0,p.useEffect)((()=>()=>{a.onChange("")}),[]),p.createElement("input",{type:"hidden",...a,value:void 0===a.value?"":a.value})};var Qa=a(86645);const Ga=e=>{const t=(0,Fe.h)(),{suffix:a,getI18n:r,onChainPerpContractAddress:n,predictionConfig:l,symbol:i,predictionPairs:d,...f}=e,{useAssetPrecision:h}=(0,p.useContext)(fe),{getValues:b}=(0,g.Gc)(),[v,x,y,k,C]=(0,g.qo)({name:["tokenIn","indexPrice","tokenInName","period","pairBase"]}),E=h((0,o.De)(y,t))||2,{address:N,isConnected:w,chain:P}=(0,c.m)(),{data:I,decimals:L,symbol:T}=(0,se.m)({address:N,token:v,query:{enabled:Boolean(N)&&w}}),{data:F}=(0,Se.K)({address:N,query:{enabled:Boolean(N)&&w}}),B=v?L:F?.decimals,D=v?I:F?.value,A=v?T:F?.symbol;(0,Ze.u)({address:v,abi:Qe.Wo,functionName:"allowance",args:[N,n],query:{enabled:Boolean(w&&v&&N&&n),refetchInterval:3e4}});const V=(0,m.x)(),q=(0,Ze.u)({chainId:V,abi:Qa.Z,address:n,functionName:"getPredictionMarket",args:[C,[k]],query:{enabled:Boolean(void 0!==k&&C)}}),{field:R,fieldState:{error:z}}=(0,g.bc)({name:"amountIn",rules:{shouldUnregister:!0,required:r("orderForm-required-field","Required"),validate:{isInsufficientCollateralBalance:e=>!((0,ce.v)(`${e}`,B??18)>(D??(0,ce.v)("0",B??18)))||r("orderForm-button-InsufficientBalance",{defaultValue:"Insufficient Balance"}),isSafeInteger:e=>!Number.isSafeInteger(e),isNotANumber:e=>!Number.isNaN(e),isLargerThanMinCollateral:e=>{const a=v?B:P?.nativeCurrency.decimals??18,n=(0,u.f)(x),s=(0,ce.v)(`${e}`,a??18)*10n**BigInt(18-(a??18)),i=(l?.minBetUsd||0n)*10n**18n/n;return s>=i||(e=>{const a=Math.ceil(parseFloat(e)*10**E)/10**E;return r("orderForm-dumb-mode-is-larger-min-bet",{defaultValue:"The minimum principal is {{minPrincipal}} {{tokenInName}}",minPrincipal:a,tokenInName:(0,o.De)(A,t)})})((0,S.d)(i))},isBelowOrderMaxOI:e=>{if(!q.data)return!0;const t=j(b("isLong")),a=d?.find((e=>e.base===C))?.predictionPeriods.find((e=>e.period===k)),n=t?a?.maxUpUsd:a?.maxDownUsd;if(!n)return!0;const o=t?q.data[0].upUsd:q.data[0].downUsd,l=(0,u.f)(x);return(0,ce.v)(e||"0",B??18)*l/10n**BigInt(B??18)+o<=n||r("orderForm-button-reach-max-oi",{defaultValue:"{{symbol}} has reached the position limit",symbol:i})}}}}),U=(0,p.useCallback)((e=>{(/^\d+(\.\d{0,8})?$/.test(e.target.value)&&e.target.value.length<19||""===e.target.value)&&(R.onChange(e.target.value.replaceAll(/[^0-9.]/g,"")),M.set("initial_margin","input"))}),[E]),$=(0,p.useMemo)((()=>["amountIn"]),[]);return p.createElement("div",{className:"flex flex-col"},p.createElement(je,{errorNames:$},p.createElement("div",{className:(0,s.cn)("flex gap-2 bg-interactive-interactive01 h-11 py-1.5 px-2 rounded border border-transparent border-solid has-[:focus]:border-transparent items-center order-form-input-container",z?"!border-interactive-sell":"")},p.createElement(xe,{maxLength:19,inputMode:"decimal",type:"text",placeholder:r("orderForm-Collateral-placeholder",{defaultValue:"Collateral"}),autoComplete:"off",...f,...R,value:R.value,onChange:U,inputSize:"sm",className:"p-0 bg-transparent text-body2"}),p.createElement("div",null,a))))},Ka=p.memo((({collateralTokens:e=[],getI18n:t,symbol:a,onChainPerpContractAddress:r,predictionConfig:n,predictionPairs:o,staticHost:l})=>{const s=(0,p.useMemo)((()=>p.createElement(He,{context:fe,collateralTokens:e,getI18n:t,swapToTradeTokens:[],staticHost:l})),[e,t,l]);return p.createElement("div",{className:"relative mb-1"},p.createElement(Ga,{symbol:a,getI18n:t,suffix:s,onChainPerpContractAddress:r,predictionConfig:n,predictionPairs:o}))})),ja=({tokenName:e,approve:t,getI18n:a,refetch:r,disabled:n,isFetched:s,children:i})=>{const c=(0,Fe.h)(),[d,m]=(0,p.useState)(!1),{trigger:u}=(0,g.Gc)(),f=(0,at.Z)(),b=(0,p.useCallback)((async()=>{try{m(!0);const e=await t();await(0,l.As)({getI18n:a,config:f,hash:e}),await r(),setTimeout((()=>u("amountIn")),0)}catch(e){}finally{m(!1)}}),[t,a,f,r,u]);return p.createElement(h.z,{type:"button",className:"w-full h-10 text-subtitle2",onClick:b,disabled:d||!s||n},i??a("orderForm-button-approve",{defaultValue:"Approve {{token}}",token:(0,o.De)(e,c)}))};var Ya=a(94043),Ja=a(59712);const Xa=({getI18n:e,useTokenApprove:t,predictionConfig:a,collateralTokens:r=[],useCurrentProduct:n,isUnsupportedNetwork:l=!1,defaultChainId:s=i.e.id,handleSwitchNetwork:d=(()=>{})})=>{const m=(0,p.useRef)(null),{isConnected:f,address:b}=(0,c.m)(),{connected:v}=(0,et.O)(),{errors:x}=(0,g.cl)(),{getValues:y,setValue:k}=(0,g.Gc)(),{baseAsset:C}=n(),[E,N,w]=(0,g.qo)({name:["tokenIn","amountIn","tokenInDecimals"]}),P=(({getI18n:e})=>{const{errors:t}=(0,g.cl)(),{isConnected:a}=(0,c.m)(),r=a?(({getI18n:e,errorsInfo:t})=>{const a=[{field:"amountIn",errorType:"required",getButtonProps:()=>({children:e("orderForm-button-OpenPosition","Open Position")})},{field:"price",errorType:"required",getButtonProps:()=>({children:e("orderForm-button-OpenPosition","Open Position")})},{field:"amountIn",errorType:"isInsufficientCollateralBalance",getButtonProps:e=>({children:e?.amountIn?.message})},{field:"amountIn",errorType:"isBelowOrderMaxOI",getButtonProps:e=>({children:e?.amountIn?.message})},{field:"amountIn",errorType:"isLargerThanMinCollateral",getButtonProps:e=>({children:e?.amountIn?.message})}];return a.find((({field:e,errorType:a})=>t?.[e]?.type===a))?.getButtonProps(t)??null})({getI18n:e,errorsInfo:t}):null,n=(0,p.useMemo)((()=>a&&r||{children:p.createElement("div",{className:"flex items-center"},p.createElement(Ya.b,{className:"w-5 h-5 mr-2"}),e("orderForm-button-OpenPosition","Open Position"))}),[r,a,e]);return a?n:null})({getI18n:e}),I=r?.find((e=>e.tokenAddress===E))?.name||"",{allowance:L,approve:T,refetch:M,isFetched:F,isPending:S,amount:B}=t(E,"isLessThanAllowance"===x.amountIn?.type?(0,u.f)(y("amountIn")):void 0),D=e=>{k("isLong",e),m.current&&m.current.click()},{symbol:A}=(0,se.m)({address:b,token:E,query:{enabled:Boolean(b)&&f}}),V=(0,Fe.h)();return(f||v)&&l?p.createElement(h.z,{type:"button",className:"w-full h-10 text-subtitle2",onClick:async e=>{e.preventDefault();try{await d(Number(s))}catch(e){Ja.error(e.shortMessage??e.reason??e?.message??e.error)}}},e("orderForm-switch-network","Switch Network")):f?L||""===E?""!==E&&(0,ce.v)(`${N}`,w??0)>B?p.createElement(ja,{disabled:S,isFetched:F,tokenName:I,getI18n:e,approve:T,refetch:M},e("orderForm-button-increase-authorized-amount",{defaultValue:"Increase {{symbol}} authorization amount",symbol:(0,o.De)(A,V)})):a&&!a.predictionBet?p.createElement(h.z,{type:"submit",className:"w-full h-10 text-subtitle2",disabled:!0},e("orderForm-button-marketClosed","Market Closed")):p.createElement("div",{className:"flex flex-row items-center gap-2"},p.createElement(h.z,{className:"hidden",type:"submit",ref:m}),p.createElement(h.z,{className:"w-full h-10 text-subtitle2 order-form-confirm-button-buy",type:"button",variant:"buy",onClick:()=>D("true"),...P},`${e("orderForm-long",{defaultValue:"Long"})} ${C}`),p.createElement(h.z,{className:"w-full h-10 text-subtitle2 order-form-confirm-button-sell",type:"button",variant:"sell",onClick:()=>D("false"),...P},`${e("orderForm-short",{defaultValue:"Short"})} ${C}`)):p.createElement(ja,{disabled:S,isFetched:F,tokenName:I,getI18n:e,approve:T,refetch:M}):p.createElement("div",{className:"[&_a]:flex [&_a]:h-10 w-full [&_a]:items-center"},p.createElement(tt.Z,{getI18n:e,size:"md",className:"w-full"}))},er=({getI18n:e,symbol:t,useWebsocketSymbolMarkPrice:a,pricePrecision:r})=>{const[n]=(0,g.qo)({name:["isLong"]}),o=a(t),l=j(n),s=(0,u.f)(o.close??"0"),i=G({isLong:l,orderType:"market",limitPrice:(0,u.f)("0"),marketPrice:s,spread:0n}),{field:c}=(0,g.bc)({name:"entryPrice",shouldUnregister:!0}),d=(0,S.d)(i);return(0,p.useEffect)((()=>{c.value!==d&&c.onChange(d)}),[c,d]),p.createElement(dt,{label:p.createElement(ct.t,{tip:p.createElement("div",{className:"w-[282px]"},p.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-dumb-entry-price-tips","The current price is for reference only, and the final entry price is the price at the time of confirmation on the chain.")))},p.createElement("span",null,e("orderForm-entryPrice","Entry Price")))},p.createElement("div",{className:"text-t-primary"},(0,lt.uf)((0,S.d)(i),r)," USD"))};var tr=a(37444),ar=a(51308);const rr=({getI18n:e,predictionPairs:t,pairBase:a})=>{const r=$e(),n=(0,m.x)(),{getValues:l,resetField:s}=(0,g.Gc)(),{field:i}=(0,g.bc)({name:"period"}),{setCurrentPredictionPeriod:c,currentPredictionPeriod:d}=(0,ar.W)(),[u,f]=(0,p.useState)(),h=(0,p.useMemo)((()=>t?.find((e=>e.base===a))?.predictionPeriods.filter((e=>o.v$.has(e.period))).filter((e=>0===e.status))),[t,a]),b=(0,p.useCallback)((e=>{if(!h)return;const t=h.at(e);t&&(i.onChange(parseInt(`${t.period}`,10)),f(e),r.setExpiration(n,l("pairBase"),e))}),[n,i,l,r,h]);(0,p.useEffect)((()=>{const e=l("period");if(a&&void 0===u&&void 0===e&&h&&h.length>0){const e=Math.min(r.expiration?.[n]?.[a]||0,h.length-1);s("period",{defaultValue:h.at(e)?.period}),f(e)}}),[u,n,a,l,r.expiration,h,s]),(0,p.useEffect)((()=>{d!==i.value&&c(i.value)}),[d,i.value,c]);const v=(0,p.useMemo)((()=>h?.map((e=>({key:e.period,label:o.v$.get(e.period)?.label})))),[h]);return p.createElement(dt,{className:"pt-0 mt-4",label:p.createElement(ct.t,{tip:p.createElement("div",{className:"w-[282px]"},p.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-dumb-mode-expiration-tips","This is not the time when you click to open a position, but the 60S countdown from the moment it is confirmed on the chain.")))},p.createElement("span",{className:"text-body2"},e("orderForm-dumb-mode-expiration","Expiration")))},v?p.createElement(tr.W,{activeIndex:u,className:"flex items-center gap-2",optionClassName:"w-[32px] py-0 h-6 text-t-cation1 order-form-expiration-radio-option",options:v,onChange:b}):null)},nr=({getI18n:e,useAssetPrecision:t,predictionPairs:a})=>{const r=(0,Fe.h)(),[n,l,s,i,c]=(0,g.qo)({name:["tokenInName","period","pairBase","amountIn","tokenInDecimals"]}),d=(0,p.useMemo)((()=>a?.find((e=>s===e.base))?.predictionPeriods.find((e=>e.period===parseInt(l,10)))),[l,a,s]),m=(0,p.useMemo)((()=>{if(!i||!d)return null;const e=(0,ce.v)(i,c);return(e-e*BigInt(d.openFeeP)/10n**BigInt(o.cB.percent))*BigInt(1e4)/10n**BigInt(o.cB.percent)}),[i,d,c]),u=t((0,o.De)(n,r))||2;return p.createElement(dt,{detailClassName:"text-end",label:p.createElement("span",null,e("orderForm-dumb-loss-label","Loss"))},p.createElement("span",{className:"text-t-sell"},i?null:`-${(0,Be.FB)((0,B.b)(10000n,o.cB.percent-2),2)}%`,i&&n?`-${(0,Be.FB)((0,B.b)(m||0n,c),u)} ${n} (-${(0,Be.FB)((0,B.b)(BigInt(1e4),o.cB.percent-2),2)}%) `:null))},or=({getI18n:e,predictionPairs:t,useAssetPrecision:a})=>{const r=(0,Fe.h)(),[n,l,s,i,c]=(0,g.qo)({name:["tokenInName","period","pairBase","amountIn","tokenInDecimals"]}),d=(0,p.useMemo)((()=>t?.find((e=>s===e.base))?.predictionPeriods.find((e=>e.period===parseInt(l,10)))),[l,t,s]),m=a((0,o.De)(n,r))||2,u=(0,p.useMemo)((()=>{if(!i||!d?.winRatio||!d.winCloseFeeP)return null;const e=(0,ce.v)(i,c);return(e-e*BigInt(d.openFeeP)/10n**BigInt(o.cB.percent))*(BigInt(d.winRatio)-BigInt(d.winCloseFeeP))/10n**BigInt(o.cB.percent)}),[i,d?.winRatio,d?.winCloseFeeP,d?.openFeeP,c]);return p.createElement(dt,{detailClassName:"text-end",label:p.createElement(ct.t,{tip:p.createElement("div",{className:"w-[282px]"},p.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-dumb-profit-tip","As a prediction product, if you are right, you will make huge profits, if you are wrong, you will lose all your principal.")))},p.createElement("span",null,e("orderForm-dumb-profit-label","Profit")))},p.createElement("span",{className:"text-t-buy"},!i&&d?.winRatio?`${(0,Be.FB)((0,B.b)(BigInt(d.winRatio-d.winCloseFeeP),o.cB.percent-2),2)}%`:null,i&&n&&d?.winRatio?`+${(0,Be.FB)((0,B.b)(u||0n,c),m)} ${n} (${(0,Be.FB)((0,B.b)(BigInt(d.winRatio-d.winCloseFeeP),o.cB.percent-2),2)}%) `:null))},lr="top-[2px] w-1 h-1 rounded-full bg-t-third order-form-slider-mark",sr="bg-border-lineStrong dark:bg-t-onColor";function ir({getI18n:e}){const t=(0,Fe.h)(),{sliderThumbProps:a,useAssetPrecision:r}=(0,p.useContext)(fe),{setValue:n}=(0,g.Gc)(),[l,i,c,d]=(0,g.qo)({name:["amountIn","indexPrice","tokenInName","tokenIn"]}),m=r((0,o.De)(c,t))||2,f=Jt(d),h=Number(f??0),b=(0,u.f)(l||"0"),v=(0,u.f)(f||"0"),x=(0,Be.Y0)(Number(f??0),m),y=String(x).replace(/,/g,""),k=l&&Number(f??0)>0?Number(l)>=Number(y)?100:Number(l)/Number(h)*100:0,C=(100===k?v:b)*(0,u.f)(i||"1")/10n**18n,E=jt((0,S.d)(C),2),N=(0,p.useCallback)((e=>{if(e>=100)n("amountIn",y);else if(e<=0)n("amountIn","0");else{const t=Number(h)/100*e,a=Math.floor(t*10**m)/10**m;n("amountIn",String(a))}}),[m,y,h,n]),w=(0,p.useCallback)((([e])=>{N(e)}),[N]),P=(0,p.useCallback)((e=>{N(e)}),[N]),I=(0,p.useMemo)((()=>[{value:0,className:(0,s.cn)(lr,sr),style:{left:0},onClick:P},{value:25,className:(0,s.cn)(lr,k>25?sr:""),style:{left:"25%"},onClick:P},{value:50,className:(0,s.cn)(lr,k>50?sr:""),style:{left:"50%"},onClick:P},{value:75,className:(0,s.cn)(lr,k>75?sr:""),style:{left:"75%"},onClick:P},{value:100,className:lr,style:{right:0},onClick:P}]),[P,k]),L=(0,p.useCallback)((()=>{n("amountIn",y)}),[y,n]);return p.createElement("div",{className:"relative flex flex-col mb-3 w-full"},p.createElement("div",{className:(0,s.cn)("relative flex items-center w-full h-14 min-h-14 mb-1")},p.createElement(kt,{value:[k],trackClassName:"order-form-slider-track",min:0,max:100,onValueChange:w,step:1,thumbProps:{...a,className:"order-form-slider-thumb",dragNode:p.createElement("div",{className:(0,s.cn)("absolute top-[-20px] right-[-6px] bg-interactive-primary px-0.5 text-caption1 rounded-sm text-t-onColor order-form-drag-node",k>90?"right-[2px]":"right-[-6px]")},parseInt(`${k}`,10),"%")},marks:I}),p.createElement("div",{className:"absolute flex text-caption1 text-t-primary left-0 top-10 text-t-third"},p.createElement("span",{className:"mr-1"},`${parseInt(`${k}`,10)}%`),p.createElement("span",null,` $${E}`)),p.createElement("button",{type:"button",className:"absolute flex text-caption1 text-t-primary right-0 top-10",onClick:L},p.createElement("span",{className:"text-t-third mr-1"},e("orderForm-leverage-max","Max")),x)))}const cr=({ee:e,filterTabInfo:t,filterTabItems:a=F.n,getI18n:r,isLight:l,Link:s,locale:u,onChainPerpContractAddress:f,onError:h,onSubmit:b,pairBase:v,predictionConfig:x,predictionPairs:y,pricePrecision:k,siteHost:C,staticHost:E,useActionBtnDisabled:N,useAssetPrecision:w,useChangeSymbol:P,useCurrentProduct:I,useFuturesMarket:L,useFuturesMarketSort:T,useGetCollateralTokens:S,useIsMarketClose:B,useMarketInfo:D,useSymbolConfigInfo:A,useSymbolLogo:V,usePairByBaseConfig:q,useTokenApprove:R,useTrackPopupViewWithWalletAddress:z,useTrackWebClickWithWalletAddress:U,useWebSocketAssetIndex:$,useWebsocketSymbolMarkPrice:O,isUnsupportedNetwork:_=!1,defaultChainId:W=i.e.id,handleSwitchNetwork:H=(()=>{})})=>{const{chain:Z}=(0,c.m)(),{supportedChains:Q}=(0,d.o6)(),G=(0,m.x)(),K=(0,p.useMemo)((()=>Q.find((e=>e.id===G))),[G,Q]),j=$e(),Y=(0,g.cI)({shouldFocusError:!1,defaultValues:{isLong:"true",tokenIn:j.tokenIn[G],pairBase:v,amountIn:"",slippage:1,fee:"",acceptablePrice:""}}),{symbol:J}=I(),X=S(),{tradingMode:ee}=(0,n.C)(),te=(0,p.useMemo)((()=>X?.map((e=>o.KF.has(e.tokenAddress)?{...e,tokenAddress:"",name:Z?Z.nativeCurrency.symbol:K?.nativeCurrency.symbol}:e))?.filter((e=>{switch(ee){case"classic":case"degen":return e?.asMargin;case"dumb":return e?.asBet;default:return!0}})).filter(Boolean)||[]),[Z,K?.nativeCurrency.symbol,X,ee]),ae=(0,p.useMemo)((()=>({ee:e,filterTabInfo:t,filterTabItems:a,getI18n:r,isLight:l,siteHost:C,useChangeSymbol:P,useCurrentProduct:I,useFuturesMarketSort:T,useFuturesMarket:L,useMarketInfo:D,useTokenApprove:R,useTrackPopupViewWithWalletAddress:z,useTrackWebClickWithWalletAddress:U,useSymbolConfigInfo:A,useSymbolLogo:V,usePairByBaseConfig:q,useWebsocketSymbolMarkPrice:O,useIsMarketClose:B,useAssetPrecision:w,useActionBtnDisabled:N,locale:u,Link:s,isLeverageLoading:!1,isUnsupportedNetwork:_,defaultChainId:W,handleSwitchNetwork:H})),[e,t,a,r,l,C,P,I,T,L,D,R,z,U,A,V,q,O,B,w,N,u,s,_,W,H]),{handleSubmit:re,reset:ne,setValue:oe}=Y,le=(0,p.useCallback)((async e=>{x?.predictionBet&&await b({...e,userHeatMap:M.toObject()},(()=>ne(void 0,{keepDirtyValues:!0,keepValues:!0,keepDefaultValues:!0})))}),[b,x?.predictionBet,ne]);return(0,p.useEffect)((()=>{v&&oe("pairBase",v)}),[v,oe]),p.createElement(g.RV,{...Y},p.createElement("form",{noValidate:!0,onSubmit:re(le,h)},p.createElement(_t,{getI18n:r,Link:s,locale:u,staticHost:E,enableDumbMode:!0}),p.createElement("div",{className:"p-4"},p.createElement("div",{className:"relative mb-4"},p.createElement(fe.Provider,{value:ae},p.createElement(Ka,{symbol:J,collateralTokens:te,getI18n:r,onChainPerpContractAddress:f,predictionConfig:x,predictionPairs:y,staticHost:E}),p.createElement(ir,{getI18n:r})),p.createElement(rr,{getI18n:r,predictionPairs:y,pairBase:v})),p.createElement(Xa,{getI18n:r,useTokenApprove:R,collateralTokens:te,useActionBtnDisabled:N,useCurrentProduct:I,predictionConfig:x,isUnsupportedNetwork:_,defaultChainId:W,handleSwitchNetwork:H}),p.createElement("div",{className:"mt-2"},p.createElement(er,{getI18n:r,symbol:J,useMarketInfo:D,useWebsocketSymbolMarkPrice:O,pricePrecision:k}),p.createElement(or,{getI18n:r,predictionPairs:y,useAssetPrecision:w}),p.createElement(nr,{getI18n:r,predictionPairs:y,useAssetPrecision:w}),p.createElement("div",{className:"hidden"},p.createElement(sa,{getI18n:r})),p.createElement(ht,{useWebSocketAssetIndex:$}),p.createElement(ia,{collateralTokens:te}),p.createElement(Za,{useWebsocketSymbolMarkPrice:O,symbol:J})))),p.createElement("div",{className:"p-4 order-form-bottom"},p.createElement(pe,{getI18n:r,staticHost:E})))};var dr=a(87354),mr=a(52030),ur=a(14369),pr=a(19469),gr=a(59712);const fr=()=>{const{brokerId:e}=va.brokerConfig,{isLight:t}=(0,wa.F)(),{symbol:a,products:n}=(0,Ca.GS)(),{getI18n:s,i18n:i}=(0,Na.V6)(),d=(0,ga.NL)(),m=(0,ka.E4)(),{address:u}=(0,c.m)(),g=(0,ka.fV)(a),f=(0,p.useCallback)((()=>{}),[]),h=(0,Ta.$)(),{data:b}=(0,ur.R)(),{data:v}=(()=>{const e=(0,Fa.E)();return(0,Ze.u)({...e,functionName:"getPredictionConfig"})})(),x=(0,p.useMemo)((()=>b?.find((e=>e.name.replace("/","").toLocaleUpperCase()===a))?.base),[b,a]),y=(0,at.Z)(),k=(0,fa.t)(),C=(0,p.useCallback)((async(t,r)=>{if(!u)return;const n=Math.floor(parseFloat(t.acceptablePrice)*10**o.cB.price),i=(0,ce.v)(t.amountIn,Number(t.tokenInDecimals));try{await(0,l.oM)({config:y,publicClient:k,getI18n:s,address:m.address,predictAndBetParams:{predictionPairBase:t.pairBase,isUp:"true"===t.isLong,broker:e,period:t.period,price:BigInt(n),amountIn:i,tokenIn:t.tokenIn},symbol:a,onUserConfirm:()=>r?.()})}catch(e){gr.error(e),ne.A.error(e.shortMessage??e?.reason??e.error??e?.message)}finally{d.invalidateQueries({queryKey:[dr.ac.DumbPositionList]})}}),[u,e,y,s,m.address,k,d,a]),{dumb:E}=(0,Ea.B)();return(0,r.jsx)(cr,{assetDecimals:h.data,ee:Ia.ee,enableDumbMode:E,getI18n:s,isLight:t,locale:i.language,onChainPerpContractAddress:m.address,onError:f,onSubmit:C,pairBase:x,predictionConfig:v,predictionPairs:b,pricePrecision:g,products:n,Link:ba.G,siteHost:va.brokerConfig.staticBaseUrl,staticHost:va.brokerConfig.apxStaticBaseUrl,useActionBtnDisabled:Ca.a9,useAssetPrecision:ka.RK,useChangeSymbol:ka.d0,useCurrentProduct:ka.j2,useFuturesMarket:pr.n,useFuturesMarketSort:ka.e,useGetCollateralTokens:Ba,useGetMaxCollateral:Aa,useGetPairMaxTpRatios:Ua.r,useIsMarketClose:$a.Z,useMarketInfo:Va.c,usePairByBaseConfig:Da.t,useSymbolConfigInfo:ka.Kn,useSymbolList:qa.S,useSymbolLogo:ka.sH,useTokenApprove:Ra.Z,useTrackPopupViewWithWalletAddress:mr.T,useTrackWebClickWithWalletAddress:mr.f,useWebSocketAssetIndex:ka.Ms,useWebsocketSymbolMarkPrice:ka.Le,enableActivityNotice:!0,useCoachmark:Pa.KO,guideNoticeKey:xa.IL})},hr=()=>{const{isDegenMode:e,isClassicMode:t,isDumbMode:a}=(0,n.C)();return(0,r.jsxs)(r.Fragment,{children:[e||t?(0,r.jsx)(Ha,{},"futures"):null,a?(0,r.jsx)(fr,{},"prediction"):null]})}},19469:(e,t,a)=>{a.d(t,{n:()=>m});var r=a(8429),n=a(84400),o=a(87685),l=a(87250),s=a(85177),i=a(14369),c=a(25254),d=a(86562);const m=()=>{const{data:e=[]}=(0,o.sP)(),t=(0,i.R)(),a=(0,o.j2)(),{updateTime:m,products:u}=(0,s.GS)(),p=(0,s.P2)(u,"desc"),g=(0,n.useMemo)((()=>t.data?.map((e=>e.name.replace(/\//g,"")))),[t.data]),{baseTicker:f}=(0,l.dK)(p),h=(0,d.W)(),b=(0,c.H)(e),v=(0,l.Ae)(f,h,b),x=Date.now();return{validTickers:(0,n.useMemo)((()=>u.filter((e=>(0,r.L)(e.symbolType).isDumb)).filter((e=>g?.includes(e.symbol))).map((e=>{const t=v[e.symbol];return{...e,...t,update:x,symbolType:e.symbolType}}))),[v,g,u,x]),loading:t.isLoading,update:[m],activeSymbol:a}}},1619:(e,t,a)=>{a.d(t,{ee:()=>r});const r=new(a(58407).v)}}]);